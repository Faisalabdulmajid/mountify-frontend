{"version":3,"file":"static/js/146.1a638e29.chunk.js","mappings":"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","sources":["pages/admin/poi/TambahPoi.js"],"sourcesContent":["// src/pages/admin/poi/TambahPoi.js (Final - Dengan Kapitalisasi Otomatis)\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { useNavigate, Link } from \"react-router-dom\";\r\nimport { ToastContainer, toast } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\nimport \"./TambahPoi.css\";\r\n\r\nconst API_BASE_URL = \"http://localhost:5000\";\r\n\r\n// --- Fungsi Bantuan untuk Kapitalisasi ---\r\nconst toTitleCase = (str) => {\r\n  if (!str) return \"\";\r\n  return str\r\n    .toLowerCase()\r\n    .split(\" \")\r\n    .map((word) => word.charAt(0).toUpperCase() + word.slice(1))\r\n    .join(\" \");\r\n};\r\n\r\nfunction TambahPoi() {\r\n  const navigate = useNavigate();\r\n  const [formData, setFormData] = useState({\r\n    nama_titik: \"\",\r\n    tipe_titik: \"Pos\",\r\n    id_jalur: \"\",\r\n    koordinat: \"\",\r\n    deskripsi: \"\",\r\n    ketersediaan_air: false,\r\n    kapasitas_tenda: 0,\r\n  });\r\n\r\n  const [idGunung, setIdGunung] = useState(\"\");\r\n  const [gunungList, setGunungList] = useState([]);\r\n  const [jalurList, setJalurList] = useState([]);\r\n  const [jalurTersedia, setJalurTersedia] = useState([]);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const fetchDataForDropdowns = async () => {\r\n      setIsLoading(true);\r\n      try {\r\n        const token = localStorage.getItem(\"token\");\r\n        console.log(\"ðŸ”„ Fetching data for dropdowns...\");\r\n\r\n        const [gunungRes, jalurRes] = await Promise.all([\r\n          fetch(`${API_BASE_URL}/api/gunung`, {\r\n            headers: { Authorization: `Bearer ${token}` },\r\n          }),\r\n          fetch(`${API_BASE_URL}/api/admin/jalur-for-poi`, {\r\n            headers: { Authorization: `Bearer ${token}` },\r\n          }),\r\n        ]);\r\n\r\n        console.log(\r\n          \"ðŸ“Š Response status - Gunung:\",\r\n          gunungRes.status,\r\n          \"Jalur:\",\r\n          jalurRes.status\r\n        );\r\n\r\n        // Jika endpoint jalur gagal, coba endpoint alternatif\r\n        let jalurData = [];\r\n        if (jalurRes.ok) {\r\n          jalurData = await jalurRes.json();\r\n          console.log(\"âœ… Endpoint /api/admin/jalur-for-poi berhasil\");\r\n        } else {\r\n          console.warn(\r\n            \"âš ï¸ Endpoint /api/admin/jalur-for-poi gagal, status:\",\r\n            jalurRes.status\r\n          );\r\n          const errorText = await jalurRes.text();\r\n          console.log(\"âŒ Error response:\", errorText);\r\n\r\n          console.log(\"ðŸ”„ Mencoba endpoint standar admin jalur...\");\r\n          try {\r\n            const jalurResStandard = await fetch(\r\n              `${API_BASE_URL}/api/admin/jalur`,\r\n              {\r\n                headers: { Authorization: `Bearer ${token}` },\r\n              }\r\n            );\r\n            if (jalurResStandard.ok) {\r\n              jalurData = await jalurResStandard.json();\r\n              console.log(\r\n                \"âœ… Berhasil menggunakan endpoint standar /api/admin/jalur\"\r\n              );\r\n            } else {\r\n              console.log(\"ðŸ”„ Mencoba endpoint alternatif /api/jalur...\");\r\n              const jalurResAlt = await fetch(`${API_BASE_URL}/api/jalur`, {\r\n                headers: { Authorization: `Bearer ${token}` },\r\n              });\r\n              if (jalurResAlt.ok) {\r\n                jalurData = await jalurResAlt.json();\r\n                console.log(\r\n                  \"âœ… Berhasil menggunakan endpoint alternatif /api/jalur\"\r\n                );\r\n              } else {\r\n                const altErrorText = await jalurResAlt.text();\r\n                console.error(\r\n                  \"âŒ Endpoint alternatif juga gagal:\",\r\n                  jalurResAlt.status,\r\n                  altErrorText\r\n                );\r\n              }\r\n            }\r\n          } catch (altError) {\r\n            console.error(\"âŒ Endpoint alternatif juga gagal:\", altError);\r\n          }\r\n        }\r\n\r\n        if (!gunungRes.ok && jalurData.length === 0)\r\n          throw new Error(\"Gagal memuat data untuk dropdown.\");\r\n\r\n        const gunungData = await gunungRes.json();\r\n\r\n        console.log(\"ðŸ“ˆ Data loaded:\");\r\n        console.log(\"- Gunung:\", gunungData);\r\n        console.log(\"- Jalur:\", jalurData);\r\n\r\n        // Validasi struktur data jalur\r\n        if (jalurData.length > 0) {\r\n          const sampleJalur = jalurData[0];\r\n          console.log(\"ðŸ” Sample jalur structure:\", sampleJalur);\r\n          if (!sampleJalur.hasOwnProperty(\"id_gunung\")) {\r\n            console.warn(\"âš ï¸ Data jalur tidak memiliki field id_gunung!\");\r\n          }\r\n        }\r\n\r\n        setGunungList(gunungData);\r\n        setJalurList(jalurData);\r\n      } catch (error) {\r\n        console.error(\"âŒ Error fetching dropdown data:\", error);\r\n        toast.error(error.message);\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    };\r\n    fetchDataForDropdowns();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    console.log(\"ðŸ” Debug Filter Jalur:\");\r\n    console.log(\"- idGunung:\", idGunung, \"type:\", typeof idGunung);\r\n    console.log(\"- jalurList:\", jalurList);\r\n\r\n    if (idGunung) {\r\n      // Coba beberapa cara filter untuk mengatasi masalah tipe data\r\n      const filteredJalur = jalurList.filter((jalur) => {\r\n        const match1 = jalur.id_gunung === parseInt(idGunung);\r\n        const match2 = String(jalur.id_gunung) === String(idGunung);\r\n        // eslint-disable-next-line eqeqeq\r\n        const match3 = jalur.id_gunung == idGunung; // loose equality untuk backup\r\n\r\n        console.log(\r\n          `- Jalur \"${jalur.nama_jalur}\": id_gunung=${\r\n            jalur.id_gunung\r\n          } (${typeof jalur.id_gunung}), match=${match1 || match2 || match3}`\r\n        );\r\n\r\n        return match1 || match2 || match3;\r\n      });\r\n\r\n      console.log(\"- Jalur tersedia:\", filteredJalur);\r\n      setJalurTersedia(filteredJalur);\r\n    } else {\r\n      setJalurTersedia([]);\r\n    }\r\n    setFormData((prev) => ({ ...prev, id_jalur: \"\" }));\r\n  }, [idGunung, jalurList]);\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value, type, checked } = e.target;\r\n    setFormData((prev) => ({\r\n      ...prev,\r\n      [name]: type === \"checkbox\" ? checked : value,\r\n    }));\r\n  };\r\n\r\n  // --- FUNGSI BARU ---\r\n  // Menerapkan kapitalisasi saat pengguna selesai mengisi input nama\r\n  const handleBlur = (e) => {\r\n    const { name, value } = e.target;\r\n    if (name === \"nama_titik\") {\r\n      setFormData((prev) => ({ ...prev, [name]: toTitleCase(value) }));\r\n    }\r\n  };\r\n\r\n  const handleGunungChange = (e) => {\r\n    setIdGunung(e.target.value);\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    if (!formData.nama_titik || !formData.id_jalur) {\r\n      toast.warn(\"Nama POI dan Jalur terkait wajib diisi.\");\r\n      return;\r\n    }\r\n    setIsLoading(true);\r\n\r\n    // --- PERBAIKAN: Menerapkan toTitleCase sebelum mengirim ---\r\n    const dataToSend = {\r\n      ...formData,\r\n      nama_titik: toTitleCase(formData.nama_titik),\r\n    };\r\n\r\n    try {\r\n      const token = localStorage.getItem(\"token\");\r\n      const response = await fetch(`${API_BASE_URL}/api/admin/poi`, {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n        body: JSON.stringify(dataToSend),\r\n      });\r\n      const result = await response.json();\r\n      if (!response.ok) throw new Error(result.message);\r\n      toast.success(result.message);\r\n      navigate(\"/admin/poi\");\r\n    } catch (error) {\r\n      toast.error(error.message || \"Terjadi kesalahan.\");\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"add-poi-page\">\r\n      <ToastContainer position=\"top-right\" autoClose={3000} />\r\n      <header className=\"page-header\">\r\n        <h1>Tambah Titik Penting (POI) Baru</h1>\r\n        <Link to=\"/admin/poi\" className=\"btn-back\">\r\n          <i className=\"bi bi-arrow-left\"></i> Kembali ke Daftar POI\r\n        </Link>\r\n      </header>\r\n\r\n      <form onSubmit={handleSubmit} className=\"form-widget-poi\">\r\n        <fieldset className=\"form-fieldset\" disabled={isLoading}>\r\n          <legend>Informasi Utama</legend>\r\n          <div className=\"form-row\">\r\n            <div className=\"form-group\">\r\n              <label htmlFor=\"nama_titik\">Nama Titik Penting (POI)</label>\r\n              <input\r\n                type=\"text\"\r\n                id=\"nama_titik\"\r\n                name=\"nama_titik\"\r\n                value={formData.nama_titik}\r\n                onChange={handleChange}\r\n                onBlur={handleBlur} // Menambahkan onBlur\r\n                required\r\n                placeholder=\"Contoh: Pos 3 Kandang Badak\"\r\n              />\r\n            </div>\r\n            <div className=\"form-group\">\r\n              <label htmlFor=\"tipe_titik\">Kategori Titik Penting</label>\r\n              <select\r\n                id=\"tipe_titik\"\r\n                name=\"tipe_titik\"\r\n                value={formData.tipe_titik}\r\n                onChange={handleChange}\r\n              >\r\n                <option value=\"Pos\">Pos</option>\r\n                <option value=\"Shelter\">Shelter</option>\r\n                <option value=\"Sumber Air\">Sumber Air</option>\r\n                <option value=\"Area Kemah\">Area Kemah</option>\r\n                <option value=\"Puncak\">Puncak</option>\r\n                <option value=\"Spot Foto\">Spot Foto</option>\r\n                <option value=\"Persimpangan\">Persimpangan</option>\r\n                <option value=\"Lainnya\">Lainnya</option>\r\n              </select>\r\n            </div>\r\n          </div>\r\n          <div className=\"form-row\">\r\n            <div className=\"form-group\">\r\n              <label htmlFor=\"id_gunung\">Terletak di Gunung</label>\r\n              <select\r\n                id=\"id_gunung\"\r\n                name=\"id_gunung\"\r\n                value={idGunung}\r\n                onChange={handleGunungChange}\r\n              >\r\n                <option value=\"\">-- Pilih Gunung untuk filter jalur --</option>\r\n                {gunungList.map((g) => (\r\n                  <option key={g.id_gunung} value={g.id_gunung}>\r\n                    {g.nama_gunung}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n            <div className=\"form-group\">\r\n              <label htmlFor=\"id_jalur\">Berada di Jalur</label>\r\n              {/* Debug info */}\r\n              {process.env.NODE_ENV === \"development\" && (\r\n                <small style={{ color: \"#666\", fontSize: \"0.8em\" }}>\r\n                  Debug: Jalur tersedia: {jalurTersedia.length} | Gunung\r\n                  dipilih: {idGunung || \"Belum\"}\r\n                </small>\r\n              )}\r\n              <select\r\n                id=\"id_jalur\"\r\n                name=\"id_jalur\"\r\n                value={formData.id_jalur}\r\n                onChange={handleChange}\r\n                required\r\n                disabled={!idGunung || jalurTersedia.length === 0}\r\n              >\r\n                <option value=\"\">\r\n                  {!idGunung\r\n                    ? \"-- Pilih Gunung dulu --\"\r\n                    : jalurTersedia.length === 0\r\n                    ? \"-- Tidak ada jalur tersedia --\"\r\n                    : \"-- Pilih Jalur --\"}\r\n                </option>\r\n                {jalurTersedia.map((j) => (\r\n                  <option key={j.id_jalur} value={j.id_jalur}>\r\n                    {j.nama_jalur}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n          </div>\r\n          <div className=\"form-group full-width\">\r\n            <label htmlFor=\"koordinat\">\r\n              Koordinat Lokasi (Latitude, Longitude)\r\n            </label>\r\n            <input\r\n              type=\"text\"\r\n              id=\"koordinat\"\r\n              name=\"koordinat\"\r\n              value={formData.koordinat}\r\n              onChange={handleChange}\r\n              placeholder=\"Contoh: -6.7821, 106.9875\"\r\n            />\r\n          </div>\r\n        </fieldset>\r\n\r\n        <fieldset className=\"form-fieldset\" disabled={isLoading}>\r\n          <legend>Atribut Tambahan</legend>\r\n          <div className=\"form-row\">\r\n            <div className=\"form-group\">\r\n              <label htmlFor=\"kapasitas_tenda\">\r\n                Kapasitas Tenda (jika Area Camp)\r\n              </label>\r\n              <input\r\n                type=\"number\"\r\n                id=\"kapasitas_tenda\"\r\n                name=\"kapasitas_tenda\"\r\n                value={formData.kapasitas_tenda}\r\n                onChange={handleChange}\r\n                placeholder=\"0\"\r\n              />\r\n            </div>\r\n            <div className=\"form-group toggle-group\">\r\n              <label>Ketersediaan Sumber Air</label>\r\n              <div className=\"toggle-switch-container\">\r\n                <span>Tidak</span>\r\n                <label className=\"toggle-switch\">\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    name=\"ketersediaan_air\"\r\n                    checked={formData.ketersediaan_air}\r\n                    onChange={handleChange}\r\n                  />\r\n                  <span className=\"slider round\"></span>\r\n                </label>\r\n                <span>Ya</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className=\"form-group full-width\">\r\n            <label htmlFor=\"deskripsi\">\r\n              Deskripsi atau Keterangan Tambahan\r\n            </label>\r\n            <textarea\r\n              id=\"deskripsi\"\r\n              name=\"deskripsi\"\r\n              rows=\"4\"\r\n              value={formData.deskripsi}\r\n              onChange={handleChange}\r\n              placeholder=\"Jelaskan hal penting tentang lokasi ini...\"\r\n            ></textarea>\r\n          </div>\r\n        </fieldset>\r\n\r\n        <div className=\"form-actions\">\r\n          <button\r\n            type=\"button\"\r\n            className=\"btn-cancel\"\r\n            onClick={() => navigate(\"/admin/poi\")}\r\n            disabled={isLoading}\r\n          >\r\n            Batal\r\n          </button>\r\n          <button type=\"submit\" className=\"btn-save\" disabled={isLoading}>\r\n            {isLoading ? \"Menyimpan...\" : \"Simpan POI\"}\r\n          </button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default TambahPoi;\r\n"],"names":["API_BASE_URL","toTitleCase","str","toLowerCase","split","map","word","charAt","toUpperCase","slice","join","navigate","useNavigate","formData","setFormData","useState","nama_titik","tipe_titik","id_jalur","koordinat","deskripsi","ketersediaan_air","kapasitas_tenda","idGunung","setIdGunung","gunungList","setGunungList","jalurList","setJalurList","jalurTersedia","setJalurTersedia","isLoading","setIsLoading","useEffect","async","token","localStorage","getItem","console","log","gunungRes","jalurRes","Promise","all","fetch","concat","headers","Authorization","status","jalurData","ok","json","warn","errorText","text","jalurResStandard","jalurResAlt","altErrorText","error","altError","length","Error","gunungData","sampleJalur","hasOwnProperty","toast","message","fetchDataForDropdowns","filteredJalur","filter","jalur","match1","id_gunung","parseInt","match2","String","match3","nama_jalur","prev","_objectSpread","handleChange","e","name","value","type","checked","target","_jsxs","className","children","_jsx","ToastContainer","position","autoClose","Link","to","onSubmit","preventDefault","dataToSend","response","method","body","JSON","stringify","result","success","disabled","htmlFor","id","onChange","onBlur","required","placeholder","g","nama_gunung","process","j","rows","onClick"],"sourceRoot":""}