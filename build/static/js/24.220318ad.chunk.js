"use strict";(self.webpackChunkspk_gunung=self.webpackChunkspk_gunung||[]).push([[24],{698:(e,a,n)=>{n.d(a,{A:()=>s});n(5043);var t=n(579);const s=e=>{let{title:a,onAddClick:n,addLabel:s="Tambah",addIcon:l=(0,t.jsx)("i",{className:"bi bi-plus-lg"}),children:c}=e;return(0,t.jsxs)("div",{className:"controls-container",children:[(0,t.jsxs)("div",{className:"header-row",children:[(0,t.jsx)("h1",{className:"page-title",children:a}),n&&(0,t.jsxs)("button",{className:"btn-add-new",onClick:n,children:[l," ",s]})]}),c]})}},2024:(e,a,n)=>{n.r(a),n.d(a,{default:()=>u});var t=n(5043),s=n(1283),l=n(7488),c=(n(2342),n(64)),i=n.n(c),r=(n(6681),n(5071)),d=(n(9645),n(579));const o="http://localhost:5000/api/admin";const u=function(){const e=(0,s.Zp)(),[a,n]=(0,t.useState)([]),[c,u]=(0,t.useState)(!0),[h,m]=(0,t.useState)(""),[j,x]=(0,t.useState)("Semua"),p=(0,t.useCallback)(async()=>{u(!0);try{const e=localStorage.getItem("token"),a=await fetch("".concat(o,"/announcements"),{headers:{Authorization:"Bearer ".concat(e)}});if(!a.ok)throw new Error("Gagal mengambil data pengumuman.");const t=await a.json();n(t)}catch(e){l.oR.error(e.message)}finally{u(!1)}},[]);(0,t.useEffect)(()=>{p()},[p]);const g=(0,t.useMemo)(()=>{let e=a;return"Semua"!==j&&(e=e.filter(e=>e.displayStatus===j)),h&&(e=e.filter(e=>e.judul.toLowerCase().includes(h.toLowerCase())||e.penulis&&e.penulis.toLowerCase().includes(h.toLowerCase()))),e},[a,h,j]),b=e=>e?new Date(e).toLocaleDateString("id-ID",{day:"2-digit",month:"long",year:"numeric"}):"-";return(0,d.jsxs)("div",{className:"pengumuman-management-page",children:[(0,d.jsx)(l.N9,{position:"top-right",autoClose:3e3,hideProgressBar:!1}),(0,d.jsx)(r.zY,{title:"Manajemen Pengumuman",addLabel:"Buat Pengumuman Baru",onAddClick:()=>e("/admin/announcements/new"),children:(0,d.jsxs)("div",{className:"toolbar",children:[(0,d.jsxs)("div",{className:"search-container",children:[(0,d.jsx)("i",{className:"bi bi-search"}),(0,d.jsx)("input",{type:"text",placeholder:"Cari judul atau penulis...",value:h,onChange:e=>m(e.target.value)})]}),(0,d.jsx)("div",{className:"filter-container",children:(0,d.jsxs)("select",{value:j,onChange:e=>x(e.target.value),children:[(0,d.jsx)("option",{value:"Semua",children:"Semua Status"}),(0,d.jsx)("option",{value:"Draft",children:"Draft"}),(0,d.jsx)("option",{value:"Dijadwalkan",children:"Dijadwalkan"}),(0,d.jsx)("option",{value:"Sedang Berlangsung",children:"Sedang Berlangsung"}),(0,d.jsx)("option",{value:"Kadaluarsa",children:"Kadaluarsa"})]})})]})}),(0,d.jsx)("div",{className:"table-container",children:(0,d.jsxs)("table",{className:"data-table",children:[(0,d.jsx)("thead",{children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{style:{width:"25%"},children:(0,d.jsx)("div",{className:"header-cell-content",children:(0,d.jsx)("span",{children:"Judul Pengumuman"})})}),(0,d.jsx)("th",{style:{width:"12%"},children:(0,d.jsx)("div",{className:"header-cell-content",children:(0,d.jsx)("span",{children:"Status"})})}),(0,d.jsx)("th",{style:{width:"15%"},children:(0,d.jsx)("div",{className:"header-cell-content",children:(0,d.jsx)("span",{children:"Target"})})}),(0,d.jsx)("th",{style:{width:"15%"},children:(0,d.jsx)("div",{className:"header-cell-content",children:(0,d.jsx)("span",{children:"Penulis"})})}),(0,d.jsx)("th",{style:{width:"18%"},children:(0,d.jsx)("div",{className:"header-cell-content",children:(0,d.jsx)("span",{children:"Periode Aktif"})})}),(0,d.jsx)("th",{style:{width:"15%"},children:"Aksi"})]})}),(0,d.jsx)("tbody",{children:c?(0,d.jsx)("tr",{children:(0,d.jsx)("td",{colSpan:"6",className:"text-center",children:"Memuat data..."})}):g.length>0?g.map(a=>{return(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{className:"pengumuman-judul",children:a.judul}),(0,d.jsx)("td",{children:(0,d.jsx)("span",{className:"status-badge ".concat((n=a.displayStatus,n?"status-".concat(n.toLowerCase().replace(/\s+/g,"-")):"")),children:a.displayStatus})}),(0,d.jsx)("td",{children:a.target}),(0,d.jsx)("td",{children:a.penulis||"N/A"}),(0,d.jsx)("td",{children:"".concat(b(a.berlaku_mulai)," - ").concat(b(a.berlaku_sampai))}),(0,d.jsx)("td",{children:(0,d.jsxs)("div",{className:"action-buttons",children:[(0,d.jsx)("button",{className:"action-btn btn-edit",onClick:()=>{return n=a.id_pengumuman,e("/admin/announcements/edit/".concat(n));var n},children:(0,d.jsx)("i",{className:"bi bi-pencil-fill"})}),(0,d.jsx)("button",{className:"action-btn btn-delete",onClick:()=>{return e=a.id_pengumuman,n=a.judul,void i().fire({title:"Apakah Anda yakin?",text:'Menghapus pengumuman "'.concat(n,'" tidak dapat dibatalkan.'),icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#6c757d",confirmButtonText:"Ya, hapus!",cancelButtonText:"Batal"}).then(async a=>{if(a.isConfirmed){const a=localStorage.getItem("token");try{const n=await fetch("".concat(o,"/announcements/").concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(a)}}),t=await n.json();if(!n.ok)throw new Error(t.message);l.oR.success(t.message),p()}catch(n){l.oR.error(n.message)}}});var e,n},children:(0,d.jsx)("i",{className:"bi bi-trash-fill"})})]})})]},a.id_pengumuman);var n}):(0,d.jsx)("tr",{children:(0,d.jsx)("td",{colSpan:"6",className:"text-center",children:"Belum ada pengumuman."})})})]})})]})}},5071:(e,a,n)=>{n.d(a,{zY:()=>t.A});var t=n(698);n(5043),n(579)},6681:()=>{},9645:()=>{}}]);
//# sourceMappingURL=24.220318ad.chunk.js.map