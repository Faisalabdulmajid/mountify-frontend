{"version":3,"file":"static/js/24.220318ad.chunk.js","mappings":"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","sources":["components/common/PageHeader/PageHeader.js","pages/admin/pengumuman/KelolaPengumuman.js"],"sourcesContent":["import React from \"react\";\r\n\r\nconst PageHeader = ({\r\n  title,\r\n  onAddClick,\r\n  addLabel = \"Tambah\",\r\n  addIcon = <i className=\"bi bi-plus-lg\"></i>,\r\n  children,\r\n}) => {\r\n  return (\r\n    <div className=\"controls-container\">\r\n      <div className=\"header-row\">\r\n        <h1 className=\"page-title\">{title}</h1>\r\n        {onAddClick && (\r\n          <button className=\"btn-add-new\" onClick={onAddClick}>\r\n            {addIcon} {addLabel}\r\n          </button>\r\n        )}\r\n      </div>\r\n      {children}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PageHeader;\r\n","// src/pages/admin/pengumuman/KelolaPengumuman.js (Dengan Filter)\r\n\r\nimport React, { useState, useMemo, useEffect, useCallback } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { ToastContainer, toast } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\nimport Swal from \"sweetalert2\";\r\nimport \"sweetalert2/dist/sweetalert2.min.css\";\r\nimport \"./KelolaPengumuman.css\";\r\nimport { PageHeader } from \"../../../components/common/PageHeader\";\r\nimport \"../../../components/common/PageHeader/PageHeader.css\";\r\n\r\nconst API_BASE_URL = \"http://localhost:5000/api/admin\";\r\n\r\nfunction KelolaPengumuman() {\r\n  const navigate = useNavigate();\r\n  const [pengumumanList, setPengumumanList] = useState([]);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [searchTerm, setSearchTerm] = useState(\"\");\r\n\r\n  // [1. DITAMBAHKAN] State untuk menampung nilai filter status\r\n  const [statusFilter, setStatusFilter] = useState(\"Semua\");\r\n\r\n  const fetchPengumuman = useCallback(async () => {\r\n    setIsLoading(true);\r\n    try {\r\n      const token = localStorage.getItem(\"token\");\r\n      const response = await fetch(`${API_BASE_URL}/announcements`, {\r\n        //\r\n        headers: { Authorization: `Bearer ${token}` },\r\n      });\r\n      if (!response.ok) throw new Error(\"Gagal mengambil data pengumuman.\"); //\r\n      const data = await response.json();\r\n      setPengumumanList(data);\r\n    } catch (error) {\r\n      toast.error(error.message);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    fetchPengumuman();\r\n  }, [fetchPengumuman]);\r\n\r\n  // [2. DIPERBARUI] Logika filter sekarang mencakup searchTerm DAN statusFilter\r\n  const filteredPengumuman = useMemo(() => {\r\n    let filtered = pengumumanList;\r\n\r\n    // Terapkan filter status terlebih dahulu\r\n    if (statusFilter !== \"Semua\") {\r\n      filtered = filtered.filter((p) => p.displayStatus === statusFilter);\r\n    }\r\n\r\n    // Kemudian terapkan filter pencarian pada hasil filter status\r\n    if (searchTerm) {\r\n      filtered = filtered.filter(\r\n        (p) =>\r\n          p.judul.toLowerCase().includes(searchTerm.toLowerCase()) || //\r\n          (p.penulis &&\r\n            p.penulis.toLowerCase().includes(searchTerm.toLowerCase())) //\r\n      );\r\n    }\r\n\r\n    return filtered;\r\n  }, [pengumumanList, searchTerm, statusFilter]); // Tambahkan statusFilter ke dependency array\r\n\r\n  const handleAddPengumuman = () => navigate(\"/admin/announcements/new\");\r\n  const handleEditPengumuman = (id) =>\r\n    navigate(`/admin/announcements/edit/${id}`);\r\n\r\n  const handleDeletePengumuman = (id, judul) => {\r\n    Swal.fire({\r\n      title: \"Apakah Anda yakin?\",\r\n      text: `Menghapus pengumuman \"${judul}\" tidak dapat dibatalkan.`,\r\n      icon: \"warning\",\r\n      showCancelButton: true,\r\n      confirmButtonColor: \"#d33\",\r\n      cancelButtonColor: \"#6c757d\",\r\n      confirmButtonText: \"Ya, hapus!\",\r\n      cancelButtonText: \"Batal\",\r\n    }).then(async (result) => {\r\n      if (result.isConfirmed) {\r\n        const token = localStorage.getItem(\"token\");\r\n        try {\r\n          const response = await fetch(`${API_BASE_URL}/announcements/${id}`, {\r\n            method: \"DELETE\",\r\n            headers: { Authorization: `Bearer ${token}` },\r\n          });\r\n          const resJson = await response.json();\r\n          if (!response.ok) throw new Error(resJson.message);\r\n\r\n          toast.success(resJson.message);\r\n          fetchPengumuman();\r\n        } catch (err) {\r\n          toast.error(err.message);\r\n        }\r\n      }\r\n    });\r\n  };\r\n\r\n  const formatDate = (dateString) => {\r\n    if (!dateString) return \"-\";\r\n    return new Date(dateString).toLocaleDateString(\"id-ID\", {\r\n      day: \"2-digit\",\r\n      month: \"long\",\r\n      year: \"numeric\",\r\n    });\r\n  };\r\n\r\n  // Helper ini akan digunakan untuk memberi warna pada badge status\r\n  const getStatusClass = (status) => {\r\n    if (!status) return \"\";\r\n    return `status-${status.toLowerCase().replace(/\\s+/g, \"-\")}`;\r\n  };\r\n\r\n  return (\r\n    <div className=\"pengumuman-management-page\">\r\n      <ToastContainer\r\n        position=\"top-right\"\r\n        autoClose={3000}\r\n        hideProgressBar={false}\r\n      />\r\n      <PageHeader\r\n        title=\"Manajemen Pengumuman\"\r\n        addLabel=\"Buat Pengumuman Baru\"\r\n        onAddClick={handleAddPengumuman}\r\n      >\r\n        <div className=\"toolbar\">\r\n          <div className=\"search-container\">\r\n            <i className=\"bi bi-search\"></i>\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"Cari judul atau penulis...\"\r\n              value={searchTerm}\r\n              onChange={(e) => setSearchTerm(e.target.value)}\r\n            />\r\n          </div>\r\n\r\n          {/* [3. DITAMBAHKAN] Elemen dropdown untuk filter status */}\r\n          <div className=\"filter-container\">\r\n            <select\r\n              value={statusFilter}\r\n              onChange={(e) => setStatusFilter(e.target.value)}\r\n            >\r\n              <option value=\"Semua\">Semua Status</option>\r\n              <option value=\"Draft\">Draft</option>\r\n              <option value=\"Dijadwalkan\">Dijadwalkan</option>\r\n              <option value=\"Sedang Berlangsung\">Sedang Berlangsung</option>\r\n              <option value=\"Kadaluarsa\">Kadaluarsa</option>\r\n            </select>\r\n          </div>\r\n        </div>\r\n      </PageHeader>\r\n\r\n      <div className=\"table-container\">\r\n        <table className=\"data-table\">\r\n          <thead>\r\n            <tr>\r\n              <th style={{ width: \"25%\" }}>\r\n                <div className=\"header-cell-content\">\r\n                  <span>Judul Pengumuman</span>\r\n                </div>\r\n              </th>\r\n              <th style={{ width: \"12%\" }}>\r\n                <div className=\"header-cell-content\">\r\n                  <span>Status</span>\r\n                </div>\r\n              </th>\r\n              <th style={{ width: \"15%\" }}>\r\n                <div className=\"header-cell-content\">\r\n                  <span>Target</span>\r\n                </div>\r\n              </th>\r\n              <th style={{ width: \"15%\" }}>\r\n                <div className=\"header-cell-content\">\r\n                  <span>Penulis</span>\r\n                </div>\r\n              </th>\r\n              <th style={{ width: \"18%\" }}>\r\n                <div className=\"header-cell-content\">\r\n                  <span>Periode Aktif</span>\r\n                </div>\r\n              </th>\r\n              <th style={{ width: \"15%\" }}>Aksi</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {isLoading ? (\r\n              <tr>\r\n                <td colSpan=\"6\" className=\"text-center\">\r\n                  Memuat data...\r\n                </td>\r\n              </tr>\r\n            ) : filteredPengumuman.length > 0 ? (\r\n              filteredPengumuman.map((item) => (\r\n                <tr key={item.id_pengumuman}>\r\n                  <td className=\"pengumuman-judul\">{item.judul}</td>\r\n                  <td>\r\n                    {/* Menggunakan displayStatus dari backend */}\r\n                    <span\r\n                      className={`status-badge ${getStatusClass(\r\n                        item.displayStatus\r\n                      )}`}\r\n                    >\r\n                      {item.displayStatus}\r\n                    </span>\r\n                  </td>\r\n                  <td>{item.target}</td>\r\n                  <td>{item.penulis || \"N/A\"}</td>\r\n                  <td>\r\n                    {`${formatDate(item.berlaku_mulai)} - ${formatDate(\r\n                      item.berlaku_sampai\r\n                    )}`}\r\n                  </td>\r\n                  <td>\r\n                    <div className=\"action-buttons\">\r\n                      <button\r\n                        className=\"action-btn btn-edit\"\r\n                        onClick={() => handleEditPengumuman(item.id_pengumuman)}\r\n                      >\r\n                        <i className=\"bi bi-pencil-fill\"></i>\r\n                      </button>\r\n                      <button\r\n                        className=\"action-btn btn-delete\"\r\n                        onClick={() =>\r\n                          handleDeletePengumuman(item.id_pengumuman, item.judul)\r\n                        }\r\n                      >\r\n                        <i className=\"bi bi-trash-fill\"></i>\r\n                      </button>\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n              ))\r\n            ) : (\r\n              <tr>\r\n                <td colSpan=\"6\" className=\"text-center\">\r\n                  Belum ada pengumuman.\r\n                </td>\r\n              </tr>\r\n            )}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default KelolaPengumuman;\r\n"],"names":["_ref","title","onAddClick","addLabel","addIcon","_jsx","className","children","_jsxs","onClick","API_BASE_URL","navigate","useNavigate","pengumumanList","setPengumumanList","useState","isLoading","setIsLoading","searchTerm","setSearchTerm","statusFilter","setStatusFilter","fetchPengumuman","useCallback","async","token","localStorage","getItem","response","fetch","concat","headers","Authorization","ok","Error","data","json","error","toast","message","useEffect","filteredPengumuman","useMemo","filtered","filter","p","displayStatus","judul","toLowerCase","includes","penulis","formatDate","dateString","Date","toLocaleDateString","day","month","year","ToastContainer","position","autoClose","hideProgressBar","PageHeader","handleAddPengumuman","type","placeholder","value","onChange","e","target","style","width","colSpan","length","map","item","status","replace","berlaku_mulai","berlaku_sampai","handleEditPengumuman","id","id_pengumuman","handleDeletePengumuman","Swal","text","icon","showCancelButton","confirmButtonColor","cancelButtonColor","confirmButtonText","cancelButtonText","then","result","isConfirmed","method","resJson","success","err"],"sourceRoot":""}