"use strict";(self.webpackChunkspk_gunung=self.webpackChunkspk_gunung||[]).push([[421],{698:(e,a,t)=>{t.d(a,{A:()=>n});t(5043);var s=t(579);const n=e=>{let{title:a,onAddClick:t,addLabel:n="Tambah",addIcon:i=(0,s.jsx)("i",{className:"bi bi-plus-lg"}),children:l}=e;return(0,s.jsxs)("div",{className:"controls-container",children:[(0,s.jsxs)("div",{className:"header-row",children:[(0,s.jsx)("h1",{className:"page-title",children:a}),t&&(0,s.jsxs)("button",{className:"btn-add-new",onClick:t,children:[i," ",n]})]}),l]})}},2062:(e,a,t)=>{t.d(a,{A:()=>n});t(5043);var s=t(579);const n=e=>{let{currentPage:a,totalPages:t,itemsPerPage:n,totalItems:i,onPageChange:l,onItemsPerPageChange:r,indexOfFirstItem:c,currentItemsLength:d}=e;const o=e=>{e>0&&e<=t&&l(e)};return(0,s.jsxs)("div",{className:"pagination",children:[(0,s.jsxs)("div",{className:"pagination-info",children:[(0,s.jsx)("span",{children:"Baris per halaman:"}),(0,s.jsxs)("select",{value:n,onChange:e=>{r(parseInt(e.target.value,10))},className:"items-per-page-select",children:[(0,s.jsx)("option",{value:5,children:"5"}),(0,s.jsx)("option",{value:10,children:"10"}),(0,s.jsx)("option",{value:20,children:"20"}),(0,s.jsx)("option",{value:50,children:"50"}),(0,s.jsx)("option",{value:100,children:"100"})]}),(0,s.jsxs)("span",{style:{marginLeft:"15px"},children:["Menampilkan ",d>0?c+1:0,"-",c+d," dari ",i," data"]})]}),(0,s.jsxs)("div",{className:"pagination-controls",children:[(0,s.jsx)("button",{onClick:()=>o(a-1),disabled:1===a,children:"Sebelumnya"}),(0,s.jsxs)("span",{children:["Halaman ",a," dari ",t||1]}),(0,s.jsx)("button",{onClick:()=>o(a+1),disabled:a===t||0===t,children:"Selanjutnya"})]})]})}},4637:(e,a,t)=>{t.r(a),t.d(a,{default:()=>h});var s=t(5043),n=t(1283),i=t(7488),l=(t(2342),t(5071)),r=(t(9645),t(2062)),c=t(579);const d=e=>{let{searchTerm:a,setSearchTerm:t,setCurrentPage:s}=e;return(0,c.jsx)("div",{className:"toolbar",children:(0,c.jsx)("div",{className:"search-container",children:(0,c.jsxs)("div",{className:"input-wrapper-icon",children:[(0,c.jsx)("i",{className:"bi bi-search"}),(0,c.jsx)("input",{type:"text",placeholder:"Cari artikel (judul, kategori, penulis)...",value:a,onChange:e=>{t(e.target.value),s(1)}})]})})})},o="http://localhost:5000/api/admin";const h=function(){const e=(0,n.Zp)(),[a,t]=(0,s.useState)([]),[h,u]=(0,s.useState)(!0),[j,m]=(0,s.useState)(""),[x,g]=(0,s.useState)(1),[p,k]=(0,s.useState)(8);(0,s.useEffect)(()=>{(async()=>{u(!0);try{const a=localStorage.getItem("token");if(!a)return i.oR.warn("Anda harus login untuk mengakses data ini."),u(!1),void e("/login");const s=await fetch("".concat(o,"/articles"),{headers:{Authorization:"Bearer ".concat(a)}});if(!s.ok)throw new Error("Gagal mengambil data artikel.");const n=await s.json();t(n)}catch(a){i.oR.error(a.message)}finally{u(!1)}})()},[e]);const b=(0,s.useMemo)(()=>a&&0!==a.length?a.filter(e=>e.judul.toLowerCase().includes(j.toLowerCase())||e.kategori.toLowerCase().includes(j.toLowerCase())||e.penulis&&e.penulis.toLowerCase().includes(j.toLowerCase())):[],[a,j]),v=x*p,N=v-p,w=b.slice(N,v),C=Math.ceil(b.length/p),f=e=>{if(!e)return"-";return new Date(e).toLocaleDateString("id-ID",{day:"2-digit",month:"short",year:"numeric"})},y=e=>({Published:"Dipublikasikan",Draft:"Draft",Archived:"Diarsipkan"}[e]||e);return(0,c.jsxs)("div",{className:"artikel-management-page",children:[(0,c.jsx)(i.N9,{position:"top-right",autoClose:3e3,hideProgressBar:!1}),(0,c.jsx)(l.zY,{title:"Manajemen Artikel",addLabel:"Tulis Artikel Baru",onAddClick:()=>e("/admin/articles/new")}),(0,c.jsx)(d,{searchTerm:j,setSearchTerm:m,setCurrentPage:g}),(0,c.jsx)("div",{className:"table-container",children:(0,c.jsxs)("table",{className:"data-table",children:[(0,c.jsx)("thead",{children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{style:{width:"30%"},children:(0,c.jsx)("div",{className:"header-cell-content",children:(0,c.jsx)("span",{children:"Judul Artikel"})})}),(0,c.jsx)("th",{style:{width:"15%"},children:(0,c.jsx)("div",{className:"header-cell-content",children:(0,c.jsx)("span",{children:"Kategori"})})}),(0,c.jsx)("th",{style:{width:"15%"},children:(0,c.jsx)("div",{className:"header-cell-content",children:(0,c.jsx)("span",{children:"Penulis"})})}),(0,c.jsx)("th",{style:{width:"12%"},children:(0,c.jsx)("div",{className:"header-cell-content",children:(0,c.jsx)("span",{children:"Status"})})}),(0,c.jsx)("th",{style:{width:"18%"},children:(0,c.jsx)("div",{className:"header-cell-content",children:(0,c.jsx)("span",{children:"Terakhir Diperbarui"})})}),(0,c.jsx)("th",{style:{width:"10%"},children:"Aksi"})]})}),(0,c.jsx)("tbody",{children:h?(0,c.jsx)("tr",{children:(0,c.jsx)("td",{colSpan:"6",className:"text-center",children:"Memuat data..."})}):w.length>0?w.map(a=>(0,c.jsxs)("tr",{children:[(0,c.jsx)("td",{className:"artikel-judul",children:a.judul}),(0,c.jsx)("td",{children:a.kategori}),(0,c.jsx)("td",{children:a.penulis||"N/A"}),(0,c.jsx)("td",{children:(0,c.jsx)("span",{className:"status-badge status-".concat(y(a.status).toLowerCase().replace(/\s+/g,"-")),children:y(a.status)})}),(0,c.jsx)("td",{children:f(a.updated_at)}),(0,c.jsx)("td",{children:(0,c.jsxs)("div",{className:"action-buttons",children:[(0,c.jsx)("button",{title:"Edit",className:"action-btn btn-edit",onClick:()=>{return t=a.id_artikel,e("/admin/articles/edit/".concat(t));var t},children:(0,c.jsx)("i",{className:"bi bi-pencil-fill"})}),(0,c.jsx)("button",{title:"Hapus",className:"action-btn btn-delete",onClick:()=>(async(e,a)=>{if(window.confirm('Apakah Anda yakin ingin menghapus artikel "'.concat(a,'"?')))try{const s=localStorage.getItem("token");if(!(await fetch("".concat(o,"/articles/").concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(s)}})).ok)throw new Error("Gagal menghapus artikel.");t(a=>a.filter(a=>a.id_artikel!==e)),i.oR.success('Artikel "'.concat(a,'" berhasil dihapus.'))}catch(s){i.oR.error(s.message)}})(a.id_artikel,a.judul),children:(0,c.jsx)("i",{className:"bi bi-trash-fill"})})]})})]},a.id_artikel)):(0,c.jsx)("tr",{children:(0,c.jsx)("td",{colSpan:"6",className:"text-center",children:j?"Artikel tidak ditemukan.":"Belum ada artikel."})})})]})}),(0,c.jsx)(r.A,{currentPage:x,totalPages:C,itemsPerPage:p,totalItems:b.length,onPageChange:e=>g(e),onItemsPerPageChange:e=>{k(e),g(1)},indexOfFirstItem:N,currentItemsLength:w.length})]})}},5071:(e,a,t)=>{t.d(a,{zY:()=>s.A});var s=t(698);t(5043),t(579)},9645:()=>{}}]);
//# sourceMappingURL=421.b50632ce.chunk.js.map