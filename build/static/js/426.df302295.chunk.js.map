{"version":3,"file":"static/js/426.df302295.chunk.js","mappings":"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","sources":["components/common/TipTapEditor.js","pages/admin/pengumuman/TambahEditPengumuman.js"],"sourcesContent":["import React, { useCallback, useEffect } from \"react\";\r\nimport { useEditor, EditorContent } from \"@tiptap/react\";\r\nimport StarterKit from \"@tiptap/starter-kit\";\r\nimport Link from \"@tiptap/extension-link\";\r\nimport Swal from \"sweetalert2\"; // --- 1. IMPORT SWEETALERT2 ---\r\nimport withReactContent from \"sweetalert2-react-content\"; // Opsional, untuk integrasi lebih dalam dengan React\r\nimport \"./TipTapEditor.css\";\r\n\r\nconst MySwal = withReactContent(Swal);\r\n\r\n// Komponen untuk Toolbar/MenuBar\r\nconst MenuBar = ({ editor }) => {\r\n  // --- 2. MODIFIKASI FUNGSI SETLINK ---\r\n  const setLink = useCallback(() => {\r\n    if (!editor) {\r\n      return;\r\n    }\r\n    const previousUrl = editor.getAttributes(\"link\").href;\r\n\r\n    // Tampilkan modal SweetAlert2 untuk meminta URL\r\n    MySwal.fire({\r\n      title: \"Masukkan URL\",\r\n      input: \"url\",\r\n      inputLabel: \"Alamat URL\",\r\n      inputValue: previousUrl,\r\n      showCancelButton: true,\r\n      confirmButtonText: \"Set Link\",\r\n      cancelButtonText: \"Batal\",\r\n      confirmButtonColor: \"#27ae60\",\r\n      inputValidator: (value) => {\r\n        if (!value) {\r\n          return \"Anda perlu memasukkan URL!\";\r\n        }\r\n      },\r\n    }).then((result) => {\r\n      // Jika pengguna menekan \"Set Link\" dan memasukkan URL\r\n      if (result.isConfirmed && result.value) {\r\n        editor\r\n          .chain()\r\n          .focus()\r\n          .extendMarkRange(\"link\")\r\n          .setLink({ href: result.value })\r\n          .run();\r\n      }\r\n    });\r\n  }, [editor]);\r\n\r\n  if (!editor) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <div className=\"tiptap-menubar\">\r\n      {/* Tombol-tombol toolbar tetap sama */}\r\n      <button\r\n        type=\"button\"\r\n        onClick={() => editor.chain().focus().toggleBold().run()}\r\n        className={editor.isActive(\"bold\") ? \"is-active\" : \"\"}\r\n      >\r\n        Bold\r\n      </button>\r\n      <button\r\n        type=\"button\"\r\n        onClick={() => editor.chain().focus().toggleItalic().run()}\r\n        className={editor.isActive(\"italic\") ? \"is-active\" : \"\"}\r\n      >\r\n        Italic\r\n      </button>\r\n      <button\r\n        type=\"button\"\r\n        onClick={() => editor.chain().focus().toggleStrike().run()}\r\n        className={editor.isActive(\"strike\") ? \"is-active\" : \"\"}\r\n      >\r\n        Strike\r\n      </button>\r\n\r\n      {/* Tombol Set Link sekarang memanggil SweetAlert2 */}\r\n      <button\r\n        type=\"button\"\r\n        onClick={setLink}\r\n        className={editor.isActive(\"link\") ? \"is-active\" : \"\"}\r\n      >\r\n        Set Link\r\n      </button>\r\n\r\n      <button\r\n        type=\"button\"\r\n        onClick={() => editor.chain().focus().unsetLink().run()}\r\n        disabled={!editor.isActive(\"link\")}\r\n      >\r\n        Unset Link\r\n      </button>\r\n      <button\r\n        type=\"button\"\r\n        onClick={() => editor.chain().focus().setParagraph().run()}\r\n        className={editor.isActive(\"paragraph\") ? \"is-active\" : \"\"}\r\n      >\r\n        Paragraph\r\n      </button>\r\n      <button\r\n        type=\"button\"\r\n        onClick={() => editor.chain().focus().toggleHeading({ level: 1 }).run()}\r\n        className={editor.isActive(\"heading\", { level: 1 }) ? \"is-active\" : \"\"}\r\n      >\r\n        H1\r\n      </button>\r\n      <button\r\n        type=\"button\"\r\n        onClick={() => editor.chain().focus().toggleHeading({ level: 2 }).run()}\r\n        className={editor.isActive(\"heading\", { level: 2 }) ? \"is-active\" : \"\"}\r\n      >\r\n        H2\r\n      </button>\r\n      <button\r\n        type=\"button\"\r\n        onClick={() => editor.chain().focus().toggleBulletList().run()}\r\n        className={editor.isActive(\"bulletList\") ? \"is-active\" : \"\"}\r\n      >\r\n        Bullet List\r\n      </button>\r\n      <button\r\n        type=\"button\"\r\n        onClick={() => editor.chain().focus().toggleOrderedList().run()}\r\n        className={editor.isActive(\"orderedList\") ? \"is-active\" : \"\"}\r\n      >\r\n        Ordered List\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n\r\n// Komponen Utama Editor\r\nconst TipTapEditor = ({ content, onContentChange }) => {\r\n  const editor = useEditor({\r\n    extensions: [\r\n      StarterKit,\r\n      Link.configure({\r\n        autolink: true,\r\n        openOnClick: false,\r\n        linkOnPaste: true,\r\n      }),\r\n    ],\r\n    content: content,\r\n    onUpdate: ({ editor }) => {\r\n      onContentChange(editor.getHTML());\r\n    },\r\n    editorProps: {\r\n      attributes: {\r\n        class: \"tiptap-prose\",\r\n      },\r\n    },\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (editor && content !== editor.getHTML()) {\r\n      editor.commands.setContent(content, false);\r\n    }\r\n  }, [content, editor]);\r\n\r\n  return (\r\n    <div className=\"tiptap-container\">\r\n      <MenuBar editor={editor} />\r\n      <EditorContent editor={editor} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TipTapEditor;\r\n","// src/pages/admin/pengumuman/TambahEditPengumuman.js\r\n\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { useNavigate, Link, useParams } from \"react-router-dom\";\r\nimport { ToastContainer, toast } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\nimport \"./TambahEditPengumuman.css\";\r\n\r\n// --- 1. IMPORT EDITOR ---\r\n// Pastikan path ini benar sesuai dengan struktur folder proyek Anda\r\nimport TipTapEditor from \"../../../components/common/TipTapEditor\";\r\n\r\nconst API_BASE_URL = \"http://localhost:5000/api/admin\";\r\n\r\nfunction TambahEditPengumuman() {\r\n  const navigate = useNavigate();\r\n  const { id_pengumuman } = useParams();\r\n  const isEditMode = Boolean(id_pengumuman);\r\n\r\n  const [gunungList, setGunungList] = useState([]);\r\n  const [jalurList, setJalurList] = useState([]);\r\n  const [targetType, setTargetType] = useState(\"umum\");\r\n\r\n  const [formData, setFormData] = useState({\r\n    judul: \"\",\r\n    isi_pengumuman: \"\", // Ini akan diisi oleh TipTap\r\n    id_gunung: \"\",\r\n    id_jalur: \"\",\r\n    berlaku_mulai: \"\",\r\n    berlaku_sampai: \"\",\r\n    status: \"Draft\",\r\n  });\r\n  const [isLoading, setIsLoading] = useState(false);\r\n\r\n  // Fetch daftar gunung dan jalur untuk dropdown\r\n  useEffect(() => {\r\n    const fetchDropdownData = async () => {\r\n      const token = localStorage.getItem(\"token\");\r\n      try {\r\n        const [gunungRes, jalurRes] = await Promise.all([\r\n          fetch(`${API_BASE_URL}/gunung`, {\r\n            headers: { Authorization: `Bearer ${token}` },\r\n          }),\r\n          fetch(`${API_BASE_URL}/jalur`, {\r\n            headers: { Authorization: `Bearer ${token}` },\r\n          }),\r\n        ]);\r\n        if (!gunungRes.ok || !jalurRes.ok)\r\n          throw new Error(\"Gagal memuat data relasi untuk target.\");\r\n        setGunungList(await gunungRes.json());\r\n        setJalurList(await jalurRes.json());\r\n      } catch (error) {\r\n        toast.error(error.message);\r\n      }\r\n    };\r\n    fetchDropdownData();\r\n  }, []);\r\n\r\n  // Fetch data pengumuman jika dalam mode edit\r\n  useEffect(() => {\r\n    if (!isEditMode) return;\r\n\r\n    const fetchPengumumanById = async () => {\r\n      setIsLoading(true);\r\n      try {\r\n        const token = localStorage.getItem(\"token\");\r\n        const response = await fetch(\r\n          `${API_BASE_URL}/announcements/${id_pengumuman}`,\r\n          {\r\n            headers: { Authorization: `Bearer ${token}` },\r\n          }\r\n        );\r\n        if (!response.ok) throw new Error(\"Pengumuman tidak ditemukan.\");\r\n        const data = await response.json();\r\n\r\n        const formatDateForInput = (dateStr) =>\r\n          dateStr ? new Date(dateStr).toISOString().split(\"T\")[0] : \"\";\r\n\r\n        setFormData({\r\n          judul: data.judul,\r\n          isi_pengumuman: data.isi_pengumuman,\r\n          id_gunung: data.id_gunung || \"\",\r\n          id_jalur: data.id_jalur || \"\",\r\n          berlaku_mulai: formatDateForInput(data.berlaku_mulai),\r\n          berlaku_sampai: formatDateForInput(data.berlaku_sampai),\r\n          status: data.status || \"Draft\",\r\n        });\r\n\r\n        if (data.id_jalur) {\r\n          setTargetType(\"jalur\");\r\n        } else if (data.id_gunung) {\r\n          setTargetType(\"gunung\");\r\n        } else {\r\n          setTargetType(\"umum\");\r\n        }\r\n      } catch (err) {\r\n        toast.error(err.message);\r\n        navigate(\"/admin/announcements\");\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    };\r\n    fetchPengumumanById();\r\n  }, [id_pengumuman, isEditMode, navigate]);\r\n\r\n  const handleChange = (e) => {\r\n    setFormData((prev) => ({ ...prev, [e.target.name]: e.target.value }));\r\n  };\r\n\r\n  // --- 2. TAMBAHKAN HANDLER BARU ---\r\n  // Fungsi ini khusus untuk menerima update konten dari TipTapEditor\r\n  const handleKontenChange = (newContent) => {\r\n    setFormData((prev) => ({ ...prev, isi_pengumuman: newContent }));\r\n  };\r\n\r\n  const handleTargetChange = (e) => {\r\n    const newTargetType = e.target.value;\r\n    setTargetType(newTargetType);\r\n    if (newTargetType === \"umum\") {\r\n      setFormData((prev) => ({ ...prev, id_gunung: \"\", id_jalur: \"\" }));\r\n    } else if (newTargetType === \"gunung\") {\r\n      setFormData((prev) => ({ ...prev, id_jalur: \"\" }));\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    if (!formData.judul || !formData.isi_pengumuman) {\r\n      toast.warn(\"Judul dan Isi Pengumuman wajib diisi.\");\r\n      return;\r\n    }\r\n    if (\r\n      formData.status === \"Published\" &&\r\n      (!formData.berlaku_mulai || !formData.berlaku_sampai)\r\n    ) {\r\n      toast.warn(\"Untuk status 'Published', rentang tanggal wajib diisi.\");\r\n      return;\r\n    }\r\n    setIsLoading(true);\r\n    const token = localStorage.getItem(\"token\");\r\n    const url = isEditMode\r\n      ? `${API_BASE_URL}/announcements/${id_pengumuman}`\r\n      : `${API_BASE_URL}/announcements`;\r\n    const method = isEditMode ? \"PUT\" : \"POST\";\r\n    try {\r\n      const response = await fetch(url, {\r\n        method,\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n        body: JSON.stringify(formData),\r\n      });\r\n      const resJson = await response.json();\r\n      if (!response.ok) throw new Error(resJson.message || \"Operasi gagal.\");\r\n      toast.success(resJson.message);\r\n      setTimeout(() => navigate(\"/admin/announcements\"), 1500);\r\n    } catch (err) {\r\n      toast.error(err.message);\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"add-edit-pengumuman-page\">\r\n      <ToastContainer position=\"top-right\" autoClose={3000} />\r\n      <header className=\"page-header\">\r\n        <h1>{isEditMode ? \"Edit Pengumuman\" : \"Buat Pengumuman Baru\"}</h1>\r\n        <Link to=\"/admin/announcements\" className=\"btn-back\">\r\n          <i className=\"bi bi-arrow-left\"></i> Kembali\r\n        </Link>\r\n      </header>\r\n\r\n      <form onSubmit={handleSubmit} className=\"form-widget-pengumuman\">\r\n        <div className=\"form-group\">\r\n          <label htmlFor=\"judul\">Judul Pengumuman</label>\r\n          <input\r\n            type=\"text\"\r\n            id=\"judul\"\r\n            name=\"judul\"\r\n            value={formData.judul}\r\n            onChange={handleChange}\r\n            required\r\n            disabled={isLoading}\r\n            placeholder=\"cth: Penutupan Jalur Cemoro Sewu\"\r\n          />\r\n        </div>\r\n        <div className=\"form-group\">\r\n          <label htmlFor=\"isi_pengumuman\">Isi Pengumuman</label>\r\n          {/* --- 3. GANTI TEXTAREA DENGAN TIPTAPEDITOR --- */}\r\n          <TipTapEditor\r\n            content={formData.isi_pengumuman}\r\n            onContentChange={handleKontenChange}\r\n          />\r\n        </div>\r\n\r\n        <div className=\"form-group\">\r\n          <label htmlFor=\"status\">Status</label>\r\n          <select\r\n            id=\"status\"\r\n            name=\"status\"\r\n            value={formData.status}\r\n            onChange={handleChange}\r\n            disabled={isLoading}\r\n          >\r\n            <option value=\"Draft\">Draft (Simpan sebagai draf)</option>\r\n            <option value=\"Published\">Published (Publikasikan)</option>\r\n          </select>\r\n        </div>\r\n        <div className=\"form-row\">\r\n          <div className=\"form-group\">\r\n            <label>Target Pengumuman</label>\r\n            <select\r\n              value={targetType}\r\n              onChange={handleTargetChange}\r\n              disabled={isLoading}\r\n            >\r\n              <option value=\"umum\">Umum (Semua Pengguna)</option>\r\n              <option value=\"gunung\">Spesifik Gunung</option>\r\n              <option value=\"jalur\">Spesifik Jalur</option>\r\n            </select>\r\n          </div>\r\n          {targetType === \"gunung\" && (\r\n            <div className=\"form-group\">\r\n              <label htmlFor=\"id_gunung\">Pilih Gunung</label>\r\n              <select\r\n                id=\"id_gunung\"\r\n                name=\"id_gunung\"\r\n                value={formData.id_gunung}\r\n                onChange={handleChange}\r\n                disabled={isLoading}\r\n              >\r\n                <option value=\"\">-- Pilih Gunung --</option>\r\n                {gunungList.map((g) => (\r\n                  <option key={g.id_gunung} value={g.id_gunung}>\r\n                    {g.nama_gunung}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n          )}\r\n          {targetType === \"jalur\" && (\r\n            <div className=\"form-group\">\r\n              <label htmlFor=\"id_jalur\">Pilih Jalur</label>\r\n              <select\r\n                id=\"id_jalur\"\r\n                name=\"id_jalur\"\r\n                value={formData.id_jalur}\r\n                onChange={handleChange}\r\n                disabled={isLoading}\r\n              >\r\n                <option value=\"\">-- Pilih Jalur --</option>\r\n                {jalurList.map((j) => (\r\n                  <option key={j.id_jalur} value={j.id_jalur}>\r\n                    {j.nama_jalur} ({j.nama_gunung})\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n          )}\r\n        </div>\r\n        <div className=\"form-row\">\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"berlaku_mulai\">Berlaku Mulai</label>\r\n            <input\r\n              type=\"date\"\r\n              id=\"berlaku_mulai\"\r\n              name=\"berlaku_mulai\"\r\n              value={formData.berlaku_mulai}\r\n              onChange={handleChange}\r\n              disabled={isLoading}\r\n            />\r\n          </div>\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"berlaku_sampai\">Berlaku Sampai</label>\r\n            <input\r\n              type=\"date\"\r\n              id=\"berlaku_sampai\"\r\n              name=\"berlaku_sampai\"\r\n              value={formData.berlaku_sampai}\r\n              onChange={handleChange}\r\n              disabled={isLoading}\r\n            />\r\n          </div>\r\n        </div>\r\n        <div className=\"form-actions\">\r\n          <button\r\n            type=\"button\"\r\n            className=\"btn-cancel\"\r\n            onClick={() => navigate(\"/admin/announcements\")}\r\n            disabled={isLoading}\r\n          >\r\n            Batal\r\n          </button>\r\n          <button type=\"submit\" className=\"btn-save\" disabled={isLoading}>\r\n            {isLoading ? \"Menyimpan...\" : \"Simpan Pengumuman\"}\r\n          </button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default TambahEditPengumuman;\r\n"],"names":["MySwal","withReactContent","Swal","MenuBar","_ref","editor","setLink","useCallback","previousUrl","getAttributes","href","fire","title","input","inputLabel","inputValue","showCancelButton","confirmButtonText","cancelButtonText","confirmButtonColor","inputValidator","value","then","result","isConfirmed","chain","focus","extendMarkRange","run","_jsxs","className","children","_jsx","type","onClick","toggleBold","isActive","toggleItalic","toggleStrike","unsetLink","disabled","setParagraph","toggleHeading","level","toggleBulletList","toggleOrderedList","_ref2","content","onContentChange","useEditor","extensions","StarterKit","Link","configure","autolink","openOnClick","linkOnPaste","onUpdate","_ref3","getHTML","editorProps","attributes","class","useEffect","commands","setContent","EditorContent","API_BASE_URL","navigate","useNavigate","id_pengumuman","useParams","isEditMode","Boolean","gunungList","setGunungList","useState","jalurList","setJalurList","targetType","setTargetType","formData","setFormData","judul","isi_pengumuman","id_gunung","id_jalur","berlaku_mulai","berlaku_sampai","status","isLoading","setIsLoading","async","token","localStorage","getItem","gunungRes","jalurRes","Promise","all","fetch","concat","headers","Authorization","ok","Error","json","error","toast","message","fetchDropdownData","response","data","formatDateForInput","dateStr","Date","toISOString","split","err","fetchPengumumanById","handleChange","e","prev","_objectSpread","target","name","ToastContainer","position","autoClose","to","onSubmit","preventDefault","warn","url","method","body","JSON","stringify","resJson","success","setTimeout","htmlFor","id","onChange","required","placeholder","TipTapEditor","newContent","newTargetType","map","g","nama_gunung","j","nama_jalur"],"sourceRoot":""}