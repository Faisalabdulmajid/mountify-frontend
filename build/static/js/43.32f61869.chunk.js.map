{"version":3,"file":"static/js/43.32f61869.chunk.js","mappings":"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","sources":["utils/sanitizeHtml.js","pages/public/Pengumuman/HalamanSemuaPengumuman.js"],"sourcesContent":["// src/utils/sanitizeHtml.js\r\nimport DOMPurify from \"dompurify\";\r\n\r\nexport default function sanitizeHtml(dirty) {\r\n  return DOMPurify.sanitize(dirty, {\r\n    ALLOWED_TAGS: [\r\n      \"b\",\r\n      \"i\",\r\n      \"em\",\r\n      \"strong\",\r\n      \"p\",\r\n      \"ul\",\r\n      \"ol\",\r\n      \"li\",\r\n      \"br\",\r\n      \"h1\",\r\n      \"h2\",\r\n      \"h3\",\r\n      \"h4\",\r\n      \"h5\",\r\n      \"h6\",\r\n      \"blockquote\",\r\n      \"pre\",\r\n      \"code\",\r\n      \"hr\",\r\n      \"a\", // izinkan tag a\r\n    ],\r\n    ALLOWED_ATTR: [\"alt\", \"title\", \"href\", \"target\", \"rel\"], // izinkan atribut penting untuk <a>\r\n    ALLOWED_URI_REGEXP: /^https?:\\/\\/[^\\s<>\"]+$/,\r\n    FORBID_ATTR: [\"style\", \"class\", \"id\", \"onclick\", \"onerror\"],\r\n    FORBID_TAGS: [\r\n      \"script\",\r\n      \"object\",\r\n      \"embed\",\r\n      \"iframe\",\r\n      \"form\",\r\n      \"input\",\r\n      \"img\",\r\n      // \"a\", // jangan blokir tag a\r\n    ],\r\n    KEEP_CONTENT: false,\r\n    ALLOW_DATA_ATTR: false,\r\n  });\r\n}\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport sanitizeHtml from \"../../../utils/sanitizeHtml\";\r\n\r\n// Menambahkan CSS khusus untuk halaman ini\r\nimport \"./HalamanSemuaPengumuman.css\";\r\n\r\n// Helper function untuk menentukan style & ikon tag\r\nconst getTagInfo = (target) => {\r\n  if (!target || target.toLowerCase() === \"umum\") {\r\n    return { className: \"tag-umum\", icon: \"bi bi-info-circle-fill\" };\r\n  }\r\n  if (target.toLowerCase().includes(\"gunung\")) {\r\n    return { className: \"tag-gunung\", icon: \"bi bi-image-alt\" }; // Menggunakan ikon gunung dari Bootstrap Icons\r\n  }\r\n  return { className: \"tag-jalur\", icon: \"bi bi-signpost-split-fill\" };\r\n};\r\n\r\nfunction HalamanSemuaPengumuman() {\r\n  const [pengumuman, setPengumuman] = useState([]);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const fetchSemuaPengumuman = async () => {\r\n      setIsLoading(true);\r\n      setError(null);\r\n      try {\r\n        const response = await fetch(\r\n          \"http://localhost:5000/api/public/pengumuman\"\r\n        );\r\n        if (!response.ok) {\r\n          throw new Error(\"Gagal mengambil data pengumuman dari server.\");\r\n        }\r\n        const data = await response.json();\r\n        setPengumuman(data);\r\n      } catch (err) {\r\n        setError(err.message);\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchSemuaPengumuman();\r\n  }, []);\r\n\r\n  const formatDisplayDate = (isoDateString) => {\r\n    if (!isoDateString) return \"\";\r\n    const date = new Date(isoDateString);\r\n    return date.toLocaleDateString(\"id-ID\", {\r\n      day: \"numeric\",\r\n      month: \"long\",\r\n      year: \"numeric\",\r\n    });\r\n  };\r\n\r\n  const renderContent = () => {\r\n    if (isLoading) {\r\n      return <div className=\"loading-message\">Memuat pengumuman...</div>;\r\n    }\r\n    if (error) {\r\n      return <div className=\"error-message\">Error: {error}</div>;\r\n    }\r\n    if (pengumuman.length === 0) {\r\n      return (\r\n        <div className=\"no-data-message\">Saat ini tidak ada pengumuman.</div>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <div className=\"arsip-container\">\r\n        {pengumuman.map((item) => {\r\n          const tag = getTagInfo(item.target);\r\n          return (\r\n            <div key={item.id_pengumuman} className=\"arsip-card\">\r\n              <div className=\"card-header\">\r\n                <span className={`card-tag ${tag.className}`}>\r\n                  <i className={tag.icon}></i> {item.target || \"Umum\"}\r\n                </span>\r\n              </div>\r\n              <div className=\"card-body\">\r\n                <h2 className=\"card-title\">\r\n                  <Link to={`/pengumuman/${item.id_pengumuman}`}>\r\n                    {item.judul}\r\n                  </Link>\r\n                </h2>\r\n                <div className=\"card-meta\">\r\n                  <i className=\"bi bi-calendar-event\"></i>\r\n                  <span>\r\n                    Dipublikasikan pada{\" \"}\r\n                    {formatDisplayDate(item.tanggal_publikasi)}\r\n                  </span>\r\n                </div>\r\n\r\n                {/* === PERUBAHAN UTAMA ADA DI SINI === */}\r\n                <div\r\n                  className=\"card-summary\"\r\n                  dangerouslySetInnerHTML={{\r\n                    __html: sanitizeHtml(item.ringkasan),\r\n                  }}\r\n                />\r\n                {/* ===================================== */}\r\n              </div>\r\n              <div className=\"card-footer\">\r\n                <Link\r\n                  to={`/pengumuman/${item.id_pengumuman}`}\r\n                  className=\"selengkapnya-button\"\r\n                >\r\n                  Baca Selengkapnya\r\n                </Link>\r\n              </div>\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <section className=\"halaman-arsip-section\">\r\n      <div className=\"container\">\r\n        <div className=\"page-header\">\r\n          <h1 className=\"page-title\">\r\n            <i className=\"bi bi-megaphone-fill\"></i> Arsip Pengumuman\r\n          </h1>\r\n          <p className=\"page-description\">\r\n            Temukan semua informasi dan pengumuman penting dari kami yang telah\r\n            dipublikasikan.\r\n          </p>\r\n        </div>\r\n        {renderContent()}\r\n      </div>\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default HalamanSemuaPengumuman;\r\n"],"names":["sanitizeHtml","dirty","DOMPurify","sanitize","ALLOWED_TAGS","ALLOWED_ATTR","ALLOWED_URI_REGEXP","FORBID_ATTR","FORBID_TAGS","KEEP_CONTENT","ALLOW_DATA_ATTR","pengumuman","setPengumuman","useState","isLoading","setIsLoading","error","setError","useEffect","async","response","fetch","ok","Error","data","json","err","message","fetchSemuaPengumuman","formatDisplayDate","isoDateString","Date","toLocaleDateString","day","month","year","_jsx","className","children","_jsxs","length","map","item","tag","target","toLowerCase","includes","icon","concat","Link","to","id_pengumuman","judul","tanggal_publikasi","dangerouslySetInnerHTML","__html","ringkasan"],"sourceRoot":""}