"use strict";(self.webpackChunkspk_gunung=self.webpackChunkspk_gunung||[]).push([[438],{2438:(e,a,n)=>{n.r(a),n.d(a,{default:()=>r});var s=n(5043),c=n(1283),l=n(894),i=(n(8506),n(579));const r=function(){const[e,a]=(0,s.useState)([]),[n,r]=(0,s.useState)(!0),[m,t]=(0,s.useState)(null);(0,s.useEffect)(()=>{(async()=>{r(!0),t(null);try{const e=await fetch("http://localhost:5000/api/public/pengumuman/terbaru");if(!e.ok)throw new Error("Gagal mengambil data pengumuman terbaru dari server.");const n=await e.json();console.log("Data pengumuman (full):",JSON.stringify(n,null,2)),a(n)}catch(e){console.error("Gagal memuat pengumuman terbaru:",e.message),t(e.message)}finally{r(!1)}})()},[]);const u=e=>{if(!e)return"";return new Date(e).toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"})},d=e=>{if(e.ringkasan)return e.ringkasan;if(e.isi_pengumuman){const a=e.isi_pengumuman.replace(/<[^>]+>/g,"");return a.length>200?a.slice(0,200)+"...":a}return""};return n?(0,i.jsx)("section",{className:"home-section pengumuman-terbaru-section",children:(0,i.jsxs)("div",{className:"home-section-container",children:[(0,i.jsxs)("h2",{className:"section-title",children:[(0,i.jsx)("i",{className:"bi bi-megaphone-fill"})," Pengumuman Terbaru"]}),(0,i.jsx)("div",{className:"card-grid",children:[...Array(3)].map((e,a)=>(0,i.jsx)("div",{className:"card-base pengumuman-card is-loading",children:(0,i.jsxs)("div",{className:"pengumuman-card-content",children:[(0,i.jsx)("div",{className:"placeholder-line title"}),(0,i.jsx)("div",{className:"placeholder-line date"}),(0,i.jsx)("div",{className:"placeholder-line text"}),(0,i.jsx)("div",{className:"placeholder-line text short"})]})},a))})]})}):m||0===e.length?null:(0,i.jsx)("section",{className:"home-section pengumuman-terbaru-section",children:(0,i.jsxs)("div",{className:"home-section-container",children:[(0,i.jsxs)("h2",{className:"section-title",children:[(0,i.jsx)("i",{className:"bi bi-megaphone-fill"})," Pengumuman Terbaru"]}),(0,i.jsx)("div",{className:"card-grid",children:e.map(e=>(0,i.jsxs)(c.N_,{to:"/pengumuman/".concat(e.id_pengumuman),className:"card-base pengumuman-card",children:[(0,i.jsxs)("div",{className:"pengumuman-card-content",children:[(0,i.jsx)("h3",{className:"pengumuman-card-title",children:e.judul}),(0,i.jsx)("p",{className:"pengumuman-card-date",children:u(e.tanggal_publikasi)}),(0,i.jsx)("div",{className:"pengumuman-card-summary",dangerouslySetInnerHTML:{__html:d(e)}})]}),(0,i.jsx)("span",{className:"pengumuman-selengkapnya",children:"Selengkapnya \u2192"})]},e.id_pengumuman))}),(0,i.jsx)("div",{className:"section-cta-container",children:(0,i.jsx)(l.A,{to:"/pengumuman",variant:"secondary",children:"Lihat Semua Pengumuman"})})]})})}},8506:()=>{}}]);
//# sourceMappingURL=438.ea51ad74.chunk.js.map