{"version":3,"file":"static/js/438.ea51ad74.chunk.js","mappings":"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","sources":["components/home/PengumumanTerbaruSection.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\n// REVISI: Impor komponen Button dan file CSS umum\r\nimport Button from \"../common/Button/Button\";\r\nimport \"./HomePageSections.css\";\r\nimport \"./PengumumanTerbaruSection.css\";\r\n\r\nfunction PengumumanTerbaruSection() {\r\n  const [pengumuman, setPengumuman] = useState([]);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n\r\n  useEffect(() => {\r\n    // --- MENGAMBIL DATA ASLI DARI DATABASE ---\r\n    const fetchPengumumanTerbaru = async () => {\r\n      setIsLoading(true);\r\n      setError(null);\r\n      try {\r\n        const response = await fetch(\r\n          \"http://localhost:5000/api/public/pengumuman/terbaru\"\r\n        );\r\n\r\n        if (!response.ok) {\r\n          throw new Error(\r\n            \"Gagal mengambil data pengumuman terbaru dari server.\"\r\n          );\r\n        }\r\n\r\n        const data = await response.json();\r\n        console.log(\"Data pengumuman (full):\", JSON.stringify(data, null, 2)); // Debug: tampilkan seluruh isi array\r\n        setPengumuman(data);\r\n      } catch (err) {\r\n        console.error(\"Gagal memuat pengumuman terbaru:\", err.message);\r\n        setError(err.message);\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchPengumumanTerbaru();\r\n  }, []);\r\n\r\n  const formatDisplayDate = (isoDateString) => {\r\n    if (!isoDateString) return \"\";\r\n    const date = new Date(isoDateString);\r\n    return date.toLocaleDateString(\"id-ID\", {\r\n      day: \"numeric\",\r\n      month: \"long\",\r\n      year: \"numeric\",\r\n    });\r\n  };\r\n\r\n  // Fungsi untuk mengambil ringkasan dari isi_pengumuman jika ringkasan tidak ada\r\n  const getSummary = (item) => {\r\n    if (item.ringkasan) return item.ringkasan;\r\n    if (item.isi_pengumuman) {\r\n      // Hilangkan tag HTML dan ambil 200 karakter pertama\r\n      const text = item.isi_pengumuman.replace(/<[^>]+>/g, \"\");\r\n      return text.length > 200 ? text.slice(0, 200) + \"...\" : text;\r\n    }\r\n    return \"\";\r\n  };\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <section className=\"home-section pengumuman-terbaru-section\">\r\n        <div className=\"home-section-container\">\r\n          <h2 className=\"section-title\">\r\n            <i className=\"bi bi-megaphone-fill\"></i> Pengumuman Terbaru\r\n          </h2>\r\n          <div className=\"card-grid\">\r\n            {[...Array(3)].map((_, index) => (\r\n              <div key={index} className=\"card-base pengumuman-card is-loading\">\r\n                <div className=\"pengumuman-card-content\">\r\n                  <div className=\"placeholder-line title\"></div>\r\n                  <div className=\"placeholder-line date\"></div>\r\n                  <div className=\"placeholder-line text\"></div>\r\n                  <div className=\"placeholder-line text short\"></div>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      </section>\r\n    );\r\n  }\r\n\r\n  if (error || pengumuman.length === 0) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <section className=\"home-section pengumuman-terbaru-section\">\r\n      <div className=\"home-section-container\">\r\n        <h2 className=\"section-title\">\r\n          <i className=\"bi bi-megaphone-fill\"></i> Pengumuman Terbaru\r\n        </h2>\r\n        <div className=\"card-grid\">\r\n          {pengumuman.map((item) => (\r\n            <Link\r\n              key={item.id_pengumuman}\r\n              to={`/pengumuman/${item.id_pengumuman}`}\r\n              className=\"card-base pengumuman-card\"\r\n            >\r\n              <div className=\"pengumuman-card-content\">\r\n                <h3 className=\"pengumuman-card-title\">{item.judul}</h3>\r\n                <p className=\"pengumuman-card-date\">\r\n                  {formatDisplayDate(item.tanggal_publikasi)}\r\n                </p>\r\n\r\n                {/* === PERUBAHAN UTAMA ADA DI SINI === */}\r\n                <div\r\n                  className=\"pengumuman-card-summary\"\r\n                  dangerouslySetInnerHTML={{\r\n                    __html: getSummary(item), // tanpa sanitizeHtml untuk tes\r\n                  }}\r\n                />\r\n                {/* ===================================== */}\r\n              </div>\r\n              <span className=\"pengumuman-selengkapnya\">\r\n                Selengkapnya &rarr;\r\n              </span>\r\n            </Link>\r\n          ))}\r\n        </div>\r\n        <div className=\"section-cta-container\">\r\n          <Button to=\"/pengumuman\" variant=\"secondary\">\r\n            Lihat Semua Pengumuman\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default PengumumanTerbaruSection;\r\n"],"names":["pengumuman","setPengumuman","useState","isLoading","setIsLoading","error","setError","useEffect","async","response","fetch","ok","Error","data","json","console","log","JSON","stringify","err","message","fetchPengumumanTerbaru","formatDisplayDate","isoDateString","Date","toLocaleDateString","day","month","year","getSummary","item","ringkasan","isi_pengumuman","text","replace","length","slice","_jsx","className","children","_jsxs","Array","map","_","index","Link","to","concat","id_pengumuman","judul","tanggal_publikasi","dangerouslySetInnerHTML","__html","Button","variant"],"sourceRoot":""}