"use strict";(self.webpackChunkspk_gunung=self.webpackChunkspk_gunung||[]).push([[482],{1412:(a,e,r)=>{r.r(e),r.d(e,{default:()=>u});var n=r(2555),s=r(5043),o=r(1283),i=r(7488),l=(r(2342),r(5016)),t=r(579);const u=function(){const a=(0,o.Zp)(),{logout:e}=(0,l.A)(),[r,u]=(0,s.useState)({judul_laporan:"",deskripsi_laporan:"",halaman_error:""}),[d,p]=(0,s.useState)(null),[h,m]=(0,s.useState)(!1);(0,s.useEffect)(()=>{u(a=>(0,n.A)((0,n.A)({},a),{},{halaman_error:window.location.href}))},[]);const c=a=>{u(e=>(0,n.A)((0,n.A)({},e),{},{[a.target.name]:a.target.value}))};return(0,t.jsxs)("div",{className:"lapor-error-container",children:[(0,t.jsx)(i.N9,{position:"top-center",autoClose:3e3}),(0,t.jsxs)("div",{className:"lapor-error-card",children:[(0,t.jsx)("h2",{children:"Laporkan Masalah atau Error"}),(0,t.jsx)("p",{children:"Menemukan sesuatu yang tidak beres? Beri tahu kami agar dapat segera kami perbaiki."}),(0,t.jsxs)("form",{onSubmit:async n=>{if(n.preventDefault(),!r.judul_laporan||!r.deskripsi_laporan)return void i.oR.warn("Judul dan Deskripsi laporan wajib diisi.");m(!0);const s=new FormData;s.append("judul_laporan",r.judul_laporan),s.append("deskripsi_laporan",r.deskripsi_laporan),s.append("halaman_error",r.halaman_error),d&&s.append("screenshot",d);const o=localStorage.getItem("token");if(!o)return i.oR.error("Anda harus login untuk mengirim laporan."),void m(!1);try{const r=await fetch("".concat("http://localhost:5000/api","/laporan-error"),{method:"POST",headers:{Authorization:"Bearer ".concat(o)},body:s});if(401===r.status||403===r.status)return i.oR.error("Sesi Anda tidak valid atau telah berakhir. Silakan login kembali."),e(),setTimeout(()=>a("/"),3e3),void m(!1);const n=await r.json();if(!r.ok)throw new Error(n.message||"Gagal mengirim laporan.");i.oR.success("Laporan berhasil dikirim. Terima kasih atas masukan Anda!"),setTimeout(()=>a("/"),2e3)}catch(l){i.oR.error(l.message||"Terjadi kesalahan yang tidak terduga."),m(!1)}},children:[(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{htmlFor:"judul_laporan",children:"Judul Laporan"}),(0,t.jsx)("input",{type:"text",id:"judul_laporan",name:"judul_laporan",value:r.judul_laporan,onChange:c,placeholder:"cth: Tombol Simpan Tidak Berfungsi",required:!0})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{htmlFor:"deskripsi_laporan",children:"Deskripsi Masalah"}),(0,t.jsx)("textarea",{id:"deskripsi_laporan",name:"deskripsi_laporan",value:r.deskripsi_laporan,onChange:c,rows:"6",placeholder:"Jelaskan masalah yang Anda temui, termasuk langkah-langkah untuk mereproduksinya.",required:!0})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{htmlFor:"halaman_error",children:"URL Halaman Error"}),(0,t.jsx)("input",{type:"text",id:"halaman_error",name:"halaman_error",value:r.halaman_error,onChange:c,readOnly:!0})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{htmlFor:"screenshot",children:"Screenshot (Opsional)"}),(0,t.jsx)("input",{type:"file",id:"screenshot",name:"screenshot",onChange:a=>{p(a.target.files[0])},accept:"image/png, image/jpeg, image/gif"})]}),(0,t.jsx)("button",{type:"submit",className:"btn-submit-laporan",disabled:h,children:h?"Mengirim...":"Kirim Laporan"})]})]})]})}}}]);
//# sourceMappingURL=482.26ee371e.chunk.js.map