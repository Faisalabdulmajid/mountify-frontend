{"version":3,"file":"static/js/518.0a356903.chunk.js","mappings":"oMAQA,MAAMA,EAAe,kCAqLrB,QAnLA,WACE,MAAMC,GAAWC,EAAAA,EAAAA,OACVC,EAAYC,IAAiBC,EAAAA,EAAAA,UAAS,KACtCC,EAAUC,IAAeF,EAAAA,EAAAA,UAAS,CACvCG,MAAO,GACPC,UAAW,GACXC,UAAW,GACXC,KAAM,QAEDC,EAAcC,IAAmBR,EAAAA,EAAAA,WAAS,IAC1CS,EAASC,IAAcV,EAAAA,EAAAA,UAAS,OAEvCW,EAAAA,EAAAA,WAAU,KACYC,WAClB,IACE,MAAMC,EAAQC,aAAaC,QAAQ,SAC7BC,QAAiBC,MAAM,GAADC,OAAIvB,EAAY,WAAW,CACrDwB,QAAS,CAAEC,cAAc,UAADF,OAAYL,MAEtC,IAAKG,EAASK,GAAI,MAAM,IAAIC,MAAM,+BAClC,MAAMC,QAAaP,EAASQ,OAC5BzB,EAAcwB,EAChB,CAAE,MAAOE,GACPC,EAAAA,GAAMC,MAAMF,EAAIG,QAClB,GAEFC,IACC,IAEH,MAAMC,EAAoBC,IACxB,MAAM,KAAEC,EAAI,MAAEC,EAAK,MAAEC,GAAUH,EAAEI,OACpB,SAATH,GAAmBE,EAAM,IAC3BhC,EAAakC,IAAIC,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAWD,GAAI,IAAE9B,KAAM4B,EAAM,MAC9CxB,EAAW4B,IAAIC,gBAAgBL,EAAM,MAErChC,EAAakC,IAAIC,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAWD,GAAI,IAAE,CAACJ,GAAOC,MAwC9C,OACEO,EAAAA,EAAAA,MAAA,OAAKC,UAAU,0BAAyBC,SAAA,EACtCC,EAAAA,EAAAA,KAACC,EAAAA,GAAc,CACbC,SAAS,YACTC,UAAW,IACXC,iBAAiB,KAEnBP,EAAAA,EAAAA,MAAA,UAAQC,UAAU,qBAAoBC,SAAA,EACpCC,EAAAA,EAAAA,KAAA,MAAAD,SAAI,sBACJF,EAAAA,EAAAA,MAACQ,EAAAA,GAAI,CAACC,GAAG,iBAAiBR,UAAU,cAAaC,SAAA,EAC/CC,EAAAA,EAAAA,KAAA,KAAGF,UAAU,qBAAuB,4BAIxCE,EAAAA,EAAAA,KAAA,OAAKF,UAAU,oBAAmBC,UAChCF,EAAAA,EAAAA,MAAA,QAAMU,SAnDatC,UAEvB,GADAmB,EAAEoB,kBACGlD,EAASK,OAASL,EAASE,MAE9B,YADAuB,EAAAA,GAAM0B,KAAK,sCAGb5C,GAAgB,GAChB,MAAMK,EAAQC,aAAaC,QAAQ,SAE7BsC,EAAiB,IAAIC,SAC3BD,EAAeE,OAAO,QAAStD,EAASE,OACxCkD,EAAeE,OAAO,YAAatD,EAASG,WACxCH,EAASI,WACXgD,EAAeE,OAAO,YAAatD,EAASI,WAE9CgD,EAAeE,OAAO,OAAQtD,EAASK,MAEvC,IACE,MAAMU,QAAiBC,MAAM,GAADC,OAAIvB,EAAY,YAAY,CACtD6D,OAAQ,OACRrC,QAAS,CAAEC,cAAc,UAADF,OAAYL,IACpC4C,KAAMJ,IAGFK,QAAe1C,EAASQ,OAC9B,IAAKR,EAASK,GAAI,MAAM,IAAIC,MAAMoC,EAAO9B,SAEzCF,EAAAA,GAAMiC,QAAQD,EAAO9B,SACrBhC,EAAS,iBACX,CAAE,MAAO6B,GACPC,EAAAA,GAAMC,MAAMF,EAAIG,QAClB,CAAC,QACCpB,GAAgB,EAClB,GAkBqCkC,SAAA,EAC/BF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,aAAYC,SAAA,EACzBC,EAAAA,EAAAA,KAAA,SAAOiB,QAAQ,QAAOlB,SAAC,iBACvBC,EAAAA,EAAAA,KAAA,SACEkB,KAAK,OACLC,GAAG,QACH9B,KAAK,QACLC,MAAOhC,EAASE,MAChB4D,SAAUjC,EACVkC,UAAQ,EACRC,YAAY,0CAGhBzB,EAAAA,EAAAA,MAAA,OAAKC,UAAU,aAAYC,SAAA,EACzBC,EAAAA,EAAAA,KAAA,SAAOiB,QAAQ,YAAWlB,SAAC,0BAC3BC,EAAAA,EAAAA,KAAA,YACEmB,GAAG,YACH9B,KAAK,YACLC,MAAOhC,EAASG,UAChB2D,SAAUjC,EACVoC,KAAK,IACLD,YAAY,2CAGhBzB,EAAAA,EAAAA,MAAA,OAAKC,UAAU,aAAYC,SAAA,EACzBC,EAAAA,EAAAA,KAAA,SAAOiB,QAAQ,YAAWlB,SAAC,kCAC3BF,EAAAA,EAAAA,MAAA,UACER,KAAK,YACL8B,GAAG,YACH7B,MAAOhC,EAASI,UAChB0D,SAAUjC,EAAiBY,SAAA,EAE3BC,EAAAA,EAAAA,KAAA,UAAQV,MAAM,GAAES,SAAC,0BAChB5C,EAAWqE,IAAKC,IACfzB,EAAAA,EAAAA,KAAA,UAA+BV,MAAOmC,EAAO/D,UAAUqC,SACpD0B,EAAOC,aADGD,EAAO/D,mBAQ1BmC,EAAAA,EAAAA,MAAA,OAAKC,UAAU,aAAYC,SAAA,EACzBC,EAAAA,EAAAA,KAAA,SAAAD,SAAO,wBACPF,EAAAA,EAAAA,MAAA,OAAAE,SAAA,EAEEF,EAAAA,EAAAA,MAAA,SAAOoB,QAAQ,OAAOnB,UAAU,qBAAoBC,SAAA,EAClDC,EAAAA,EAAAA,KAAA,KAAGF,UAAU,uBAAyB,kBAExCE,EAAAA,EAAAA,KAAA,QAAMF,UAAU,YAAWC,SACxBzC,EAASK,KACNL,EAASK,KAAK0B,KACd,iCAGNW,EAAAA,EAAAA,KAAA,SACEkB,KAAK,OACLC,GAAG,OACH9B,KAAK,OACL+B,SAAUjC,EACVwC,OAAO,oCACPN,UAAQ,UAMbvD,IACC+B,EAAAA,EAAAA,MAAA,OAAKC,UAAU,0BAAyBC,SAAA,EACtCC,EAAAA,EAAAA,KAAA,KAAAD,SAAG,cACHC,EAAAA,EAAAA,KAAA,OAAK4B,IAAK9D,EAAS+D,IAAI,UAAU/B,UAAU,sBAG/CE,EAAAA,EAAAA,KAAA,OAAKF,UAAU,eAAcC,UAC3BF,EAAAA,EAAAA,MAAA,UACEqB,KAAK,SACLpB,UAAU,oBACVgC,SAAUlE,EAAamC,SAAA,EAEvBC,EAAAA,EAAAA,KAAA,KAAGF,UAAU,iBAAoB,IAChClC,EAAe,gBAAkB,0BAOhD,C","sources":["pages/admin/galeri/TambahGaleri.js"],"sourcesContent":["// src/pages/admin/galeri/TambahGaleri.js (VERSI PERBAIKAN FINAL)\r\n\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { useNavigate, Link } from \"react-router-dom\";\r\nimport { ToastContainer, toast } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\nimport \"./TambahGaleri.css\";\r\n\r\nconst API_BASE_URL = \"http://localhost:5000/api/admin\";\r\n\r\nfunction TambahGaleri() {\r\n  const navigate = useNavigate();\r\n  const [gunungList, setGunungList] = useState([]);\r\n  const [formData, setFormData] = useState({\r\n    judul: \"\",\r\n    deskripsi: \"\",\r\n    id_gunung: \"\",\r\n    file: null,\r\n  });\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n  const [preview, setPreview] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const fetchGunung = async () => {\r\n      try {\r\n        const token = localStorage.getItem(\"token\");\r\n        const response = await fetch(`${API_BASE_URL}/gunung`, {\r\n          headers: { Authorization: `Bearer ${token}` },\r\n        });\r\n        if (!response.ok) throw new Error(\"Gagal memuat daftar gunung.\");\r\n        const data = await response.json();\r\n        setGunungList(data);\r\n      } catch (err) {\r\n        toast.error(err.message);\r\n      }\r\n    };\r\n    fetchGunung();\r\n  }, []);\r\n\r\n  const handleFormChange = (e) => {\r\n    const { name, value, files } = e.target;\r\n    if (name === \"file\" && files[0]) {\r\n      setFormData((prev) => ({ ...prev, file: files[0] }));\r\n      setPreview(URL.createObjectURL(files[0]));\r\n    } else {\r\n      setFormData((prev) => ({ ...prev, [name]: value }));\r\n    }\r\n  };\r\n\r\n  const handleFormSubmit = async (e) => {\r\n    e.preventDefault();\r\n    if (!formData.file || !formData.judul) {\r\n      toast.warn(\"Judul dan File Gambar wajib diisi!\");\r\n      return;\r\n    }\r\n    setIsSubmitting(true);\r\n    const token = localStorage.getItem(\"token\");\r\n\r\n    const submissionData = new FormData();\r\n    submissionData.append(\"judul\", formData.judul);\r\n    submissionData.append(\"deskripsi\", formData.deskripsi);\r\n    if (formData.id_gunung) {\r\n      submissionData.append(\"id_gunung\", formData.id_gunung);\r\n    }\r\n    submissionData.append(\"foto\", formData.file);\r\n\r\n    try {\r\n      const response = await fetch(`${API_BASE_URL}/gallery`, {\r\n        method: \"POST\",\r\n        headers: { Authorization: `Bearer ${token}` },\r\n        body: submissionData,\r\n      });\r\n\r\n      const result = await response.json();\r\n      if (!response.ok) throw new Error(result.message);\r\n\r\n      toast.success(result.message);\r\n      navigate(\"/admin/gallery\");\r\n    } catch (err) {\r\n      toast.error(err.message);\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"tambah-galeri-container\">\r\n      <ToastContainer\r\n        position=\"top-right\"\r\n        autoClose={3000}\r\n        hideProgressBar={false}\r\n      />\r\n      <header className=\"page-header-tambah\">\r\n        <h1>Unggah Foto Baru</h1>\r\n        <Link to=\"/admin/gallery\" className=\"btn-kembali\">\r\n          <i className=\"bi bi-arrow-left\"></i> Kembali ke Galeri\r\n        </Link>\r\n      </header>\r\n\r\n      <div className=\"form-wrapper-card\">\r\n        <form onSubmit={handleFormSubmit}>\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"judul\">Judul Foto*</label>\r\n            <input\r\n              type=\"text\"\r\n              id=\"judul\"\r\n              name=\"judul\"\r\n              value={formData.judul}\r\n              onChange={handleFormChange}\r\n              required\r\n              placeholder=\"Contoh: Senja di atas Gunung Prau\"\r\n            />\r\n          </div>\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"deskripsi\">Deskripsi (Opsional)</label>\r\n            <textarea\r\n              id=\"deskripsi\"\r\n              name=\"deskripsi\"\r\n              value={formData.deskripsi}\r\n              onChange={handleFormChange}\r\n              rows=\"4\"\r\n              placeholder=\"Deskripsi singkat mengenai foto...\"\r\n            ></textarea>\r\n          </div>\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"id_gunung\">Tautkan ke Gunung (Opsional)</label>\r\n            <select\r\n              name=\"id_gunung\"\r\n              id=\"id_gunung\"\r\n              value={formData.id_gunung}\r\n              onChange={handleFormChange}\r\n            >\r\n              <option value=\"\">-- Tidak Ditautkan --</option>\r\n              {gunungList.map((gunung) => (\r\n                <option key={gunung.id_gunung} value={gunung.id_gunung}>\r\n                  {gunung.nama_gunung}\r\n                </option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n\r\n          {/* --- PERBAIKAN DI BLOK INI --- */}\r\n          <div className=\"form-group\">\r\n            <label>Pilih File Gambar*</label>\r\n            <div>\r\n              {/* Label ini berfungsi sebagai tombol yang bisa diklik */}\r\n              <label htmlFor=\"file\" className=\"custom-file-upload\">\r\n                <i className=\"bi bi-folder2-open\"></i> Pilih File\r\n              </label>\r\n              <span className=\"file-name\">\r\n                {formData.file\r\n                  ? formData.file.name\r\n                  : \"Tidak ada file yang dipilih\"}\r\n              </span>\r\n              {/* Input file yang asli kita sembunyikan dengan CSS, tapi tetap berfungsi */}\r\n              <input\r\n                type=\"file\"\r\n                id=\"file\"\r\n                name=\"file\"\r\n                onChange={handleFormChange}\r\n                accept=\"image/jpeg, image/png, image/webp\"\r\n                required\r\n              />\r\n            </div>\r\n          </div>\r\n          {/* --- AKHIR PERBAIKAN --- */}\r\n\r\n          {preview && (\r\n            <div className=\"image-preview-container\">\r\n              <p>Preview:</p>\r\n              <img src={preview} alt=\"Preview\" className=\"image-preview\" />\r\n            </div>\r\n          )}\r\n          <div className=\"form-actions\">\r\n            <button\r\n              type=\"submit\"\r\n              className=\"btn-submit-galeri\"\r\n              disabled={isSubmitting}\r\n            >\r\n              <i className=\"bi bi-upload\"></i>{\" \"}\r\n              {isSubmitting ? \"Mengunggah...\" : \"Unggah Foto\"}\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default TambahGaleri;\r\n"],"names":["API_BASE_URL","navigate","useNavigate","gunungList","setGunungList","useState","formData","setFormData","judul","deskripsi","id_gunung","file","isSubmitting","setIsSubmitting","preview","setPreview","useEffect","async","token","localStorage","getItem","response","fetch","concat","headers","Authorization","ok","Error","data","json","err","toast","error","message","fetchGunung","handleFormChange","e","name","value","files","target","prev","_objectSpread","URL","createObjectURL","_jsxs","className","children","_jsx","ToastContainer","position","autoClose","hideProgressBar","Link","to","onSubmit","preventDefault","warn","submissionData","FormData","append","method","body","result","success","htmlFor","type","id","onChange","required","placeholder","rows","map","gunung","nama_gunung","accept","src","alt","disabled"],"sourceRoot":""}