"use strict";(self.webpackChunkspk_gunung=self.webpackChunkspk_gunung||[]).push([[622],{698:(a,e,n)=>{n.d(e,{A:()=>t});n(5043);var s=n(579);const t=a=>{let{title:e,onAddClick:n,addLabel:t="Tambah",addIcon:i=(0,s.jsx)("i",{className:"bi bi-plus-lg"}),children:l}=a;return(0,s.jsxs)("div",{className:"controls-container",children:[(0,s.jsxs)("div",{className:"header-row",children:[(0,s.jsx)("h1",{className:"page-title",children:e}),n&&(0,s.jsxs)("button",{className:"btn-add-new",onClick:n,children:[i," ",t]})]}),l]})}},5071:(a,e,n)=>{n.d(e,{zY:()=>s.A});var s=n(698);n(5043),n(579)},6681:()=>{},8622:(a,e,n)=>{n.r(e),n.d(e,{default:()=>g});var s=n(5043),t=n(1283),i=n(7488),l=(n(2342),n(64)),r=n.n(l),c=(n(6681),n(5071)),o=(n(9645),n(579));const u=a=>{let{gunungFilter:e,setGunungFilter:n,gunungList:s}=a;return(0,o.jsx)("div",{className:"toolbar",children:(0,o.jsx)("div",{className:"filter-container",children:(0,o.jsxs)("div",{className:"filter-group",children:[(0,o.jsx)("label",{htmlFor:"gunungFilter",children:"Filter Berdasarkan Gunung:"}),(0,o.jsxs)("select",{id:"gunungFilter",value:e,onChange:a=>n(a.target.value),children:[(0,o.jsx)("option",{value:"Semua",children:"Semua Gunung"}),s.map(a=>(0,o.jsx)("option",{value:a.nama_gunung,children:a.nama_gunung},a.id_gunung))]})]})})})},d="http://localhost:5000/api/admin";const g=function(){const a=(0,t.Zp)(),[e,n]=(0,s.useState)([]),[l,g]=(0,s.useState)([]),[m,h]=(0,s.useState)(!0),[j,x]=(0,s.useState)(null),[p,f]=(0,s.useState)("Semua"),k=(0,s.useCallback)(async()=>{h(!0);try{const a=localStorage.getItem("token"),[e,s]=await Promise.all([fetch("".concat(d,"/gallery"),{headers:{Authorization:"Bearer ".concat(a)}}),fetch("".concat(d,"/gunung"),{headers:{Authorization:"Bearer ".concat(a)}})]);if(!e.ok)throw new Error("Gagal memuat data galeri.");if(!s.ok)throw new Error("Gagal memuat daftar gunung.");const t=await e.json(),i=await s.json();n(t),g(i)}catch(a){x(a.message),i.oR.error(a.message)}finally{h(!1)}},[]);(0,s.useEffect)(()=>{k()},[k]);const N=(0,s.useMemo)(()=>"Semua"===p?e:e.filter(a=>a.nama_gunung===p),[e,p]);return m?(0,o.jsx)("div",{className:"spinner-container",children:"Memuat data galeri..."}):j?(0,o.jsx)("div",{className:"error-message-full",children:j}):(0,o.jsxs)("div",{className:"kelola-galeri-container",children:[(0,o.jsx)(i.N9,{position:"top-right",autoClose:3e3,hideProgressBar:!1}),(0,o.jsx)(c.zY,{title:"Kelola Galeri",addLabel:"Unggah Foto Baru",onAddClick:()=>a("/admin/gallery/new")}),(0,o.jsx)(u,{gunungFilter:p,setGunungFilter:f,gunungList:l}),(0,o.jsx)("div",{className:"galeri-grid",children:N.length>0?N.map(a=>(0,o.jsxs)("div",{className:"galeri-item-card",children:[(0,o.jsx)("img",{src:"http://localhost:5000".concat(a.url_gambar),alt:a.judul,className:"galeri-thumbnail"}),(0,o.jsx)("button",{className:"btn-delete-icon",title:"Hapus Foto",onClick:()=>{return e=a.id_galeri,s=a.judul,void r().fire({title:"Apakah Anda yakin?",text:'Menghapus foto "'.concat(s,'" tidak dapat dibatalkan.'),icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#6c757d",confirmButtonText:"Ya, hapus!",cancelButtonText:"Batal"}).then(async a=>{if(a.isConfirmed){const a=localStorage.getItem("token");try{const s=await fetch("".concat(d,"/gallery/").concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(a)}}),t=await s.json();if(!s.ok)throw new Error(t.message);i.oR.success(t.message),n(a=>a.filter(a=>a.id_galeri!==e))}catch(s){i.oR.error(s.message)}}});var e,s},children:(0,o.jsx)("i",{className:"bi bi-trash3-fill"})}),(0,o.jsxs)("div",{className:"galeri-item-info",children:[(0,o.jsx)("h4",{children:a.judul||"Tanpa Judul"}),(0,o.jsx)("p",{children:a.deskripsi||"Tidak ada deskripsi."}),(0,o.jsxs)("div",{className:"author-info",children:[(0,o.jsx)("i",{className:"bi bi-person-circle"}),(0,o.jsx)("span",{children:a.penulis||"N/A"})]}),(0,o.jsxs)("div",{className:"meta-info",children:[(0,o.jsxs)("span",{className:"meta-gunung",children:[(0,o.jsx)("i",{className:"bi bi-image-alt"}),a.nama_gunung||"Umum"]}),(0,o.jsxs)("span",{className:"meta-tanggal",children:[(0,o.jsx)("i",{className:"bi bi-calendar-event"}),new Date(a.uploaded_at).toLocaleDateString("id-ID")]})]})]})]},a.id_galeri)):(0,o.jsx)("div",{className:"empty-gallery-message",children:(0,o.jsx)("p",{children:"Tidak ada foto yang cocok dengan filter, atau galeri masih kosong."})})})]})}},9645:()=>{}}]);
//# sourceMappingURL=622.699db7bd.chunk.js.map