{"version":3,"file":"static/js/622.699db7bd.chunk.js","mappings":"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","sources":["components/common/PageHeader/PageHeader.js","pages/admin/galeri/components/GaleriToolbar.js","pages/admin/galeri/KelolaGaleri.js"],"sourcesContent":["import React from \"react\";\r\n\r\nconst PageHeader = ({\r\n  title,\r\n  onAddClick,\r\n  addLabel = \"Tambah\",\r\n  addIcon = <i className=\"bi bi-plus-lg\"></i>,\r\n  children,\r\n}) => {\r\n  return (\r\n    <div className=\"controls-container\">\r\n      <div className=\"header-row\">\r\n        <h1 className=\"page-title\">{title}</h1>\r\n        {onAddClick && (\r\n          <button className=\"btn-add-new\" onClick={onAddClick}>\r\n            {addIcon} {addLabel}\r\n          </button>\r\n        )}\r\n      </div>\r\n      {children}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PageHeader;\r\n","import React from \"react\";\r\n\r\nconst GaleriToolbar = ({ gunungFilter, setGunungFilter, gunungList }) => {\r\n  return (\r\n    <div className=\"toolbar\">\r\n      <div className=\"filter-container\">\r\n        <div className=\"filter-group\">\r\n          <label htmlFor=\"gunungFilter\">Filter Berdasarkan Gunung:</label>\r\n          <select\r\n            id=\"gunungFilter\"\r\n            value={gunungFilter}\r\n            onChange={(e) => setGunungFilter(e.target.value)}\r\n          >\r\n            <option value=\"Semua\">Semua Gunung</option>\r\n            {gunungList.map((g) => (\r\n              <option key={g.id_gunung} value={g.nama_gunung}>\r\n                {g.nama_gunung}\r\n              </option>\r\n            ))}\r\n          </select>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default GaleriToolbar;\r\n","import React, { useState, useEffect, useCallback, useMemo } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { ToastContainer, toast } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\nimport Swal from \"sweetalert2\";\r\nimport \"sweetalert2/dist/sweetalert2.min.css\";\r\nimport \"./KelolaGaleri.css\";\r\nimport { PageHeader } from \"../../../components/common/PageHeader\";\r\nimport \"../../../components/common/PageHeader/PageHeader.css\";\r\nimport { GaleriToolbar } from \"./components\";\r\n\r\nconst API_BASE_URL = \"http://localhost:5000/api/admin\";\r\n\r\nfunction KelolaGaleri() {\r\n  const navigate = useNavigate();\r\n  const [galleryItems, setGalleryItems] = useState([]);\r\n  const [gunungList, setGunungList] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n\r\n  const [gunungFilter, setGunungFilter] = useState(\"Semua\");\r\n\r\n  const fetchData = useCallback(async () => {\r\n    setLoading(true);\r\n    try {\r\n      const token = localStorage.getItem(\"token\");\r\n      const [galleryRes, gunungRes] = await Promise.all([\r\n        fetch(`${API_BASE_URL}/gallery`, {\r\n          headers: { Authorization: `Bearer ${token}` },\r\n        }),\r\n        fetch(`${API_BASE_URL}/gunung`, {\r\n          headers: { Authorization: `Bearer ${token}` },\r\n        }),\r\n      ]);\r\n\r\n      if (!galleryRes.ok) throw new Error(\"Gagal memuat data galeri.\");\r\n      if (!gunungRes.ok) throw new Error(\"Gagal memuat daftar gunung.\");\r\n\r\n      const galleryData = await galleryRes.json();\r\n      const gunungData = await gunungRes.json();\r\n\r\n      setGalleryItems(galleryData);\r\n      setGunungList(gunungData);\r\n    } catch (err) {\r\n      setError(err.message);\r\n      toast.error(err.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    fetchData();\r\n  }, [fetchData]);\r\n\r\n  const filteredItems = useMemo(() => {\r\n    if (gunungFilter === \"Semua\") {\r\n      return galleryItems;\r\n    }\r\n    return galleryItems.filter((item) => item.nama_gunung === gunungFilter);\r\n  }, [galleryItems, gunungFilter]);\r\n\r\n  const handleDelete = (id, judul) => {\r\n    Swal.fire({\r\n      title: \"Apakah Anda yakin?\",\r\n      text: `Menghapus foto \"${judul}\" tidak dapat dibatalkan.`,\r\n      icon: \"warning\",\r\n      showCancelButton: true,\r\n      confirmButtonColor: \"#d33\",\r\n      cancelButtonColor: \"#6c757d\",\r\n      confirmButtonText: \"Ya, hapus!\",\r\n      cancelButtonText: \"Batal\",\r\n    }).then(async (result) => {\r\n      if (result.isConfirmed) {\r\n        const token = localStorage.getItem(\"token\");\r\n        try {\r\n          const response = await fetch(`${API_BASE_URL}/gallery/${id}`, {\r\n            method: \"DELETE\",\r\n            headers: { Authorization: `Bearer ${token}` },\r\n          });\r\n          const resJson = await response.json();\r\n          if (!response.ok) throw new Error(resJson.message);\r\n\r\n          toast.success(resJson.message);\r\n          setGalleryItems((prev) =>\r\n            prev.filter((item) => item.id_galeri !== id)\r\n          );\r\n        } catch (err) {\r\n          toast.error(err.message);\r\n        }\r\n      }\r\n    });\r\n  };\r\n\r\n  if (loading)\r\n    return <div className=\"spinner-container\">Memuat data galeri...</div>;\r\n  if (error) return <div className=\"error-message-full\">{error}</div>;\r\n\r\n  return (\r\n    <div className=\"kelola-galeri-container\">\r\n      <ToastContainer\r\n        position=\"top-right\"\r\n        autoClose={3000}\r\n        hideProgressBar={false}\r\n      />\r\n      <PageHeader\r\n        title=\"Kelola Galeri\"\r\n        addLabel=\"Unggah Foto Baru\"\r\n        onAddClick={() => navigate(\"/admin/gallery/new\")}\r\n      />\r\n\r\n      <GaleriToolbar\r\n        gunungFilter={gunungFilter}\r\n        setGunungFilter={setGunungFilter}\r\n        gunungList={gunungList}\r\n      />\r\n\r\n      <div className=\"galeri-grid\">\r\n        {filteredItems.length > 0 ? (\r\n          filteredItems.map((item) => (\r\n            <div key={item.id_galeri} className=\"galeri-item-card\">\r\n              <img\r\n                src={`http://localhost:5000${item.url_gambar}`}\r\n                alt={item.judul}\r\n                className=\"galeri-thumbnail\"\r\n              />\r\n              <button\r\n                className=\"btn-delete-icon\"\r\n                title=\"Hapus Foto\"\r\n                onClick={() => handleDelete(item.id_galeri, item.judul)}\r\n              >\r\n                <i className=\"bi bi-trash3-fill\"></i>\r\n              </button>\r\n              <div className=\"galeri-item-info\">\r\n                <h4>{item.judul || \"Tanpa Judul\"}</h4>\r\n                <p>{item.deskripsi || \"Tidak ada deskripsi.\"}</p>\r\n                {/* --- PENAMBAHAN INFO PENULIS DI SINI --- */}\r\n                <div className=\"author-info\">\r\n                  <i className=\"bi bi-person-circle\"></i>\r\n                  <span>{item.penulis || \"N/A\"}</span>\r\n                </div>\r\n                <div className=\"meta-info\">\r\n                  <span className=\"meta-gunung\">\r\n                    <i className=\"bi bi-image-alt\"></i>\r\n                    {item.nama_gunung || \"Umum\"}\r\n                  </span>\r\n                  <span className=\"meta-tanggal\">\r\n                    <i className=\"bi bi-calendar-event\"></i>\r\n                    {new Date(item.uploaded_at).toLocaleDateString(\"id-ID\")}\r\n                  </span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ))\r\n        ) : (\r\n          <div className=\"empty-gallery-message\">\r\n            <p>\r\n              Tidak ada foto yang cocok dengan filter, atau galeri masih kosong.\r\n            </p>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default KelolaGaleri;\r\n"],"names":["_ref","title","onAddClick","addLabel","addIcon","_jsx","className","children","_jsxs","onClick","gunungFilter","setGunungFilter","gunungList","htmlFor","id","value","onChange","e","target","map","g","nama_gunung","id_gunung","API_BASE_URL","navigate","useNavigate","galleryItems","setGalleryItems","useState","setGunungList","loading","setLoading","error","setError","fetchData","useCallback","async","token","localStorage","getItem","galleryRes","gunungRes","Promise","all","fetch","concat","headers","Authorization","ok","Error","galleryData","json","gunungData","err","message","toast","useEffect","filteredItems","useMemo","filter","item","ToastContainer","position","autoClose","hideProgressBar","PageHeader","GaleriToolbar","length","src","url_gambar","alt","judul","handleDelete","id_galeri","Swal","text","icon","showCancelButton","confirmButtonColor","cancelButtonColor","confirmButtonText","cancelButtonText","then","result","isConfirmed","response","method","resJson","success","prev","deskripsi","penulis","Date","uploaded_at","toLocaleDateString"],"sourceRoot":""}