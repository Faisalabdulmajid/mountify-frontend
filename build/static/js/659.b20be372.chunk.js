"use strict";(self.webpackChunkspk_gunung=self.webpackChunkspk_gunung||[]).push([[659],{3290:(e,t,i)=>{i.d(t,{A:()=>k});var a=i(5043),n=i(4990),s=i(954),l=i(621),o=i(64),r=i.n(o),c=i(1981),u=i.n(c),d=i(579);const h=u()(r()),m=e=>{let{editor:t}=e;const i=(0,a.useCallback)(()=>{if(!t)return;const e=t.getAttributes("link").href;h.fire({title:"Masukkan URL",input:"url",inputLabel:"Alamat URL",inputValue:e,showCancelButton:!0,confirmButtonText:"Set Link",cancelButtonText:"Batal",confirmButtonColor:"#27ae60",inputValidator:e=>{if(!e)return"Anda perlu memasukkan URL!"}}).then(e=>{e.isConfirmed&&e.value&&t.chain().focus().extendMarkRange("link").setLink({href:e.value}).run()})},[t]);return t?(0,d.jsxs)("div",{className:"tiptap-menubar",children:[(0,d.jsx)("button",{type:"button",onClick:()=>t.chain().focus().toggleBold().run(),className:t.isActive("bold")?"is-active":"",children:"Bold"}),(0,d.jsx)("button",{type:"button",onClick:()=>t.chain().focus().toggleItalic().run(),className:t.isActive("italic")?"is-active":"",children:"Italic"}),(0,d.jsx)("button",{type:"button",onClick:()=>t.chain().focus().toggleStrike().run(),className:t.isActive("strike")?"is-active":"",children:"Strike"}),(0,d.jsx)("button",{type:"button",onClick:i,className:t.isActive("link")?"is-active":"",children:"Set Link"}),(0,d.jsx)("button",{type:"button",onClick:()=>t.chain().focus().unsetLink().run(),disabled:!t.isActive("link"),children:"Unset Link"}),(0,d.jsx)("button",{type:"button",onClick:()=>t.chain().focus().setParagraph().run(),className:t.isActive("paragraph")?"is-active":"",children:"Paragraph"}),(0,d.jsx)("button",{type:"button",onClick:()=>t.chain().focus().toggleHeading({level:1}).run(),className:t.isActive("heading",{level:1})?"is-active":"",children:"H1"}),(0,d.jsx)("button",{type:"button",onClick:()=>t.chain().focus().toggleHeading({level:2}).run(),className:t.isActive("heading",{level:2})?"is-active":"",children:"H2"}),(0,d.jsx)("button",{type:"button",onClick:()=>t.chain().focus().toggleBulletList().run(),className:t.isActive("bulletList")?"is-active":"",children:"Bullet List"}),(0,d.jsx)("button",{type:"button",onClick:()=>t.chain().focus().toggleOrderedList().run(),className:t.isActive("orderedList")?"is-active":"",children:"Ordered List"})]}):null},k=e=>{let{content:t,onContentChange:i}=e;const o=(0,n.hG)({extensions:[s.A,l.Ay.configure({autolink:!0,openOnClick:!1,linkOnPaste:!0})],content:t,onUpdate:e=>{let{editor:t}=e;i(t.getHTML())},editorProps:{attributes:{class:"tiptap-prose"}}});return(0,a.useEffect)(()=>{o&&t!==o.getHTML()&&o.commands.setContent(t,!1)},[t,o]),(0,d.jsxs)("div",{className:"tiptap-container",children:[(0,d.jsx)(m,{editor:o}),(0,d.jsx)(n.$Z,{editor:o})]})}},4949:()=>{},6659:(e,t,i)=>{i.r(t),i.d(t,{default:()=>c});var a=i(2555),n=i(5043),s=i(1283),l=i(7488),o=(i(2342),i(3290)),r=(i(4949),i(579));const c=function(){const e=(0,s.Zp)(),[t,i]=(0,n.useState)({judul:"",kategori:"Tips & Trik",status:"Draft",konten:""}),[c,u]=(0,n.useState)(null),[d,h]=(0,n.useState)(null),[m,k]=(0,n.useState)(!1),p=e=>{const{name:t,value:n}=e.target;i(e=>(0,a.A)((0,a.A)({},e),{},{[t]:n}))};return(0,r.jsxs)("div",{className:"add-edit-artikel-page",children:[(0,r.jsx)(l.N9,{position:"top-right",autoClose:3e3}),(0,r.jsxs)("header",{className:"page-header",children:[(0,r.jsx)("h1",{children:"Tulis Artikel Baru"}),(0,r.jsxs)(s.N_,{to:"/admin/articles",className:"btn-back",children:[(0,r.jsx)("i",{className:"bi bi-arrow-left"})," Kembali"]})]}),(0,r.jsxs)("form",{onSubmit:async i=>{if(i.preventDefault(),t.judul&&t.konten){k(!0);try{const i=localStorage.getItem("token");if(!i)return l.oR.error("Otentikasi gagal. Silakan login kembali."),void k(!1);const a=new FormData;a.append("judul",t.judul),a.append("kategori",t.kategori),a.append("status",t.status),a.append("isi_artikel",t.konten),c&&a.append("foto_utama",c);const n=await fetch("".concat("http://localhost:5000/api/admin","/artikel"),{method:"POST",headers:{Authorization:"Bearer ".concat(i)},body:a}),s=await n.json();if(!n.ok)throw new Error(s.message||"Gagal menyimpan artikel.");l.oR.success("Artikel berhasil disimpan!"),setTimeout(()=>e("/admin/articles"),2e3)}catch(a){l.oR.error(a.message||"Terjadi kesalahan. Periksa koneksi atau hubungi admin."),k(!1)}}else l.oR.warn("Judul dan Konten artikel tidak boleh kosong.")},className:"form-widget-artikel",children:[(0,r.jsxs)("div",{className:"form-main-column",children:[(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{htmlFor:"judul",children:"Judul Artikel"}),(0,r.jsx)("input",{type:"text",id:"judul",name:"judul",value:t.judul,onChange:p,placeholder:"Contoh: 7 Danau Terindah di Atas Gunung",required:!0})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{children:"Konten Artikel"}),(0,r.jsx)(o.A,{content:t.konten,onContentChange:e=>{i(t=>(0,a.A)((0,a.A)({},t),{},{konten:e}))}})]})]}),(0,r.jsxs)("div",{className:"form-sidebar-column",children:[(0,r.jsxs)("div",{className:"widget-card-artikel-settings",children:[(0,r.jsx)("h3",{children:"Pengaturan Publikasi"}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{htmlFor:"status",children:"Status"}),(0,r.jsxs)("select",{id:"status",name:"status",value:t.status,onChange:p,children:[(0,r.jsx)("option",{value:"Draft",children:"Simpan sebagai Draft"}),(0,r.jsx)("option",{value:"Published",children:"Publikasikan"})]})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{htmlFor:"kategori",children:"Kategori"}),(0,r.jsxs)("select",{id:"kategori",name:"kategori",value:t.kategori,onChange:p,children:[(0,r.jsx)("option",{value:"Tips & Trik",children:"Tips & Trik"}),(0,r.jsx)("option",{value:"Destinasi",children:"Destinasi"}),(0,r.jsx)("option",{value:"Review",children:"Review Peralatan"}),(0,r.jsx)("option",{value:"Edukasi",children:"Edukasi"}),(0,r.jsx)("option",{value:"Berita",children:"Berita Gunung"})]})]}),(0,r.jsx)("div",{className:"form-actions",children:(0,r.jsx)("button",{type:"submit",className:"btn-save-artikel",disabled:m,children:m?"Menyimpan...":"Simpan Artikel"})})]}),(0,r.jsxs)("div",{className:"widget-card-artikel-settings",children:[(0,r.jsx)("h3",{children:"Foto Utama"}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("div",{className:"foto-upload-container-artikel",onClick:()=>document.getElementById("fotoUtama").click(),children:d?(0,r.jsx)("img",{src:d,alt:"Preview",className:"foto-preview-artikel"}):(0,r.jsxs)("div",{className:"foto-placeholder-artikel",children:[(0,r.jsx)("i",{className:"bi bi-image-fill"}),(0,r.jsx)("p",{children:"Klik untuk memilih foto"}),(0,r.jsx)("span",{children:"Rekomendasi 1200x800px"})]})}),(0,r.jsx)("input",{type:"file",id:"fotoUtama",name:"fotoUtama",onChange:e=>{const t=e.target.files[0];t&&t.type.startsWith("image/")?(u(t),h(URL.createObjectURL(t))):l.oR.warn("Silakan pilih file gambar.")},accept:"image/png, image/jpeg, image/webp",style:{display:"none"}})]})]})]})]})]})}}}]);
//# sourceMappingURL=659.b20be372.chunk.js.map