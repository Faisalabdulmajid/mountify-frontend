"use strict";(self.webpackChunkspk_gunung=self.webpackChunkspk_gunung||[]).push([[685],{698:(e,a,t)=>{t.d(a,{A:()=>n});t(5043);var i=t(579);const n=e=>{let{title:a,onAddClick:t,addLabel:n="Tambah",addIcon:s=(0,i.jsx)("i",{className:"bi bi-plus-lg"}),children:l}=e;return(0,i.jsxs)("div",{className:"controls-container",children:[(0,i.jsxs)("div",{className:"header-row",children:[(0,i.jsx)("h1",{className:"page-title",children:a}),t&&(0,i.jsxs)("button",{className:"btn-add-new",onClick:t,children:[s," ",n]})]}),l]})}},2062:(e,a,t)=>{t.d(a,{A:()=>n});t(5043);var i=t(579);const n=e=>{let{currentPage:a,totalPages:t,itemsPerPage:n,totalItems:s,onPageChange:l,onItemsPerPageChange:r,indexOfFirstItem:c,currentItemsLength:d}=e;const o=e=>{e>0&&e<=t&&l(e)};return(0,i.jsxs)("div",{className:"pagination",children:[(0,i.jsxs)("div",{className:"pagination-info",children:[(0,i.jsx)("span",{children:"Baris per halaman:"}),(0,i.jsxs)("select",{value:n,onChange:e=>{r(parseInt(e.target.value,10))},className:"items-per-page-select",children:[(0,i.jsx)("option",{value:5,children:"5"}),(0,i.jsx)("option",{value:10,children:"10"}),(0,i.jsx)("option",{value:20,children:"20"}),(0,i.jsx)("option",{value:50,children:"50"}),(0,i.jsx)("option",{value:100,children:"100"})]}),(0,i.jsxs)("span",{style:{marginLeft:"15px"},children:["Menampilkan ",d>0?c+1:0,"-",c+d," dari ",s," data"]})]}),(0,i.jsxs)("div",{className:"pagination-controls",children:[(0,i.jsx)("button",{onClick:()=>o(a-1),disabled:1===a,children:"Sebelumnya"}),(0,i.jsxs)("span",{children:["Halaman ",a," dari ",t||1]}),(0,i.jsx)("button",{onClick:()=>o(a+1),disabled:a===t||0===t,children:"Selanjutnya"})]})]})}},6681:()=>{},9645:()=>{},9685:(e,a,t)=>{t.r(a),t.d(a,{default:()=>m});var i=t(5043),n=t(1283),s=t(7488),l=(t(2342),t(64)),r=t.n(l),c=(t(6681),t(698)),d=(t(9645),t(2062)),o=t(579);const h=e=>{let{searchTerm:a,setSearchTerm:t,tipeFilter:i,setTipeFilter:n,jalurFilter:s,setJalurFilter:l,airFilter:r,setAirFilter:c,uniqueTipeList:d,jalurList:h,filterJalurId:u,onShowAllPoi:m}=e;return(0,o.jsxs)("div",{className:"toolbar",children:[(0,o.jsx)("div",{className:"search-container",children:(0,o.jsxs)("div",{className:"input-wrapper-icon",children:[(0,o.jsx)("i",{className:"bi bi-search"}),(0,o.jsx)("input",{type:"text",placeholder:"Cari POI (nama, gunung, jalur)...",value:a,onChange:e=>t(e.target.value)})]})}),(0,o.jsxs)("div",{className:"filter-container",children:[(0,o.jsxs)("div",{className:"filter-group",children:[(0,o.jsx)("label",{children:"Tipe:"}),(0,o.jsxs)("select",{value:i,onChange:e=>n(e.target.value),children:[(0,o.jsx)("option",{value:"Semua",children:"Semua Tipe"}),d.map(e=>(0,o.jsx)("option",{value:e,children:e},e))]})]}),(0,o.jsxs)("div",{className:"filter-group",children:[(0,o.jsx)("label",{children:"Jalur:"}),(0,o.jsxs)("select",{value:s,onChange:e=>l(e.target.value),disabled:!!u,children:[(0,o.jsx)("option",{value:"Semua",children:"Semua Jalur"}),h.map(e=>(0,o.jsxs)("option",{value:e.id_jalur,children:[e.nama_jalur," (",e.nama_gunung,")"]},e.id_jalur))]})]}),(0,o.jsxs)("div",{className:"filter-group",children:[(0,o.jsx)("label",{children:"Sumber Air:"}),(0,o.jsxs)("select",{value:r,onChange:e=>c(e.target.value),children:[(0,o.jsx)("option",{value:"Semua",children:"Semua"}),(0,o.jsx)("option",{value:"Tersedia",children:"Tersedia"}),(0,o.jsx)("option",{value:"Tidak Ada",children:"Tidak Ada"})]})]}),u&&(0,o.jsx)("button",{className:"btn-secondary",onClick:m,children:"Tampilkan Semua POI"})]})]})},u="http://localhost:5000";const m=function(){const e=(0,n.Zp)(),[a]=(0,n.ok)(),t=a.get("jalurId"),[l,m]=(0,i.useState)([]),[j,x]=(0,i.useState)([]),[p,g]=(0,i.useState)(!0),[v,k]=(0,i.useState)(""),[b,f]=(0,i.useState)("Semua"),[N,w]=(0,i.useState)("Semua"),[S,C]=(0,i.useState)("Semua"),[P,I]=(0,i.useState)(1),[T,_]=(0,i.useState)(10),A=async()=>{g(!0);try{const e=localStorage.getItem("token"),[a,t]=await Promise.all([fetch("".concat(u,"/api/admin/poi"),{headers:{Authorization:"Bearer ".concat(e)}}),fetch("".concat(u,"/api/admin/jalur"),{headers:{Authorization:"Bearer ".concat(e)}})]);if(!a.ok)throw new Error("Gagal mengambil data POI dari server");if(!t.ok)throw new Error("Gagal mengambil data jalur dari server");const i=await a.json(),n=await t.json();m(i),x(n)}catch(e){s.oR.error(e.message)}finally{g(!1)}};(0,i.useEffect)(()=>{A()},[]),(0,i.useEffect)(()=>{I(1)},[T,v,b,N,S]);const y=(0,i.useMemo)(()=>[...new Set(l.map(e=>e.tipe_titik).filter(Boolean))],[l]),F=(0,i.useMemo)(()=>{let e=[...l];if(t&&(e=e.filter(e=>e.id_jalur===parseInt(t,10))),"Semua"!==b&&(e=e.filter(e=>e.tipe_titik===b)),"Semua"!==N&&(e=e.filter(e=>e.id_jalur===parseInt(N))),"Tersedia"===S?e=e.filter(e=>!0===e.ketersediaan_air):"Tidak Ada"===S&&(e=e.filter(e=>!e.ketersediaan_air)),v){const a=v.toLowerCase();e=e.filter(e=>e.nama_titik.toLowerCase().includes(a)||e.nama_gunung&&e.nama_gunung.toLowerCase().includes(a)||e.nama_jalur&&e.nama_jalur.toLowerCase().includes(a))}return e},[l,v,t,b,N,S]),L=P*T,O=L-T,B=F.slice(O,L),E=Math.ceil(F.length/T);return p?(0,o.jsx)("div",{className:"loading-container",children:"Memuat data POI..."}):(0,o.jsxs)("div",{className:"poi-management-page",children:[(0,o.jsx)(s.N9,{position:"top-right",autoClose:3e3}),(0,o.jsx)(c.A,{title:"Manajemen Titik Penting (POI)",addLabel:"Tambah POI Baru",onAddClick:()=>e("/admin/poi/new")}),(0,o.jsx)(h,{searchTerm:v,setSearchTerm:k,tipeFilter:b,setTipeFilter:f,jalurFilter:N,setJalurFilter:w,airFilter:S,setAirFilter:C,uniqueTipeList:y,jalurList:j,filterJalurId:t,onShowAllPoi:()=>e("/admin/poi")}),(0,o.jsx)("div",{className:"table-container",children:(0,o.jsxs)("table",{className:"data-table",children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{style:{width:"8%"},children:"No"}),(0,o.jsx)("th",{style:{width:"18%"},children:(0,o.jsx)("div",{className:"header-cell-content",children:(0,o.jsx)("span",{children:"Nama POI"})})}),(0,o.jsx)("th",{style:{width:"12%"},children:(0,o.jsx)("div",{className:"header-cell-content",children:(0,o.jsx)("span",{children:"Tipe"})})}),(0,o.jsx)("th",{style:{width:"12%"},children:(0,o.jsx)("div",{className:"header-cell-content",children:(0,o.jsx)("span",{children:"Sumber Air"})})}),(0,o.jsx)("th",{style:{width:"20%"},children:(0,o.jsx)("div",{className:"header-cell-content",children:(0,o.jsx)("span",{children:"Gunung & Jalur"})})}),(0,o.jsx)("th",{style:{width:"12%"},children:(0,o.jsx)("div",{className:"header-cell-content",children:(0,o.jsx)("span",{children:"Koordinat"})})}),(0,o.jsx)("th",{style:{width:"18%"},children:"Aksi"})]})}),(0,o.jsx)("tbody",{children:B.length>0?B.map((a,t)=>(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:O+t+1}),(0,o.jsx)("td",{children:a.nama_titik}),(0,o.jsx)("td",{children:a.tipe_titik}),(0,o.jsx)("td",{children:(0,o.jsx)("span",{className:"water-badge ".concat(a.ketersediaan_air?"available":"unavailable"),children:a.ketersediaan_air?"Tersedia":"Tidak Ada"})}),(0,o.jsx)("td",{children:(0,o.jsxs)("div",{className:"poi-location",children:[(0,o.jsx)("span",{className:"poi-gunung",children:a.nama_gunung||"N/A"}),(0,o.jsx)("span",{className:"poi-jalur",children:a.nama_jalur||"Tidak terikat"})]})}),(0,o.jsx)("td",{children:a.koordinat||"-"}),(0,o.jsx)("td",{children:(0,o.jsxs)("div",{className:"action-buttons",children:[(0,o.jsx)("button",{className:"action-btn btn-edit",title:"Edit POI",onClick:()=>e("/admin/poi/edit/".concat(a.id_titik)),children:(0,o.jsx)("i",{className:"bi bi-pencil-fill"})}),(0,o.jsx)("button",{className:"action-btn btn-delete",title:"Hapus POI",onClick:()=>(async e=>{r().fire({title:"Apakah Anda yakin?",text:"Data POI yang dihapus tidak dapat dikembalikan!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Ya, hapus!",cancelButtonText:"Batal"}).then(async a=>{if(a.isConfirmed)try{const a=localStorage.getItem("token"),t=await fetch("".concat(u,"/api/admin/poi/").concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(a)}}),i=await t.json();if(!t.ok)throw new Error(i.message);r().fire("Dihapus!",i.message,"success"),A()}catch(t){s.oR.error(t.message)}})})(a.id_titik),children:(0,o.jsx)("i",{className:"bi bi-trash-fill"})})]})})]},a.id_titik)):(0,o.jsx)("tr",{children:(0,o.jsx)("td",{colSpan:"7",style:{textAlign:"center",padding:"20px"},children:"Tidak ada data POI yang cocok dengan filter."})})})]})}),(0,o.jsx)(d.A,{currentPage:P,totalPages:E,itemsPerPage:T,totalItems:F.length,onPageChange:e=>I(e),onItemsPerPageChange:e=>{_(e),I(1)},indexOfFirstItem:O,currentItemsLength:B.length})]})}}}]);
//# sourceMappingURL=685.d591eedb.chunk.js.map