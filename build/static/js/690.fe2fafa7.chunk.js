"use strict";(self.webpackChunkspk_gunung=self.webpackChunkspk_gunung||[]).push([[690],{698:(a,t,e)=>{e.d(t,{A:()=>s});e(5043);var n=e(579);const s=a=>{let{title:t,onAddClick:e,addLabel:s="Tambah",addIcon:i=(0,n.jsx)("i",{className:"bi bi-plus-lg"}),children:c}=a;return(0,n.jsxs)("div",{className:"controls-container",children:[(0,n.jsxs)("div",{className:"header-row",children:[(0,n.jsx)("h1",{className:"page-title",children:t}),e&&(0,n.jsxs)("button",{className:"btn-add-new",onClick:e,children:[i," ",s]})]}),c]})}},5071:(a,t,e)=>{e.d(t,{zY:()=>n.A});var n=e(698);e(5043),e(579)},6681:()=>{},8690:(a,t,e)=>{e.r(t),e.d(t,{default:()=>h});var n=e(5043),s=e(7488),i=(e(2342),e(64)),c=e.n(i),r=(e(6681),e(5071)),o=(e(9645),e(579));const l=a=>{let{searchTerm:t,setSearchTerm:e}=a;return(0,o.jsx)("div",{className:"toolbar",children:(0,o.jsx)("div",{className:"search-container",children:(0,o.jsxs)("div",{className:"input-wrapper-icon",children:[(0,o.jsx)("i",{className:"bi bi-search"}),(0,o.jsx)("input",{type:"text",placeholder:"Cari nama tag...",value:t,onChange:a=>e(a.target.value)})]})})})},d="http://localhost:5000/api/admin";const h=function(){const[a,t]=(0,n.useState)([]),[e,i]=(0,n.useState)(!0),[h,m]=(0,n.useState)(""),u=async()=>{i(!0);try{const a=localStorage.getItem("token"),e=await fetch("".concat(d,"/tags"),{headers:{Authorization:"Bearer ".concat(a)}});if(!e.ok)throw new Error("Gagal mengambil data tags.");const n=await e.json();t(n)}catch(a){s.oR.error(a.message)}finally{i(!1)}};(0,n.useEffect)(()=>{u()},[]);const g=(0,n.useMemo)(()=>a.filter(a=>a.nama_tag.toLowerCase().includes(h.toLowerCase())),[a,h]);return(0,o.jsxs)("div",{className:"tags-management-page",children:[(0,o.jsx)(s.N9,{position:"top-right",autoClose:3e3,hideProgressBar:!1}),(0,o.jsx)(r.zY,{title:"Manajemen Tags",addLabel:"Tambah Tag Baru",onAddClick:async()=>{const{value:a}=await c().fire({title:"Tambah Tag Baru",input:"text",inputLabel:"Nama Tag",inputPlaceholder:"Masukkan nama tag baru...",showCancelButton:!0,confirmButtonText:"Simpan",cancelButtonText:"Batal",inputValidator:a=>{if(!a)return"Nama tag tidak boleh kosong!"}});if(a)try{const t=localStorage.getItem("token"),e=await fetch("".concat(d,"/tags"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({nama_tag:a})}),n=await e.json();if(!e.ok)throw new Error(n.message);s.oR.success(n.message),u()}catch(t){s.oR.error(t.message)}}}),(0,o.jsx)(l,{searchTerm:h,setSearchTerm:m}),(0,o.jsx)("div",{className:"table-container",children:(0,o.jsxs)("table",{className:"data-table",children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{style:{width:"50%"},children:(0,o.jsx)("div",{className:"header-cell-content",children:(0,o.jsx)("span",{children:"Nama Tag"})})}),(0,o.jsx)("th",{style:{width:"30%"},children:(0,o.jsx)("div",{className:"header-cell-content",children:(0,o.jsx)("span",{children:"Jumlah Artikel"})})}),(0,o.jsx)("th",{style:{width:"20%"},children:"Aksi"})]})}),(0,o.jsx)("tbody",{children:e?(0,o.jsx)("tr",{children:(0,o.jsx)("td",{colSpan:"3",className:"text-center",children:"Memuat data..."})}):g.length>0?g.map(a=>(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:a.nama_tag}),(0,o.jsxs)("td",{children:[a.jumlah_artikel," artikel"]}),(0,o.jsx)("td",{children:(0,o.jsxs)("div",{className:"action-buttons",children:[(0,o.jsx)("button",{title:"Edit",className:"action-btn btn-edit",onClick:()=>(async(a,t)=>{const{value:e}=await c().fire({title:"Edit Nama Tag",input:"text",inputLabel:"Nama Tag",inputValue:t,showCancelButton:!0,confirmButtonText:"Update",cancelButtonText:"Batal",inputValidator:a=>{if(!a)return"Nama tag tidak boleh kosong!"}});if(e&&e!==t)try{const t=localStorage.getItem("token"),n=await fetch("".concat(d,"/tags/").concat(a),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({nama_tag:e})}),i=await n.json();if(!n.ok)throw new Error(i.message);s.oR.success(i.message),u()}catch(n){s.oR.error(n.message)}})(a.id_tag,a.nama_tag),children:(0,o.jsx)("i",{className:"bi bi-pencil-fill"})}),(0,o.jsx)("button",{title:"Hapus",className:"action-btn btn-delete",onClick:()=>{return t=a.id_tag,e=a.nama_tag,void c().fire({title:"Apakah Anda yakin?",text:'Menghapus tag "'.concat(e,'" juga akan melepaskan kaitannya dari semua artikel.'),icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Ya, hapus!",cancelButtonText:"Batal"}).then(async a=>{if(a.isConfirmed)try{const a=localStorage.getItem("token"),e=await fetch("".concat(d,"/tags/").concat(t),{method:"DELETE",headers:{Authorization:"Bearer ".concat(a)}}),n=await e.json();if(!e.ok)throw new Error(n.message);s.oR.success(n.message),u()}catch(e){s.oR.error(e.message)}});var t,e},children:(0,o.jsx)("i",{className:"bi bi-trash-fill"})})]})})]},a.id_tag)):(0,o.jsx)("tr",{children:(0,o.jsx)("td",{colSpan:"3",className:"text-center",children:"Tidak ada data tags."})})})]})})]})}},9645:()=>{}}]);
//# sourceMappingURL=690.fe2fafa7.chunk.js.map