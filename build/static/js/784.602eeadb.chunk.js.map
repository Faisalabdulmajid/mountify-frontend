{"version":3,"file":"static/js/784.602eeadb.chunk.js","mappings":"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","sources":["components/common/PageHeader/PageHeader.js","components/common/Pagination/Pagination.js","pages/admin/pengguna/KelolaPengguna.js"],"sourcesContent":["import React from \"react\";\r\n\r\nconst PageHeader = ({\r\n  title,\r\n  onAddClick,\r\n  addLabel = \"Tambah\",\r\n  addIcon = <i className=\"bi bi-plus-lg\"></i>,\r\n  children,\r\n}) => {\r\n  return (\r\n    <div className=\"controls-container\">\r\n      <div className=\"header-row\">\r\n        <h1 className=\"page-title\">{title}</h1>\r\n        {onAddClick && (\r\n          <button className=\"btn-add-new\" onClick={onAddClick}>\r\n            {addIcon} {addLabel}\r\n          </button>\r\n        )}\r\n      </div>\r\n      {children}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PageHeader;\r\n","// src/components/common/Pagination/Pagination.js\r\nimport React from \"react\";\r\nimport \"./Pagination.css\";\r\n\r\nconst Pagination = ({\r\n  currentPage,\r\n  totalPages,\r\n  itemsPerPage,\r\n  totalItems,\r\n  onPageChange,\r\n  onItemsPerPageChange,\r\n  indexOfFirstItem,\r\n  currentItemsLength,\r\n}) => {\r\n  const handleItemsPerPageChange = (event) => {\r\n    onItemsPerPageChange(parseInt(event.target.value, 10));\r\n  };\r\n\r\n  const paginate = (pageNumber) => {\r\n    if (pageNumber > 0 && pageNumber <= totalPages) {\r\n      onPageChange(pageNumber);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"pagination\">\r\n      <div className=\"pagination-info\">\r\n        <span>Baris per halaman:</span>\r\n        <select\r\n          value={itemsPerPage}\r\n          onChange={handleItemsPerPageChange}\r\n          className=\"items-per-page-select\"\r\n        >\r\n          <option value={5}>5</option>\r\n          <option value={10}>10</option>\r\n          <option value={20}>20</option>\r\n          <option value={50}>50</option>\r\n          <option value={100}>100</option>\r\n        </select>\r\n        <span style={{ marginLeft: \"15px\" }}>\r\n          Menampilkan {currentItemsLength > 0 ? indexOfFirstItem + 1 : 0}-\r\n          {indexOfFirstItem + currentItemsLength} dari {totalItems} data\r\n        </span>\r\n      </div>\r\n      <div className=\"pagination-controls\">\r\n        <button\r\n          onClick={() => paginate(currentPage - 1)}\r\n          disabled={currentPage === 1}\r\n        >\r\n          Sebelumnya\r\n        </button>\r\n        <span>\r\n          Halaman {currentPage} dari {totalPages || 1}\r\n        </span>\r\n        <button\r\n          onClick={() => paginate(currentPage + 1)}\r\n          disabled={currentPage === totalPages || totalPages === 0}\r\n        >\r\n          Selanjutnya\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Pagination;\r\n","// KelolaPengguna.js (Menampilkan Semua Data Pengguna)\r\nimport React, { useState, useEffect, useMemo } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport \"./KelolaPengguna.css\";\r\nimport Swal from \"sweetalert2\";\r\nimport \"sweetalert2/dist/sweetalert2.min.css\";\r\nimport { ToastContainer, toast } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\nimport { PageHeader } from \"../../../components/common/PageHeader\";\r\nimport \"../../../components/common/PageHeader/PageHeader.css\";\r\nimport Pagination from \"../../../components/common/Pagination\";\r\n\r\nconst API_BASE_URL = \"http://localhost:5000\";\r\n\r\nfunction KelolaPengguna() {\r\n  const navigate = useNavigate();\r\n  const [users, setUsers] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const fetchUsers = async () => {\r\n      setLoading(true);\r\n      setError(null);\r\n      try {\r\n        const token = localStorage.getItem(\"token\");\r\n        if (!token) {\r\n          throw new Error(\"Akses ditolak. Silakan login kembali.\");\r\n        }\r\n        const response = await fetch(`${API_BASE_URL}/api/admin/users`, {\r\n          headers: { Authorization: `Bearer ${token}` },\r\n        });\r\n\r\n        if (!response.ok) {\r\n          const errData = await response.json();\r\n          throw new Error(errData.message || \"Gagal mengambil data pengguna.\");\r\n        }\r\n\r\n        const data = await response.json();\r\n        const formattedUsers = data.map((user) => ({\r\n          id_user: user.id_user,\r\n          name: user.nama_lengkap,\r\n          username: user.username,\r\n          email: user.email,\r\n          peran: user.peran,\r\n          status: user.status,\r\n          joinedDate: user.created_at,\r\n          // Gunakan url_foto_profil asli, jika tidak ada tampilkan string kosong (bukan dummy)\r\n          avatar: user.url_foto_profil || \"\",\r\n          nomor_telepon: user.nomor_telepon,\r\n          domisili: user.domisili,\r\n          instansi: user.instansi,\r\n        }));\r\n        setUsers(formattedUsers);\r\n      } catch (error) {\r\n        console.error(\"Error fetching users:\", error);\r\n        setError(error.message);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchUsers();\r\n  }, []);\r\n\r\n  const [searchTerm, setSearchTerm] = useState(\"\");\r\n  const [roleFilter, setRoleFilter] = useState(\"Semua\");\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [usersPerPage, setUsersPerPage] = useState(5);\r\n\r\n  const filteredUsers = useMemo(() => {\r\n    return users.filter((user) => {\r\n      const searchLower = searchTerm.toLowerCase();\r\n      const matchesSearch =\r\n        user.name.toLowerCase().includes(searchLower) ||\r\n        user.email.toLowerCase().includes(searchLower) ||\r\n        (user.username && user.username.toLowerCase().includes(searchLower)) ||\r\n        (user.nomor_telepon && user.nomor_telepon.includes(searchTerm)) ||\r\n        (user.domisili && user.domisili.toLowerCase().includes(searchLower)) ||\r\n        (user.instansi && user.instansi.toLowerCase().includes(searchLower));\r\n\r\n      const matchesFilter = roleFilter === \"Semua\" || user.peran === roleFilter;\r\n      return matchesSearch && matchesFilter;\r\n    });\r\n  }, [users, searchTerm, roleFilter]);\r\n\r\n  const indexOfLastUser = currentPage * usersPerPage;\r\n  const indexOfFirstUser = indexOfLastUser - usersPerPage;\r\n  const currentUsers = filteredUsers.slice(indexOfFirstUser, indexOfLastUser);\r\n  const totalPages = Math.ceil(filteredUsers.length / usersPerPage);\r\n\r\n  // Ambil CSRF token dari endpoint\r\n  const fetchCSRFToken = async () => {\r\n    try {\r\n      const response = await fetch(`${API_BASE_URL}/api/csrf-token`, {\r\n        credentials: \"include\", // penting agar session cookie dikirim\r\n      });\r\n      if (!response.ok) throw new Error(\"Gagal mengambil CSRF token\");\r\n      const data = await response.json();\r\n      return data.csrfToken;\r\n    } catch (err) {\r\n      return null;\r\n    }\r\n  };\r\n\r\n  const handleDeleteUser = async (id) => {\r\n    const userToDelete = users.find((u) => u.id_user === id);\r\n    if (!userToDelete) {\r\n      toast.error(\"Pengguna tidak ditemukan!\");\r\n      return;\r\n    }\r\n\r\n    const result = await Swal.fire({\r\n      title: `Hapus Pengguna?`,\r\n      text: `Apakah Anda yakin ingin menghapus pengguna: ${userToDelete.name}?`,\r\n      icon: \"warning\",\r\n      showCancelButton: true,\r\n      confirmButtonColor: \"#d33\",\r\n      cancelButtonColor: \"#3085d6\",\r\n      confirmButtonText: \"Ya, hapus!\",\r\n      cancelButtonText: \"Batal\",\r\n    });\r\n\r\n    if (result.isConfirmed) {\r\n      try {\r\n        const token = localStorage.getItem(\"token\");\r\n        if (!token) {\r\n          setError(\"Akses ditolak. Sesi Anda mungkin telah berakhir.\");\r\n          toast.error(\"Akses ditolak. Sesi Anda mungkin telah berakhir.\");\r\n          return;\r\n        }\r\n        // Ambil CSRF token dari endpoint\r\n        const csrfToken = await fetchCSRFToken();\r\n        if (!csrfToken) {\r\n          toast.error(\"Gagal mengambil CSRF token.\");\r\n          return;\r\n        }\r\n        const response = await fetch(`${API_BASE_URL}/api/admin/users/${id}`, {\r\n          method: \"DELETE\",\r\n          headers: {\r\n            Authorization: `Bearer ${token}`,\r\n            \"X-CSRF-Token\": csrfToken,\r\n          },\r\n          credentials: \"include\", // penting agar session cookie dikirim\r\n        });\r\n\r\n        const data = await response.json();\r\n\r\n        if (!response.ok) {\r\n          throw new Error(data.message || \"Gagal menghapus pengguna.\");\r\n        }\r\n\r\n        toast.success(data.message || \"Pengguna berhasil dihapus.\");\r\n        setUsers((currentUsers) =>\r\n          currentUsers.filter((user) => user.id_user !== id)\r\n        );\r\n      } catch (error) {\r\n        console.error(\"Error deleting user:\", error);\r\n        setError(error.message);\r\n        toast.error(\r\n          error.message || \"Terjadi kesalahan saat menghapus pengguna.\"\r\n        );\r\n      }\r\n    }\r\n  };\r\n\r\n  // Ambil peran user login dari localStorage\r\n  const currentUserRole = localStorage.getItem(\"peran\");\r\n\r\n  return (\r\n    <div className=\"user-management-page\">\r\n      <PageHeader\r\n        title=\"Manajemen Pengguna\"\r\n        addLabel={\r\n          currentUserRole === \"superadmin\" || currentUserRole === \"admin\"\r\n            ? \"Tambah Pengguna Baru\"\r\n            : undefined\r\n        }\r\n        onAddClick={() => navigate(\"/admin/users/new\")}\r\n      >\r\n        <div className=\"toolbar\">\r\n          <div className=\"search-container\">\r\n            <i className=\"bi bi-search\"></i>\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"Cari (nama, email, username, no.telp, domisili, instansi)...\"\r\n              value={searchTerm}\r\n              onChange={(e) => {\r\n                setSearchTerm(e.target.value);\r\n                setCurrentPage(1);\r\n              }}\r\n            />\r\n          </div>\r\n          <select\r\n            value={roleFilter}\r\n            onChange={(e) => {\r\n              setRoleFilter(e.target.value);\r\n              setCurrentPage(1);\r\n            }}\r\n          >\r\n            <option value=\"Semua\">Semua Peran</option>\r\n            <option value=\"superadmin\">Super Admin</option>\r\n            <option value=\"admin\">Admin</option>\r\n            <option value=\"user\">User</option>\r\n          </select>\r\n        </div>\r\n      </PageHeader>\r\n\r\n      <div className=\"table-container\">\r\n        <table className=\"user-table\">\r\n          <thead>\r\n            <tr>\r\n              <th style={{ width: \"18%\" }}>\r\n                <div className=\"header-cell-content\">\r\n                  <span>Pengguna</span>\r\n                </div>\r\n              </th>\r\n              <th style={{ width: \"12%\" }}>\r\n                <div className=\"header-cell-content\">\r\n                  <span>No. Telepon</span>\r\n                </div>\r\n              </th>\r\n              <th style={{ width: \"12%\" }}>\r\n                <div className=\"header-cell-content\">\r\n                  <span>Domisili</span>\r\n                </div>\r\n              </th>\r\n              <th style={{ width: \"12%\" }}>\r\n                <div className=\"header-cell-content\">\r\n                  <span>Instansi</span>\r\n                </div>\r\n              </th>\r\n              <th style={{ width: \"10%\" }}>\r\n                <div className=\"header-cell-content\">\r\n                  <span>Peran</span>\r\n                </div>\r\n              </th>\r\n              <th style={{ width: \"10%\" }}>\r\n                <div className=\"header-cell-content\">\r\n                  <span>Status</span>\r\n                </div>\r\n              </th>\r\n              <th style={{ width: \"12%\" }}>\r\n                <div className=\"header-cell-content\">\r\n                  <span>Bergabung</span>\r\n                </div>\r\n              </th>\r\n              <th style={{ width: \"14%\" }}>Aksi</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {loading ? (\r\n              <tr>\r\n                <td\r\n                  colSpan=\"9\"\r\n                  style={{ textAlign: \"center\", padding: \"20px\" }}\r\n                >\r\n                  Memuat data pengguna...\r\n                </td>\r\n              </tr>\r\n            ) : error ? (\r\n              <tr>\r\n                <td\r\n                  colSpan=\"9\"\r\n                  style={{ textAlign: \"center\", padding: \"20px\", color: \"red\" }}\r\n                >\r\n                  Error: {error}\r\n                </td>\r\n              </tr>\r\n            ) : currentUsers.length > 0 ? (\r\n              currentUsers.map((user) => (\r\n                <tr key={user.id_user}>\r\n                  <td>\r\n                    <div className=\"user-info-cell\">\r\n                      {/* Avatar dihilangkan */}\r\n                      <div>\r\n                        <div className=\"user-name\">{user.name}</div>\r\n                        <div className=\"user-email\">{user.email}</div>\r\n                      </div>\r\n                    </div>\r\n                  </td>\r\n                  <td>{user.nomor_telepon || \"-\"}</td>\r\n                  <td>{user.domisili || \"-\"}</td>\r\n                  <td>{user.instansi || \"-\"}</td>\r\n                  <td>{user.peran}</td>\r\n                  <td>\r\n                    <span\r\n                      className={`status-badge status-${user.status\r\n                        .toLowerCase()\r\n                        .replace(\" \", \"-\")}`}\r\n                    >\r\n                      {user.status}\r\n                    </span>\r\n                  </td>\r\n                  <td>\r\n                    {new Date(user.joinedDate).toLocaleDateString(\"id-ID\")}\r\n                  </td>\r\n                  <td>\r\n                    {currentUserRole === \"superadmin\" ||\r\n                    currentUserRole === \"admin\" ? (\r\n                      <div className=\"action-buttons\">\r\n                        <button\r\n                          className=\"action-btn btn-edit\"\r\n                          onClick={() =>\r\n                            navigate(`/admin/users/edit/${user.id_user}`)\r\n                          }\r\n                        >\r\n                          <i className=\"bi bi-pencil-fill\"></i>\r\n                        </button>\r\n                        <button\r\n                          className=\"action-btn btn-delete\"\r\n                          onClick={() => handleDeleteUser(user.id_user)}\r\n                        >\r\n                          <i className=\"bi bi-trash-fill\"></i>\r\n                        </button>\r\n                      </div>\r\n                    ) : (\r\n                      <span style={{ color: \"#aaa\", fontSize: \"12px\" }}>-</span>\r\n                    )}\r\n                  </td>\r\n                </tr>\r\n              ))\r\n            ) : (\r\n              <tr>\r\n                <td\r\n                  colSpan=\"9\"\r\n                  style={{ textAlign: \"center\", padding: \"20px\" }}\r\n                >\r\n                  Tidak ada pengguna yang cocok dengan kriteria Anda.\r\n                </td>\r\n              </tr>\r\n            )}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n      <ToastContainer position=\"top-right\" autoClose={3000} />\r\n\r\n      <Pagination\r\n        currentPage={currentPage}\r\n        totalPages={totalPages}\r\n        itemsPerPage={usersPerPage}\r\n        totalItems={filteredUsers.length}\r\n        onPageChange={(pageNumber) => setCurrentPage(pageNumber)}\r\n        onItemsPerPageChange={(value) => {\r\n          setUsersPerPage(value);\r\n          setCurrentPage(1);\r\n        }}\r\n        indexOfFirstItem={indexOfFirstUser}\r\n        currentItemsLength={currentUsers.length}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default KelolaPengguna;\r\n"],"names":["_ref","title","onAddClick","addLabel","addIcon","_jsx","className","children","_jsxs","onClick","currentPage","totalPages","itemsPerPage","totalItems","onPageChange","onItemsPerPageChange","indexOfFirstItem","currentItemsLength","paginate","pageNumber","value","onChange","event","parseInt","target","style","marginLeft","disabled","API_BASE_URL","navigate","useNavigate","users","setUsers","useState","loading","setLoading","error","setError","useEffect","async","token","localStorage","getItem","Error","response","fetch","concat","headers","Authorization","ok","errData","json","message","formattedUsers","map","user","id_user","name","nama_lengkap","username","email","peran","status","joinedDate","created_at","avatar","url_foto_profil","nomor_telepon","domisili","instansi","console","fetchUsers","searchTerm","setSearchTerm","roleFilter","setRoleFilter","setCurrentPage","usersPerPage","setUsersPerPage","filteredUsers","useMemo","filter","searchLower","toLowerCase","matchesSearch","includes","matchesFilter","indexOfLastUser","indexOfFirstUser","currentUsers","slice","Math","ceil","length","handleDeleteUser","userToDelete","find","u","id","toast","Swal","text","icon","showCancelButton","confirmButtonColor","cancelButtonColor","confirmButtonText","cancelButtonText","isConfirmed","csrfToken","credentials","err","fetchCSRFToken","method","data","success","currentUserRole","PageHeader","undefined","type","placeholder","e","width","colSpan","textAlign","padding","color","replace","Date","toLocaleDateString","fontSize","ToastContainer","position","autoClose","Pagination"],"sourceRoot":""}