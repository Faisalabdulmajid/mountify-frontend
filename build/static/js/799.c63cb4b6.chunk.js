"use strict";(self.webpackChunkspk_gunung=self.webpackChunkspk_gunung||[]).push([[799],{698:(a,e,t)=>{t.d(e,{A:()=>s});t(5043);var n=t(579);const s=a=>{let{title:e,onAddClick:t,addLabel:s="Tambah",addIcon:r=(0,n.jsx)("i",{className:"bi bi-plus-lg"}),children:i}=a;return(0,n.jsxs)("div",{className:"controls-container",children:[(0,n.jsxs)("div",{className:"header-row",children:[(0,n.jsx)("h1",{className:"page-title",children:e}),t&&(0,n.jsxs)("button",{className:"btn-add-new",onClick:t,children:[r," ",s]})]}),i]})}},2795:(a,e,t)=>{t.r(e),t.d(e,{default:()=>d});var n=t(5043),s=t(7488),r=t(64),i=t.n(r),l=(t(2342),t(5071)),o=(t(9645),t(579));const c="http://localhost:5000/api/admin";const d=function(){const[a,e]=(0,n.useState)([]),[t,r]=(0,n.useState)(!0),d=(0,n.useCallback)(async()=>{r(!0);try{const a=localStorage.getItem("token"),t=await fetch("".concat(c,"/laporan-error"),{headers:{Authorization:"Bearer ".concat(a)}});if(!t.ok)throw new Error("Gagal mengambil data laporan.");const n=await t.json();e(n)}catch(a){s.oR.error(a.message)}finally{r(!1)}},[]);return(0,n.useEffect)(()=>{d()},[d]),(0,o.jsxs)("div",{className:"kelola-laporan-page",children:[(0,o.jsx)(s.N9,{position:"top-right",autoClose:3e3}),(0,o.jsx)(l.zY,{title:"Manajemen Laporan Error"}),(0,o.jsx)("div",{className:"table-container",children:(0,o.jsxs)("table",{className:"data-table",children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{children:"Judul Laporan"}),(0,o.jsx)("th",{children:"Pelapor"}),(0,o.jsx)("th",{children:"Status"}),(0,o.jsx)("th",{children:"Prioritas"}),(0,o.jsx)("th",{children:"Tgl Laporan"}),(0,o.jsx)("th",{children:"Aksi"})]})}),(0,o.jsx)("tbody",{children:t?(0,o.jsx)("tr",{children:(0,o.jsx)("td",{colSpan:"6",className:"text-center",children:"Memuat Laporan..."})}):a.length>0?a.map(a=>{return(0,o.jsxs)("tr",{children:[(0,o.jsxs)("td",{className:"laporan-judul",children:[a.judul_laporan,(0,o.jsx)("span",{className:"laporan-page",children:a.halaman_error})]}),(0,o.jsx)("td",{children:a.nama_pelapor||"N/A"}),(0,o.jsx)("td",{children:(0,o.jsxs)("select",{value:a.status_laporan,className:"status-select ".concat((n=a.status_laporan,"status-".concat(n.toLowerCase().replace(/\s+/g,"-")))),onChange:e=>(async(a,e,t,n)=>{const r=localStorage.getItem("token");try{const i=await fetch("".concat(c,"/laporan-error/").concat(a),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)},body:JSON.stringify({status_laporan:e,prioritas:t,catatan_admin:n})}),l=await i.json();if(!i.ok)throw new Error(l.message);s.oR.success("Status laporan diperbarui!"),d()}catch(i){s.oR.error(i.message)}})(a.id_laporan,e.target.value,a.prioritas,a.catatan_admin),children:[(0,o.jsx)("option",{value:"Baru",children:"Baru"}),(0,o.jsx)("option",{value:"Ditinjau",children:"Ditinjau"}),(0,o.jsx)("option",{value:"Selesai",children:"Selesai"})]})}),(0,o.jsx)("td",{children:(0,o.jsx)("span",{className:"prioritas-badge ".concat((t=a.prioritas,"prio-".concat(t.toLowerCase()))),children:a.prioritas})}),(0,o.jsx)("td",{children:(e=a.dilaporkan_pada,e?new Date(e).toLocaleString("id-ID",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"-")}),(0,o.jsx)("td",{children:(0,o.jsxs)("div",{className:"action-buttons",children:[(0,o.jsx)("button",{className:"action-btn btn-view",onClick:()=>{},children:(0,o.jsx)("i",{className:"bi bi-eye-fill"})}),(0,o.jsx)("button",{className:"action-btn btn-delete",onClick:()=>{return a.id_laporan,e=a.judul_laporan,void i().fire({title:"Hapus Laporan Ini?",text:'Anda akan menghapus laporan "'.concat(e,'".'),icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonText:"Batal"}).then(async a=>{a.isConfirmed});var e},children:(0,o.jsx)("i",{className:"bi bi-trash-fill"})})]})})]},a.id_laporan);var e,t,n}):(0,o.jsx)("tr",{children:(0,o.jsx)("td",{colSpan:"6",className:"text-center",children:"Tidak ada laporan masuk."})})})]})})]})}},5071:(a,e,t)=>{t.d(e,{zY:()=>n.A});var n=t(698);t(5043),t(579)},9645:()=>{}}]);
//# sourceMappingURL=799.c63cb4b6.chunk.js.map