{"version":3,"file":"static/js/799.c63cb4b6.chunk.js","mappings":"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","sources":["components/common/PageHeader/PageHeader.js","pages/admin/laporan/KelolaLaporanError.js"],"sourcesContent":["import React from \"react\";\r\n\r\nconst PageHeader = ({\r\n  title,\r\n  onAddClick,\r\n  addLabel = \"Tambah\",\r\n  addIcon = <i className=\"bi bi-plus-lg\"></i>,\r\n  children,\r\n}) => {\r\n  return (\r\n    <div className=\"controls-container\">\r\n      <div className=\"header-row\">\r\n        <h1 className=\"page-title\">{title}</h1>\r\n        {onAddClick && (\r\n          <button className=\"btn-add-new\" onClick={onAddClick}>\r\n            {addIcon} {addLabel}\r\n          </button>\r\n        )}\r\n      </div>\r\n      {children}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PageHeader;\r\n","// src/pages/admin/laporan/KelolaLaporanError.js\r\n\r\nimport React, { useState, useEffect, useCallback } from \"react\";\r\nimport { toast, ToastContainer } from \"react-toastify\";\r\nimport Swal from \"sweetalert2\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\nimport \"./KelolaLaporanError.css\";\r\nimport { PageHeader } from \"../../../components/common/PageHeader\";\r\nimport \"../../../components/common/PageHeader/PageHeader.css\";\r\n\r\nconst API_BASE_URL = \"http://localhost:5000/api/admin\";\r\n\r\nfunction KelolaLaporanError() {\r\n  const [laporanList, setLaporanList] = useState([]);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n\r\n  const fetchLaporan = useCallback(async () => {\r\n    setIsLoading(true);\r\n    try {\r\n      const token = localStorage.getItem(\"token\");\r\n      const response = await fetch(`${API_BASE_URL}/laporan-error`, {\r\n        headers: { Authorization: `Bearer ${token}` },\r\n      });\r\n      if (!response.ok) throw new Error(\"Gagal mengambil data laporan.\");\r\n      const data = await response.json();\r\n      setLaporanList(data);\r\n    } catch (error) {\r\n      toast.error(error.message);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    fetchLaporan();\r\n  }, [fetchLaporan]);\r\n\r\n  const handleUpdateStatus = async (\r\n    id,\r\n    newStatus,\r\n    currentPrioritas,\r\n    currentCatatan\r\n  ) => {\r\n    const token = localStorage.getItem(\"token\");\r\n    try {\r\n      const response = await fetch(`${API_BASE_URL}/laporan-error/${id}`, {\r\n        method: \"PUT\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n        body: JSON.stringify({\r\n          status_laporan: newStatus,\r\n          prioritas: currentPrioritas,\r\n          catatan_admin: currentCatatan,\r\n        }),\r\n      });\r\n      const result = await response.json();\r\n      if (!response.ok) throw new Error(result.message);\r\n      toast.success(\"Status laporan diperbarui!\");\r\n      fetchLaporan();\r\n    } catch (err) {\r\n      toast.error(err.message);\r\n    }\r\n  };\r\n\r\n  const handleDelete = (id, judul) => {\r\n    Swal.fire({\r\n      title: \"Hapus Laporan Ini?\",\r\n      text: `Anda akan menghapus laporan \"${judul}\".`,\r\n      icon: \"warning\",\r\n      showCancelButton: true,\r\n      confirmButtonColor: \"#d33\",\r\n      cancelButtonText: \"Batal\",\r\n    }).then(async (result) => {\r\n      if (result.isConfirmed) {\r\n        // Lakukan penghapusan\r\n      }\r\n    });\r\n  };\r\n\r\n  const formatDate = (dateString) => {\r\n    if (!dateString) return \"-\";\r\n    return new Date(dateString).toLocaleString(\"id-ID\", {\r\n      day: \"2-digit\",\r\n      month: \"short\",\r\n      year: \"numeric\",\r\n      hour: \"2-digit\",\r\n      minute: \"2-digit\",\r\n    });\r\n  };\r\n\r\n  const getStatusClass = (status) =>\r\n    `status-${status.toLowerCase().replace(/\\s+/g, \"-\")}`;\r\n  const getPrioritasClass = (prio) => `prio-${prio.toLowerCase()}`;\r\n\r\n  return (\r\n    <div className=\"kelola-laporan-page\">\r\n      <ToastContainer position=\"top-right\" autoClose={3000} />\r\n      <PageHeader title=\"Manajemen Laporan Error\" />\r\n      <div className=\"table-container\">\r\n        <table className=\"data-table\">\r\n          <thead>\r\n            <tr>\r\n              <th>Judul Laporan</th>\r\n              <th>Pelapor</th>\r\n              <th>Status</th>\r\n              <th>Prioritas</th>\r\n              <th>Tgl Laporan</th>\r\n              <th>Aksi</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {isLoading ? (\r\n              <tr>\r\n                <td colSpan=\"6\" className=\"text-center\">\r\n                  Memuat Laporan...\r\n                </td>\r\n              </tr>\r\n            ) : laporanList.length > 0 ? (\r\n              laporanList.map((laporan) => (\r\n                <tr key={laporan.id_laporan}>\r\n                  <td className=\"laporan-judul\">\r\n                    {laporan.judul_laporan}\r\n                    <span className=\"laporan-page\">\r\n                      {laporan.halaman_error}\r\n                    </span>\r\n                  </td>\r\n                  <td>{laporan.nama_pelapor || \"N/A\"}</td>\r\n                  <td>\r\n                    <select\r\n                      value={laporan.status_laporan}\r\n                      className={`status-select ${getStatusClass(\r\n                        laporan.status_laporan\r\n                      )}`}\r\n                      onChange={(e) =>\r\n                        handleUpdateStatus(\r\n                          laporan.id_laporan,\r\n                          e.target.value,\r\n                          laporan.prioritas,\r\n                          laporan.catatan_admin\r\n                        )\r\n                      }\r\n                    >\r\n                      <option value=\"Baru\">Baru</option>\r\n                      <option value=\"Ditinjau\">Ditinjau</option>\r\n                      <option value=\"Selesai\">Selesai</option>\r\n                    </select>\r\n                  </td>\r\n                  <td>\r\n                    <span\r\n                      className={`prioritas-badge ${getPrioritasClass(\r\n                        laporan.prioritas\r\n                      )}`}\r\n                    >\r\n                      {laporan.prioritas}\r\n                    </span>\r\n                  </td>\r\n                  <td>{formatDate(laporan.dilaporkan_pada)}</td>\r\n                  <td>\r\n                    <div className=\"action-buttons\">\r\n                      <button\r\n                        className=\"action-btn btn-view\"\r\n                        onClick={() => {\r\n                          /* Logika view detail */\r\n                        }}\r\n                      >\r\n                        <i className=\"bi bi-eye-fill\"></i>\r\n                      </button>\r\n                      <button\r\n                        className=\"action-btn btn-delete\"\r\n                        onClick={() =>\r\n                          handleDelete(\r\n                            laporan.id_laporan,\r\n                            laporan.judul_laporan\r\n                          )\r\n                        }\r\n                      >\r\n                        <i className=\"bi bi-trash-fill\"></i>\r\n                      </button>\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n              ))\r\n            ) : (\r\n              <tr>\r\n                <td colSpan=\"6\" className=\"text-center\">\r\n                  Tidak ada laporan masuk.\r\n                </td>\r\n              </tr>\r\n            )}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default KelolaLaporanError;\r\n"],"names":["_ref","title","onAddClick","addLabel","addIcon","_jsx","className","children","_jsxs","onClick","API_BASE_URL","laporanList","setLaporanList","useState","isLoading","setIsLoading","fetchLaporan","useCallback","async","token","localStorage","getItem","response","fetch","concat","headers","Authorization","ok","Error","data","json","error","toast","message","useEffect","ToastContainer","position","autoClose","PageHeader","colSpan","length","map","laporan","judul_laporan","halaman_error","nama_pelapor","value","status_laporan","status","toLowerCase","replace","onChange","e","id","newStatus","currentPrioritas","currentCatatan","method","body","JSON","stringify","prioritas","catatan_admin","result","success","err","handleUpdateStatus","id_laporan","target","prio","dateString","dilaporkan_pada","Date","toLocaleString","day","month","year","hour","minute","handleDelete","judul","Swal","text","icon","showCancelButton","confirmButtonColor","cancelButtonText","then","isConfirmed"],"sourceRoot":""}