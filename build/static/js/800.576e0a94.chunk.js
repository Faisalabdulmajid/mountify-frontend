"use strict";(self.webpackChunkspk_gunung=self.webpackChunkspk_gunung||[]).push([[800],{944:(a,e,n)=>{n.d(e,{A:()=>l});n(5043);var i=n(1283),s=n(579);const l=a=>{let{title:e,backText:n,backLink:l}=a;return(0,s.jsxs)("header",{className:"page-header",children:[(0,s.jsx)("h1",{children:e}),(0,s.jsxs)(i.N_,{to:l,className:"btn-back",children:[(0,s.jsx)("i",{className:"bi bi-arrow-left"})," ",n]})]})}},2800:(a,e,n)=>{n.r(e),n.d(e,{default:()=>o});var i=n(2555),s=n(5043),l=n(1283),r=n(7488),t=(n(2342),n(3074),n(944));var u=n(579);const m="http://localhost:5000",d={medan:{"Belum Diketahui":null,"Sangat Mudah (0-2): Jalur landai, setapak jelas":1,"Mudah (3-4): Tanjakan sedang, bebatuan kecil":3,"Sedang (5-6): Tanjakan panjang, butuh bantuan tangan":5,"Sulit (7-8): Sangat curam >45\xb0, scrambling":7,"Sangat Sulit (9-10): Mendekati vertikal, butuh keahlian panjat":9},navigasi:{"Belum Diketahui":null,"Aman (7-10): Jalur jelas, terawat, jauh dari risiko":9,"Cukup Aman (4-6): Beberapa titik waspada, jalur aman":6,"Berbahaya (0-3): Riwayat longsor, kawah aktif, jurang tanpa pengaman":2},risiko_tambahan:{"Belum Diketahui":null,"Rendah/Jarang (8-10): <5 insiden SAR per tahun":9,"Sedang (4-7): 5-10 insiden per tahun":6,"Tinggi/Sering (0-3): >10 insiden SAR per tahun":2},basecamp:{"Belum Diketahui":null,"Sangat Lengkap (9-10): Fasilitas modern, penginapan, persewaan alat":9,"Lengkap (6-8): Basecamp terorganisir, pusat info, mushola, warung":7,"Cukup (3-5): Basecamp sederhana, toilet umum, warung kecil":5,"Sangat Minim (0-2): Tidak ada basecamp resmi, pendaftaran di rumah warga":1},sumber_air:{"Belum Diketahui":null,"Melimpah (7-10): >3 sumber air atau 1 sumber sangat melimpah setiap pos":9,"Terbatas (3-6): 1-3 titik sumber air, mungkin musiman":5,"Langka/Tidak Ada (0-2): Harus bawa seluruh pasokan air dari basecamp":1},lahan_kemah:{"Belum Diketahui":null,"Baik (7-10): Lahan luas, datar, bersih, sumber air dekat <5 menit":9,"Cukup (4-6): Lahan untuk 5-10 tenda, sumber air <30 menit":6,"Buruk (0-3): Lahan miring, berbatu, sempit, sumber air >1 jam":2},perlindungan_kemah:{"Belum Diketahui":null,"Terlindungi (7-10): Dalam hutan lebat atau lembah dalam":9,"Cukup Terlindungi (4-6): Lembah kecil atau di antara pepohonan":6,"Sangat Terekspos (0-3): Punggungan terbuka, puncak, sabana tanpa penghalang":2},lanskap:{"Belum Diketahui":null,"Sangat Bervariasi (7-10): >3 ekosistem berbeda":9,"Cukup Bervariasi (4-6): 2-3 transisi ekosistem":6,"Monoton (0-3): Satu jenis ekosistem dari awal hingga akhir":2},viewpoint:{"Belum Diketahui":null,"Istimewa/Ikonik (9-10): Panoramik 360\xb0, fitur ikonik terkenal":9,"Sangat Indah/Panoramik (7-8): Sebagian besar jalur terbuka":7,"Indah/Terbuka Sebagian (4-6): Beberapa titik dengan pemandangan bagus":5,"Biasa/Terbatas (0-3): Hutan rapat, pemandangan hanya di puncak":2},jaringan_komunikasi:{"Belum Diketahui":null,"Baik (7-10): Sinyal tersedia di sebagian besar jalur":9,"Terbatas (3-6): Sinyal hanya di titik tertentu":5,"Tidak Ada (0-2): Tidak ada sinyal setelah meninggalkan basecamp":1}},k=["Belum Diketahui","Buka","Tutup Sementara","Tutup"],h={ketersediaan_sumber_air_skala:["Belum Diketahui","Melimpah (7-10): >3 sumber air atau 1 sumber sangat melimpah setiap pos","Terbatas (3-6): 1-3 titik sumber air, mungkin musiman","Langka/Tidak Ada (0-2): Harus bawa seluruh pasokan air dari basecamp"],variasi_lanskap_skala:["Belum Diketahui","Sangat Bervariasi (7-10): >3 ekosistem berbeda","Cukup Bervariasi (4-6): 2-3 transisi ekosistem","Monoton (0-3): Satu jenis ekosistem dari awal hingga akhir"],perlindungan_angin_kemah_skala:["Belum Diketahui","Terlindungi (7-10): Dalam hutan lebat atau lembah dalam","Cukup Terlindungi (4-6): Lembah kecil atau di antara pepohonan","Sangat Terekspos (0-3): Punggungan terbuka, puncak, sabana tanpa penghalang"],jaringan_komunikasi_skala:["Belum Diketahui","Baik (7-10): Sinyal tersedia di sebagian besar jalur","Terbatas (3-6): Sinyal hanya di titik tertentu","Tidak Ada (0-2): Tidak ada sinyal setelah meninggalkan basecamp"],tingkat_insiden_skala:["Belum Diketahui","Rendah/Jarang (8-10): <5 insiden SAR per tahun","Sedang (4-7): 5-10 insiden per tahun","Tinggi/Sering (0-3): >10 insiden SAR per tahun"]};const o=function(){const a=(0,l.Zp)(),[e,n]=(0,s.useState)([]),[o,g]=(0,s.useState)(!1),[c,p]=(0,s.useState)(""),[_,j]=(0,s.useState)({id_gunung:"",nama_jalur:"",lokasi_pintu_masuk:"",estimasi_waktu_jam:"",deskripsi_jalur:"",status_jalur:"Belum Diketahui",ketersediaan_sumber_air_skala:"",variasi_lanskap_skala:"",perlindungan_angin_kemah_skala:"",jaringan_komunikasi_skala:"",tingkat_insiden_skala:""}),[b,x]=(0,s.useState)({medan:"Belum Diketahui",navigasi:"Belum Diketahui",risiko_tambahan:"Belum Diketahui",basecamp:"Belum Diketahui",sumber_air:"Belum Diketahui",lahan_kemah:"Belum Diketahui",perlindungan_kemah:"Belum Diketahui",lanskap:"Belum Diketahui",viewpoint:"Belum Diketahui",jaringan_komunikasi:"Belum Diketahui"});(0,s.useEffect)(()=>{(async function(a){const e=await fetch("".concat(a,"/api/csrf-token"),{credentials:"include"});if(!e.ok)throw new Error("Gagal mengambil CSRF token");const n=await e.json();return n.csrfToken||n.token||n._csrf||null})(m).then(p).catch(()=>r.oR.error("Gagal mengambil CSRF token"));(async()=>{try{const a=localStorage.getItem("token"),e=await fetch("".concat(m,"/api/gunung"),{headers:{Authorization:"Bearer ".concat(a)}});if(!e.ok)throw new Error("Gagal memuat daftar gunung.");const s=await e.json();n(s),s.length>0&&j(a=>(0,i.A)((0,i.A)({},a),{},{id_gunung:s[0].id_gunung}))}catch(a){r.oR.error(a.message)}})()},[]);const v=a=>{j(e=>(0,i.A)((0,i.A)({},e),{},{[a.target.name]:a.target.value}))},f=a=>{x(e=>(0,i.A)((0,i.A)({},e),{},{[a.target.name]:a.target.value}))},w=(a,e,n)=>(0,u.jsxs)("div",{className:"form-group",children:[(0,u.jsx)("label",{htmlFor:e,children:a}),(0,u.jsx)("select",{id:e,name:e,value:b[e],onChange:f,disabled:o,children:Object.keys(n).map(a=>(0,u.jsx)("option",{value:a,children:a},a))})]});return(0,u.jsxs)("div",{className:"add-jalur-page",children:[(0,u.jsx)(r.N9,{position:"top-right",autoClose:3e3}),(0,u.jsx)(t.A,{title:"Tambah Data Jalur Baru",backText:"Kembali ke Daftar",backLink:"/admin/jalur"}),(0,u.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),!_.id_gunung||!_.nama_jalur||!_.estimasi_waktu_jam)return r.oR.warn("Mohon pilih gunung, isi nama jalur, dan estimasi waktu.");g(!0);const n=(()=>{const a=a=>{const e=a.map(a=>d[a][b[a]]).filter(a=>null!==a);if(0===e.length)return 0;const n=e.reduce((a,e)=>a+e,0);return Math.round(n/e.length)};return{kesulitan_skala:a(["medan"]),keamanan_skala:a(["navigasi","risiko_tambahan","jaringan_komunikasi"]),kualitas_fasilitas_skala:a(["basecamp","sumber_air"]),kualitas_kemah_skala:a(["lahan_kemah","perlindungan_kemah"]),keindahan_pemandangan_skala:a(["lanskap","viewpoint"])}})(),s={ketersediaan_sumber_air_skala:"sumber_air",variasi_lanskap_skala:"lanskap",perlindungan_angin_kemah_skala:"perlindungan_kemah",jaringan_komunikasi_skala:"jaringan_komunikasi",tingkat_insiden_skala:"risiko_tambahan"},l=Object.keys(s),t={};l.forEach(a=>{const e=s[a],n=_[a];t[a]=void 0!==d[e][n]?d[e][n]:null});const u=(0,i.A)((0,i.A)((0,i.A)({},_),t),{},{nama_jalur:(k=_.nama_jalur,k?k.toLowerCase().split(" ").map(a=>a.charAt(0).toUpperCase()+a.slice(1)).join(" "):"")},n);var k;try{const e=localStorage.getItem("token"),n=await fetch("".concat(m,"/api/admin/jalur"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e),"X-CSRF-Token":c},credentials:"include",body:JSON.stringify(u)}),i=await n.json();if(!n.ok)throw new Error(i.message);r.oR.success("Jalur pendakian baru berhasil ditambahkan!"),setTimeout(()=>a("/admin/jalur"),1500)}catch(h){r.oR.error(h.message||"Terjadi kesalahan saat menyimpan data.")}finally{g(!1)}},className:"form-widget-jalur",children:[(0,u.jsxs)("fieldset",{className:"form-fieldset",disabled:o,children:[(0,u.jsx)("legend",{children:"Identitas Jalur"}),(0,u.jsxs)("div",{className:"form-row",children:[(0,u.jsxs)("div",{className:"form-group",children:[(0,u.jsx)("label",{htmlFor:"id_gunung",children:"Pilih Gunung"}),(0,u.jsxs)("select",{id:"id_gunung",name:"id_gunung",value:_.id_gunung,onChange:v,required:!0,children:[(0,u.jsx)("option",{value:"",disabled:!0,children:"-- Pilih Gunung --"}),e.map(a=>(0,u.jsx)("option",{value:a.id_gunung,children:a.nama_gunung},a.id_gunung))]})]}),(0,u.jsxs)("div",{className:"form-group",children:[(0,u.jsx)("label",{htmlFor:"nama_jalur",children:"Nama Jalur"}),(0,u.jsx)("input",{type:"text",id:"nama_jalur",name:"nama_jalur",value:_.nama_jalur,onChange:v,required:!0,placeholder:"Contoh: Jalur Cibodas"})]})]}),(0,u.jsx)("div",{className:"form-row",children:(0,u.jsxs)("div",{className:"form-group full-width",children:[(0,u.jsx)("label",{htmlFor:"lokasi_pintu_masuk",children:"Lokasi Pintu Masuk/Gerbang"}),(0,u.jsx)("input",{type:"text",id:"lokasi_pintu_masuk",name:"lokasi_pintu_masuk",value:_.lokasi_pintu_masuk,onChange:v,placeholder:"Contoh: Desa Kertawangi, Pos Jaga Cibodas"})]})}),(0,u.jsx)("div",{className:"form-row",children:(0,u.jsxs)("div",{className:"form-group",children:[(0,u.jsx)("label",{htmlFor:"status_jalur",children:"Status Jalur"}),(0,u.jsx)("select",{id:"status_jalur",name:"status_jalur",value:_.status_jalur,onChange:v,children:k.map(a=>(0,u.jsx)("option",{value:a,children:a},a))})]})})]}),(0,u.jsxs)("fieldset",{className:"form-fieldset",disabled:o,children:[(0,u.jsx)("legend",{children:"Parameter Fuzzy Engine"}),(0,u.jsxs)("div",{className:"form-row",children:[(0,u.jsxs)("div",{className:"form-group",children:[(0,u.jsx)("label",{htmlFor:"estimasi_waktu_jam",children:"Estimasi Waktu (Jam)"}),(0,u.jsx)("input",{type:"number",id:"estimasi_waktu_jam",name:"estimasi_waktu_jam",value:_.estimasi_waktu_jam,onChange:v,required:!0,placeholder:"Contoh: 8"})]}),(0,u.jsxs)("div",{className:"form-group",children:[(0,u.jsx)("label",{htmlFor:"ketersediaan_sumber_air_skala",style:{marginBottom:4},children:"Ketersediaan Sumber Air"}),(0,u.jsx)("select",{id:"ketersediaan_sumber_air_skala",name:"ketersediaan_sumber_air_skala",value:_.ketersediaan_sumber_air_skala,onChange:v,required:!0,style:{width:"100%"},children:h.ketersediaan_sumber_air_skala.map(a=>(0,u.jsx)("option",{value:a,children:a},a))})]})]}),(0,u.jsxs)("div",{className:"form-row",children:[(0,u.jsxs)("div",{className:"form-group",children:[(0,u.jsx)("label",{htmlFor:"variasi_lanskap_skala",style:{marginBottom:4},children:"Variasi Lanskap"}),(0,u.jsx)("select",{id:"variasi_lanskap_skala",name:"variasi_lanskap_skala",value:_.variasi_lanskap_skala,onChange:v,required:!0,style:{width:"100%"},children:h.variasi_lanskap_skala.map(a=>(0,u.jsx)("option",{value:a,children:a},a))})]}),(0,u.jsxs)("div",{className:"form-group",children:[(0,u.jsx)("label",{htmlFor:"perlindungan_angin_kemah_skala",style:{marginBottom:4},children:"Perlindungan Angin Kemah"}),(0,u.jsx)("select",{id:"perlindungan_angin_kemah_skala",name:"perlindungan_angin_kemah_skala",value:_.perlindungan_angin_kemah_skala,onChange:v,required:!0,style:{width:"100%"},children:h.perlindungan_angin_kemah_skala.map(a=>(0,u.jsx)("option",{value:a,children:a},a))})]})]}),(0,u.jsxs)("div",{className:"form-row",children:[(0,u.jsxs)("div",{className:"form-group",children:[(0,u.jsx)("label",{htmlFor:"jaringan_komunikasi_skala",style:{marginBottom:4},children:"Jaringan Komunikasi"}),(0,u.jsx)("select",{id:"jaringan_komunikasi_skala",name:"jaringan_komunikasi_skala",value:_.jaringan_komunikasi_skala,onChange:v,required:!0,style:{width:"100%"},children:h.jaringan_komunikasi_skala.map(a=>(0,u.jsx)("option",{value:a,children:a},a))})]}),(0,u.jsxs)("div",{className:"form-group",children:[(0,u.jsx)("label",{htmlFor:"tingkat_insiden_skala",style:{marginBottom:4},children:"Tingkat Insiden"}),(0,u.jsx)("select",{id:"tingkat_insiden_skala",name:"tingkat_insiden_skala",value:_.tingkat_insiden_skala,onChange:v,required:!0,style:{width:"100%"},children:h.tingkat_insiden_skala.map(a=>(0,u.jsx)("option",{value:a,children:a},a))})]})]})]}),(0,u.jsxs)("fieldset",{className:"form-fieldset",disabled:o,children:[(0,u.jsx)("legend",{children:"Parameter Penilaian"}),(0,u.jsxs)("div",{className:"descriptive-grid",children:[(0,u.jsxs)("div",{className:"parameter-group",children:[(0,u.jsx)("h4",{children:"Tingkat Kesulitan"}),w("Medan & Tanjakan","medan",d.medan)]}),(0,u.jsxs)("div",{className:"parameter-group",children:[(0,u.jsx)("h4",{children:"Tingkat Keamanan"}),w("Navigasi & Petunjuk Arah","navigasi",d.navigasi)]}),(0,u.jsxs)("div",{className:"parameter-group",children:[(0,u.jsx)("h4",{children:"Kualitas Fasilitas"}),w("Fasilitas Basecamp","basecamp",d.basecamp)]}),(0,u.jsxs)("div",{className:"parameter-group",children:[(0,u.jsx)("h4",{children:"Kualitas Area Kemah"}),w("Lahan & Kapasitas Kemah","lahan_kemah",d.lahan_kemah)]}),(0,u.jsxs)("div",{className:"parameter-group",children:[(0,u.jsx)("h4",{children:"Keindahan Pemandangan"}),w("Spot Pemandangan (Viewpoint)","viewpoint",d.viewpoint)]})]})]}),(0,u.jsxs)("fieldset",{className:"form-fieldset",disabled:o,children:[(0,u.jsx)("legend",{children:"Deskripsi Tambahan"}),(0,u.jsxs)("div",{className:"form-group full-width",children:[(0,u.jsx)("label",{htmlFor:"deskripsi_jalur",children:"Deskripsi Singkat Jalur"}),(0,u.jsx)("textarea",{id:"deskripsi_jalur",name:"deskripsi_jalur",rows:"5",value:_.deskripsi_jalur,onChange:v,placeholder:"Jelaskan karakteristik unik, sumber air, atau hal penting lainnya mengenai jalur ini..."})]})]}),(0,u.jsxs)("div",{className:"form-actions",children:[(0,u.jsx)("button",{type:"button",className:"btn-cancel",onClick:()=>a("/admin/jalur"),disabled:o,children:"Batal"}),(0,u.jsx)("button",{type:"submit",className:"btn-save",disabled:o,children:o?"Menyimpan...":"Simpan Data Jalur"})]})]})]})}},3074:()=>{}}]);
//# sourceMappingURL=800.576e0a94.chunk.js.map