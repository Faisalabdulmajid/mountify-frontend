"use strict";(self.webpackChunkspk_gunung=self.webpackChunkspk_gunung||[]).push([[805],{698:(e,a,s)=>{s.d(a,{A:()=>n});s(5043);var t=s(579);const n=e=>{let{title:a,onAddClick:s,addLabel:n="Tambah",addIcon:l=(0,t.jsx)("i",{className:"bi bi-plus-lg"}),children:i}=e;return(0,t.jsxs)("div",{className:"controls-container",children:[(0,t.jsxs)("div",{className:"header-row",children:[(0,t.jsx)("h1",{className:"page-title",children:a}),s&&(0,t.jsxs)("button",{className:"btn-add-new",onClick:s,children:[l," ",n]})]}),i]})}},5071:(e,a,s)=>{s.d(a,{zY:()=>t.A});var t=s(698);s(5043),s(579)},6681:()=>{},8805:(e,a,s)=>{s.r(a),s.d(a,{default:()=>h});var t=s(2555),n=s(5043),l=s(7488),i=(s(2342),s(64)),c=s.n(i),r=(s(6681),s(5071)),o=(s(9645),s(579));const d="http://localhost:5000/api/admin";const h=function(){const[e,a]=(0,n.useState)([]),[s,i]=(0,n.useState)(!0),[h,u]=(0,n.useState)("Semua"),j=(0,n.useCallback)(async()=>{i(!0);try{const e=localStorage.getItem("token"),s=await fetch("".concat(d,"/reviews"),{headers:{Authorization:"Bearer ".concat(e)}});if(!s.ok)throw new Error("Gagal memuat data ulasan.");const t=await s.json();a(t)}catch(e){l.oR.error(e.message)}finally{i(!1)}},[]);(0,n.useEffect)(()=>{j()},[j]);const x=(0,n.useMemo)(()=>"Disetujui"===h?e.filter(e=>e.is_approved):"Menunggu"===h?e.filter(e=>!e.is_approved):e,[e,h]),m=e=>{const a=[];for(let s=1;s<=5;s++)a.push((0,o.jsx)("i",{className:"bi bi-star-fill ".concat(s<=e?"star-filled":"star-empty")},s));return(0,o.jsx)("div",{className:"rating-stars",children:a})};return(0,o.jsxs)("div",{className:"kelola-ulasan-container",children:[(0,o.jsx)(l.N9,{position:"top-right",autoClose:3e3,hideProgressBar:!1}),(0,o.jsx)(r.zY,{title:"Kelola Ulasan",children:(0,o.jsx)("div",{className:"toolbar-ulasan",children:(0,o.jsxs)("div",{className:"filter-group-ulasan",children:[(0,o.jsx)("label",{htmlFor:"statusFilter",children:"Filter Status:"}),(0,o.jsxs)("select",{id:"statusFilter",value:h,onChange:e=>u(e.target.value),children:[(0,o.jsx)("option",{value:"Semua",children:"Semua Ulasan"}),(0,o.jsx)("option",{value:"Menunggu",children:"Menunggu Persetujuan"}),(0,o.jsx)("option",{value:"Disetujui",children:"Disetujui"})]})]})})}),(0,o.jsx)("div",{className:"table-container",children:(0,o.jsxs)("table",{className:"data-table",children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{style:{width:"20%"},children:(0,o.jsx)("div",{className:"header-cell-content",children:(0,o.jsx)("span",{children:"Gunung"})})}),(0,o.jsx)("th",{style:{width:"15%"},children:(0,o.jsx)("div",{className:"header-cell-content",children:(0,o.jsx)("span",{children:"Penulis"})})}),(0,o.jsx)("th",{style:{width:"12%"},children:(0,o.jsx)("div",{className:"header-cell-content",children:(0,o.jsx)("span",{children:"Rating"})})}),(0,o.jsx)("th",{style:{width:"25%"},children:(0,o.jsx)("div",{className:"header-cell-content",children:(0,o.jsx)("span",{children:"Komentar"})})}),(0,o.jsx)("th",{style:{width:"12%"},children:(0,o.jsx)("div",{className:"header-cell-content",children:(0,o.jsx)("span",{children:"Status"})})}),(0,o.jsx)("th",{style:{width:"16%"},children:"Aksi"})]})}),(0,o.jsx)("tbody",{children:s?(0,o.jsx)("tr",{children:(0,o.jsx)("td",{colSpan:"6",className:"text-center",children:"Memuat data..."})}):x.length>0?x.map(e=>(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:e.nama_gunung}),(0,o.jsx)("td",{children:e.penulis}),(0,o.jsx)("td",{children:m(e.rating)}),(0,o.jsx)("td",{className:"komentar-cell",children:(0,o.jsx)("p",{children:e.komentar})}),(0,o.jsx)("td",{children:(0,o.jsx)("span",{className:"status-badge-ulasan ".concat(e.is_approved?"status-disetujui":"status-menunggu"),children:e.is_approved?"Disetujui":"Menunggu"})}),(0,o.jsx)("td",{children:(0,o.jsxs)("div",{className:"action-buttons",children:[!e.is_approved&&(0,o.jsx)("button",{className:"action-btn btn-approve",title:"Setujui",onClick:()=>(async e=>{const s=localStorage.getItem("token");try{const n=await fetch("".concat(d,"/reviews/").concat(e,"/approve"),{method:"PATCH",headers:{Authorization:"Bearer ".concat(s)}}),i=await n.json();if(!n.ok)throw new Error(i.message);l.oR.success(i.message),a(a=>a.map(a=>a.id_ulasan===e?(0,t.A)((0,t.A)({},a),{},{is_approved:!0}):a))}catch(n){l.oR.error(n.message)}})(e.id_ulasan),children:(0,o.jsx)("i",{className:"bi bi-check-circle-fill"})}),(0,o.jsx)("button",{className:"action-btn btn-delete",title:"Hapus",onClick:()=>{return s=e.id_ulasan,void c().fire({title:"Apakah Anda yakin?",text:"Menghapus ulasan ini tidak dapat dibatalkan.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#6c757d",confirmButtonText:"Ya, hapus!",cancelButtonText:"Batal"}).then(async e=>{if(e.isConfirmed){const e=localStorage.getItem("token");try{const t=await fetch("".concat(d,"/reviews/").concat(s),{method:"DELETE",headers:{Authorization:"Bearer ".concat(e)}}),n=await t.json();if(!t.ok)throw new Error(n.message);l.oR.success(n.message),a(e=>e.filter(e=>e.id_ulasan!==s))}catch(t){l.oR.error(t.message)}}});var s},children:(0,o.jsx)("i",{className:"bi bi-trash3-fill"})})]})})]},e.id_ulasan)):(0,o.jsx)("tr",{children:(0,o.jsx)("td",{colSpan:"6",className:"text-center",children:"Tidak ada ulasan yang cocok."})})})]})})]})}},9645:()=>{}}]);
//# sourceMappingURL=805.492a7a95.chunk.js.map