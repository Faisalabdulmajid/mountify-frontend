{"version":3,"file":"static/js/805.492a7a95.chunk.js","mappings":"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","sources":["components/common/PageHeader/PageHeader.js","pages/admin/ulasan/KelolaUlasan.js"],"sourcesContent":["import React from \"react\";\r\n\r\nconst PageHeader = ({\r\n  title,\r\n  onAddClick,\r\n  addLabel = \"Tambah\",\r\n  addIcon = <i className=\"bi bi-plus-lg\"></i>,\r\n  children,\r\n}) => {\r\n  return (\r\n    <div className=\"controls-container\">\r\n      <div className=\"header-row\">\r\n        <h1 className=\"page-title\">{title}</h1>\r\n        {onAddClick && (\r\n          <button className=\"btn-add-new\" onClick={onAddClick}>\r\n            {addIcon} {addLabel}\r\n          </button>\r\n        )}\r\n      </div>\r\n      {children}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PageHeader;\r\n","// src/pages/admin/ulasan/KelolaUlasan.js\r\n\r\nimport React, { useState, useEffect, useCallback, useMemo } from \"react\";\r\nimport { ToastContainer, toast } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\nimport Swal from \"sweetalert2\";\r\nimport \"sweetalert2/dist/sweetalert2.min.css\";\r\nimport \"./KelolaUlasan.css\";\r\nimport { PageHeader } from \"../../../components/common/PageHeader\";\r\nimport \"../../../components/common/PageHeader/PageHeader.css\";\r\n\r\nconst API_BASE_URL = \"http://localhost:5000/api/admin\";\r\n\r\nfunction KelolaUlasan() {\r\n  const [reviews, setReviews] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [filter, setFilter] = useState(\"Semua\"); // Semua, Disetujui, Menunggu\r\n\r\n  const fetchReviews = useCallback(async () => {\r\n    setLoading(true);\r\n    try {\r\n      const token = localStorage.getItem(\"token\");\r\n      const response = await fetch(`${API_BASE_URL}/reviews`, {\r\n        headers: { Authorization: `Bearer ${token}` },\r\n      });\r\n      if (!response.ok) throw new Error(\"Gagal memuat data ulasan.\");\r\n      const data = await response.json();\r\n      setReviews(data);\r\n    } catch (err) {\r\n      toast.error(err.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    fetchReviews();\r\n  }, [fetchReviews]);\r\n\r\n  const filteredReviews = useMemo(() => {\r\n    if (filter === \"Disetujui\") return reviews.filter((r) => r.is_approved);\r\n    if (filter === \"Menunggu\") return reviews.filter((r) => !r.is_approved);\r\n    return reviews;\r\n  }, [reviews, filter]);\r\n\r\n  const handleApprove = async (id) => {\r\n    const token = localStorage.getItem(\"token\");\r\n    try {\r\n      const response = await fetch(`${API_BASE_URL}/reviews/${id}/approve`, {\r\n        method: \"PATCH\",\r\n        headers: { Authorization: `Bearer ${token}` },\r\n      });\r\n      const resJson = await response.json();\r\n      if (!response.ok) throw new Error(resJson.message);\r\n\r\n      toast.success(resJson.message);\r\n      // Update state lokal tanpa fetch ulang\r\n      setReviews((prev) =>\r\n        prev.map((r) => (r.id_ulasan === id ? { ...r, is_approved: true } : r))\r\n      );\r\n    } catch (err) {\r\n      toast.error(err.message);\r\n    }\r\n  };\r\n\r\n  const handleDelete = (id) => {\r\n    Swal.fire({\r\n      title: \"Apakah Anda yakin?\",\r\n      text: `Menghapus ulasan ini tidak dapat dibatalkan.`,\r\n      icon: \"warning\",\r\n      showCancelButton: true,\r\n      confirmButtonColor: \"#d33\",\r\n      cancelButtonColor: \"#6c757d\",\r\n      confirmButtonText: \"Ya, hapus!\",\r\n      cancelButtonText: \"Batal\",\r\n    }).then(async (result) => {\r\n      if (result.isConfirmed) {\r\n        const token = localStorage.getItem(\"token\");\r\n        try {\r\n          const response = await fetch(`${API_BASE_URL}/reviews/${id}`, {\r\n            method: \"DELETE\",\r\n            headers: { Authorization: `Bearer ${token}` },\r\n          });\r\n          const resJson = await response.json();\r\n          if (!response.ok) throw new Error(resJson.message);\r\n\r\n          toast.success(resJson.message);\r\n          setReviews((prev) => prev.filter((r) => r.id_ulasan !== id));\r\n        } catch (err) {\r\n          toast.error(err.message);\r\n        }\r\n      }\r\n    });\r\n  };\r\n\r\n  const renderRatingStars = (rating) => {\r\n    const stars = [];\r\n    for (let i = 1; i <= 5; i++) {\r\n      stars.push(\r\n        <i\r\n          key={i}\r\n          className={`bi bi-star-fill ${\r\n            i <= rating ? \"star-filled\" : \"star-empty\"\r\n          }`}\r\n        ></i>\r\n      );\r\n    }\r\n    return <div className=\"rating-stars\">{stars}</div>;\r\n  };\r\n\r\n  return (\r\n    <div className=\"kelola-ulasan-container\">\r\n      <ToastContainer\r\n        position=\"top-right\"\r\n        autoClose={3000}\r\n        hideProgressBar={false}\r\n      />\r\n      <PageHeader title=\"Kelola Ulasan\">\r\n        <div className=\"toolbar-ulasan\">\r\n          <div className=\"filter-group-ulasan\">\r\n            <label htmlFor=\"statusFilter\">Filter Status:</label>\r\n            <select\r\n              id=\"statusFilter\"\r\n              value={filter}\r\n              onChange={(e) => setFilter(e.target.value)}\r\n            >\r\n              <option value=\"Semua\">Semua Ulasan</option>\r\n              <option value=\"Menunggu\">Menunggu Persetujuan</option>\r\n              <option value=\"Disetujui\">Disetujui</option>\r\n            </select>\r\n          </div>\r\n        </div>\r\n      </PageHeader>\r\n\r\n      <div className=\"table-container\">\r\n        <table className=\"data-table\">\r\n          <thead>\r\n            <tr>\r\n              <th style={{ width: \"20%\" }}>\r\n                <div className=\"header-cell-content\">\r\n                  <span>Gunung</span>\r\n                </div>\r\n              </th>\r\n              <th style={{ width: \"15%\" }}>\r\n                <div className=\"header-cell-content\">\r\n                  <span>Penulis</span>\r\n                </div>\r\n              </th>\r\n              <th style={{ width: \"12%\" }}>\r\n                <div className=\"header-cell-content\">\r\n                  <span>Rating</span>\r\n                </div>\r\n              </th>\r\n              <th style={{ width: \"25%\" }}>\r\n                <div className=\"header-cell-content\">\r\n                  <span>Komentar</span>\r\n                </div>\r\n              </th>\r\n              <th style={{ width: \"12%\" }}>\r\n                <div className=\"header-cell-content\">\r\n                  <span>Status</span>\r\n                </div>\r\n              </th>\r\n              <th style={{ width: \"16%\" }}>Aksi</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {loading ? (\r\n              <tr>\r\n                <td colSpan=\"6\" className=\"text-center\">\r\n                  Memuat data...\r\n                </td>\r\n              </tr>\r\n            ) : filteredReviews.length > 0 ? (\r\n              filteredReviews.map((review) => (\r\n                <tr key={review.id_ulasan}>\r\n                  <td>{review.nama_gunung}</td>\r\n                  <td>{review.penulis}</td>\r\n                  <td>{renderRatingStars(review.rating)}</td>\r\n                  <td className=\"komentar-cell\">\r\n                    <p>{review.komentar}</p>\r\n                  </td>\r\n                  <td>\r\n                    <span\r\n                      className={`status-badge-ulasan ${\r\n                        review.is_approved\r\n                          ? \"status-disetujui\"\r\n                          : \"status-menunggu\"\r\n                      }`}\r\n                    >\r\n                      {review.is_approved ? \"Disetujui\" : \"Menunggu\"}\r\n                    </span>\r\n                  </td>\r\n                  <td>\r\n                    <div className=\"action-buttons\">\r\n                      {!review.is_approved && (\r\n                        <button\r\n                          className=\"action-btn btn-approve\"\r\n                          title=\"Setujui\"\r\n                          onClick={() => handleApprove(review.id_ulasan)}\r\n                        >\r\n                          <i className=\"bi bi-check-circle-fill\"></i>\r\n                        </button>\r\n                      )}\r\n                      <button\r\n                        className=\"action-btn btn-delete\"\r\n                        title=\"Hapus\"\r\n                        onClick={() => handleDelete(review.id_ulasan)}\r\n                      >\r\n                        <i className=\"bi bi-trash3-fill\"></i>\r\n                      </button>\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n              ))\r\n            ) : (\r\n              <tr>\r\n                <td colSpan=\"6\" className=\"text-center\">\r\n                  Tidak ada ulasan yang cocok.\r\n                </td>\r\n              </tr>\r\n            )}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default KelolaUlasan;\r\n"],"names":["_ref","title","onAddClick","addLabel","addIcon","_jsx","className","children","_jsxs","onClick","API_BASE_URL","reviews","setReviews","useState","loading","setLoading","filter","setFilter","fetchReviews","useCallback","async","token","localStorage","getItem","response","fetch","concat","headers","Authorization","ok","Error","data","json","err","toast","error","message","useEffect","filteredReviews","useMemo","r","is_approved","renderRatingStars","rating","stars","i","push","ToastContainer","position","autoClose","hideProgressBar","PageHeader","htmlFor","id","value","onChange","e","target","style","width","colSpan","length","map","review","nama_gunung","penulis","komentar","method","resJson","success","prev","id_ulasan","_objectSpread","handleApprove","handleDelete","Swal","text","icon","showCancelButton","confirmButtonColor","cancelButtonColor","confirmButtonText","cancelButtonText","then","result","isConfirmed"],"sourceRoot":""}