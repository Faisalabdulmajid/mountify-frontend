"use strict";(self.webpackChunkspk_gunung=self.webpackChunkspk_gunung||[]).push([[816],{6816:(a,e,i)=>{i.r(e),i.d(e,{default:()=>k});var n=i(2555),s=i(5043),t=i(1283),l=i(5016),c=i(108),r=i(1653),o=i(7734),d=i(2185),u=i(6026),m=i(6150),h=i(1327),g=i(168),j=i(579);const p=a=>{let{icon:e,label:i,value:n,urgent:s,warning:t}=a;return(0,j.jsxs)("div",{className:"stat-card ".concat(s?"urgent":""," ").concat(t?"warning":""),children:[(0,j.jsx)("div",{className:"stat-icon",children:(0,j.jsx)("i",{className:"bi ".concat(e)})}),(0,j.jsxs)("div",{className:"stat-info",children:[(0,j.jsx)("span",{className:"stat-value",children:n}),(0,j.jsx)("span",{className:"stat-label",children:i})]})]})},b=a=>{let{icon:e,title:i,description:n,link:s}=a;return(0,j.jsxs)(t.N_,{to:s,className:"menu-card",children:[(0,j.jsx)("i",{className:"bi ".concat(e," menu-icon")}),(0,j.jsx)("h3",{children:i}),(0,j.jsx)("p",{children:n}),(0,j.jsx)("div",{className:"menu-button",children:"Kelola Sekarang"})]})},x=a=>{let{icon:e,title:i,details:n,time:s}=a;return(0,j.jsxs)("div",{className:"activity-item",children:[(0,j.jsx)("div",{className:"activity-icon",children:(0,j.jsx)("i",{className:"bi ".concat(e)})}),(0,j.jsxs)("div",{className:"activity-details",children:[(0,j.jsx)("span",{className:"activity-title",children:i}),(0,j.jsxs)("span",{className:"activity-subtext",children:[n," -"," ",new Date(s).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric"})]})]})]})};const k=function(){const a=(0,t.Zp)(),{user:e,logout:i}=(0,l.A)(),[k,N]=(0,s.useState)({total_pengguna:0,total_gunung:0,total_jalur:0,total_artikel:0}),[v,f]=(0,s.useState)([]),[w,_]=(0,s.useState)({pending_reviews:0,pending_reports:0}),[y,A]=(0,s.useState)([]),[M,P]=(0,s.useState)(!0),[S,T]=(0,s.useState)(null);(0,s.useEffect)(()=>{if(!e)return void a("/login");(async()=>{P(!0),T(null);const a=localStorage.getItem("token");try{const[e,i,n,s]=await Promise.all([fetch("".concat("http://localhost:5000/api","/admin/stats"),{headers:{Authorization:"Bearer ".concat(a)}}),fetch("".concat("http://localhost:5000/api","/admin/stats/user-growth"),{headers:{Authorization:"Bearer ".concat(a)}}),fetch("".concat("http://localhost:5000/api","/admin/pending-items"),{headers:{Authorization:"Bearer ".concat(a)}}),fetch("".concat("http://localhost:5000/api","/admin/recent-activity"),{headers:{Authorization:"Bearer ".concat(a)}})]);if(!e.ok||!i.ok||!n.ok||!s.ok)throw new Error("Gagal mengambil semua data dashboard.");const t=await e.json(),l=await i.json(),c=await n.json(),r=await s.json();N(t),f(l),_(c),A(r)}catch(e){T(e.message)}finally{P(!1)}})()},[e,a]);const B=[{id:"rev",label:"Ulasan Baru",value:w.pending_reviews,icon:"bi-chat-left-dots-fill",warning:!0},{id:"rep",label:"Laporan Masuk",value:w.pending_reports,icon:"bi-shield-exclamation",urgent:!0},{id:1,label:"Total Pengguna",value:k.total_pengguna,icon:"bi-people-fill"},{id:2,label:"Total Gunung",value:k.total_gunung,icon:"bi-image-alt"},{id:3,label:"Total Jalur",value:k.total_jalur,icon:"bi-signpost-split-fill"},{id:4,label:"Total Artikel",value:k.total_artikel,icon:"bi-file-text-fill"}];return M?(0,j.jsx)("div",{className:"loading-container",children:"Memuat data dashboard..."}):(0,j.jsx)("div",{className:"dashboard-admin-page-content",children:(0,j.jsxs)("div",{className:"dashboard-admin-container",children:[(0,j.jsxs)("header",{className:"dashboard-header",children:[(0,j.jsxs)("div",{children:[(0,j.jsx)("h1",{children:"Dashboard Admin"}),(0,j.jsxs)("p",{className:"welcome-message",children:["Selamat datang kembali,"," ",(0,j.jsx)("strong",{children:(null===e||void 0===e?void 0:e.nama_lengkap)||"Admin"}),"!"]})]}),(0,j.jsxs)("div",{className:"header-actions",children:[(0,j.jsxs)(t.N_,{to:"/",target:"_blank",rel:"noopener noreferrer",className:"btn-view-site",children:[(0,j.jsx)("i",{className:"bi bi-box-arrow-up-right"})," Lihat Situs"]}),(0,j.jsxs)("button",{onClick:()=>{i(),a("/")},className:"btn-logout",children:[(0,j.jsx)("i",{className:"bi bi-box-arrow-right"})," Logout"]})]})]}),S&&(0,j.jsx)("div",{className:"error-message",children:S}),(0,j.jsx)("section",{className:"stats-container",children:B.map(a=>(0,j.jsx)(p,(0,n.A)({},a),a.id))}),(0,j.jsxs)("section",{className:"dashboard-main-section",children:[(0,j.jsxs)("div",{className:"widget-card",children:[(0,j.jsx)("h3",{children:"Pertumbuhan Pengguna (7 Hari Terakhir)"}),(0,j.jsx)("div",{className:"chart-container",children:(0,j.jsx)(c.u,{width:"100%",height:300,children:(0,j.jsxs)(r.b,{data:v,margin:{top:5,right:20,left:-10,bottom:5},children:[(0,j.jsx)(o.d,{strokeDasharray:"3 3",stroke:"#e0e0e0"}),(0,j.jsx)(d.W,{dataKey:"tanggal",stroke:"#666"}),(0,j.jsx)(u.h,{allowDecimals:!1,stroke:"#666"}),(0,j.jsx)(m.m,{contentStyle:{backgroundColor:"#fff",border:"1px solid #ddd"}}),(0,j.jsx)(h.s,{}),(0,j.jsx)(g.N,{type:"monotone",dataKey:"jumlah",name:"Pengguna Baru",stroke:"#27ae60",strokeWidth:2,activeDot:{r:8}})]})})})]}),(0,j.jsxs)("div",{className:"widget-card",children:[(0,j.jsx)("h3",{children:"Aktivitas Terbaru"}),(0,j.jsx)("div",{className:"activity-list",children:y.length>0?y.map((a,e)=>{const i="user_baru"===a.type?{icon:"bi-person-plus-fill",title:"Pengguna baru: ".concat(a.title),details:"Peran: ".concat(a.details)}:{icon:"bi-file-earmark-plus-fill",title:"Artikel baru: ".concat(a.title),details:"Oleh: ".concat(a.details)};return(0,j.jsx)(x,(0,n.A)((0,n.A)({},i),{},{time:a.timestamp}),e)}):(0,j.jsx)("p",{children:"Belum ada aktivitas terbaru."})})]}),(0,j.jsxs)("div",{className:"widget-card full-width-widget",children:[(0,j.jsx)("h3",{children:"Aksi Cepat"}),(0,j.jsxs)("div",{className:"quick-actions-grid",children:[(0,j.jsxs)(t.N_,{to:"/admin/announcements/new",className:"quick-action-button",children:[(0,j.jsx)("i",{className:"bi bi-megaphone-fill"}),(0,j.jsx)("span",{children:"Buat Pengumuman"})]}),(0,j.jsxs)(t.N_,{to:"/admin/articles/new",className:"quick-action-button",children:[(0,j.jsx)("i",{className:"bi bi-file-earmark-plus-fill"}),(0,j.jsx)("span",{children:"Tulis Artikel Baru"})]}),(0,j.jsxs)(t.N_,{to:"/admin/gunung/new",className:"quick-action-button",children:[(0,j.jsx)("i",{className:"bi bi-image-alt"}),(0,j.jsx)("span",{children:"Tambah Gunung"})]}),(0,j.jsxs)(t.N_,{to:"/admin/users/new",className:"quick-action-button",children:[(0,j.jsx)("i",{className:"bi bi-person-plus-fill"}),(0,j.jsx)("span",{children:"Tambah Pengguna"})]})]})]})]}),(0,j.jsxs)("section",{className:"management-menu-section",children:[(0,j.jsxs)("div",{className:"section-header",children:[(0,j.jsx)("h2",{children:"Menu Manajemen"}),(0,j.jsx)("p",{children:"Akses semua fitur pengelolaan konten dan data dari sini."})]}),(0,j.jsx)("div",{className:"dashboard-menu",children:[{id:1,title:"Manajemen Pengguna",description:"Kelola data, peran, dan status semua pengguna terdaftar.",icon:"bi-people-fill",link:"/admin/users"},{id:2,title:"Manajemen Gunung",description:"Tambah, edit, atau hapus data master untuk setiap gunung.",icon:"bi-image-alt",link:"/admin/gunung"},{id:3,title:"Manajemen Jalur",description:"Kelola semua informasi detail mengenai jalur pendakian.",icon:"bi-signpost-split-fill",link:"/admin/jalur"},{id:4,title:"Manajemen Titik Penting",description:"Kelola data POI seperti sumber air, pos, dan area kemah.",icon:"bi-geo-alt-fill",link:"/admin/poi"},{id:5,title:"Manajemen Artikel",description:"Tulis, publikasikan, dan kelola semua artikel berita atau tips.",icon:"bi-file-text-fill",link:"/admin/articles"},{id:6,title:"Manajemen Galeri",description:"Unggah dan kelola foto-foto untuk galeri gunung dan jalur.",icon:"bi-images",link:"/admin/gallery"},{id:7,title:"Manajemen Ulasan",description:"Moderasi dan kelola ulasan yang dikirim oleh pengguna.",icon:"bi-star-half",link:"/admin/reviews"},{id:8,title:"Manajemen Pengumuman",description:"Buat dan kelola pengumuman penting untuk semua pengguna.",icon:"bi-megaphone-fill",link:"/admin/announcements"}].map(a=>(0,j.jsx)(b,(0,n.A)({},a),a.id))})]})]})})}}}]);
//# sourceMappingURL=816.66871618.chunk.js.map