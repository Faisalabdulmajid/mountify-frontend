"use strict";(self.webpackChunkspk_gunung=self.webpackChunkspk_gunung||[]).push([[928],{698:(e,a,t)=>{t.d(a,{A:()=>s});t(5043);var n=t(579);const s=e=>{let{title:a,onAddClick:t,addLabel:s="Tambah",addIcon:i=(0,n.jsx)("i",{className:"bi bi-plus-lg"}),children:l}=e;return(0,n.jsxs)("div",{className:"controls-container",children:[(0,n.jsxs)("div",{className:"header-row",children:[(0,n.jsx)("h1",{className:"page-title",children:a}),t&&(0,n.jsxs)("button",{className:"btn-add-new",onClick:t,children:[i," ",s]})]}),l]})}},2062:(e,a,t)=>{t.d(a,{A:()=>s});t(5043);var n=t(579);const s=e=>{let{currentPage:a,totalPages:t,itemsPerPage:s,totalItems:i,onPageChange:l,onItemsPerPageChange:r,indexOfFirstItem:c,currentItemsLength:u}=e;const d=e=>{e>0&&e<=t&&l(e)};return(0,n.jsxs)("div",{className:"pagination",children:[(0,n.jsxs)("div",{className:"pagination-info",children:[(0,n.jsx)("span",{children:"Baris per halaman:"}),(0,n.jsxs)("select",{value:s,onChange:e=>{r(parseInt(e.target.value,10))},className:"items-per-page-select",children:[(0,n.jsx)("option",{value:5,children:"5"}),(0,n.jsx)("option",{value:10,children:"10"}),(0,n.jsx)("option",{value:20,children:"20"}),(0,n.jsx)("option",{value:50,children:"50"}),(0,n.jsx)("option",{value:100,children:"100"})]}),(0,n.jsxs)("span",{style:{marginLeft:"15px"},children:["Menampilkan ",u>0?c+1:0,"-",c+u," dari ",i," data"]})]}),(0,n.jsxs)("div",{className:"pagination-controls",children:[(0,n.jsx)("button",{onClick:()=>d(a-1),disabled:1===a,children:"Sebelumnya"}),(0,n.jsxs)("span",{children:["Halaman ",a," dari ",t||1]}),(0,n.jsx)("button",{onClick:()=>d(a+1),disabled:a===t||0===t,children:"Selanjutnya"})]})]})}},5071:(e,a,t)=>{t.d(a,{zY:()=>n.A});var n=t(698);t(5043),t(579)},6681:()=>{},9645:()=>{},9928:(e,a,t)=>{t.r(a),t.d(a,{default:()=>j});var n=t(5043),s=t(1283),i=t(7488),l=(t(2342),t(64)),r=t.n(l),c=(t(6681),t(5071)),u=t(579);const d=e=>{let{currentItems:a,indexOfFirstItem:t,getKesulitanText:n,handleDeleteJalur:i,sortConfig:l,onSort:r}=e;const c=(0,s.Zp)(),d=e=>l.key!==e?null:"ascending"===l.direction?(0,u.jsx)("i",{className:"bi bi-sort-up-alt sort-icon-active"}):(0,u.jsx)("i",{className:"bi bi-sort-down sort-icon-active"});return(0,u.jsx)("div",{className:"table-container",children:(0,u.jsxs)("table",{className:"data-table",children:[(0,u.jsx)("thead",{children:(0,u.jsxs)("tr",{children:[(0,u.jsx)("th",{style:{width:"8%"},children:"No"}),(0,u.jsx)("th",{style:{width:"20%"},onClick:()=>r("nama_jalur"),children:(0,u.jsxs)("div",{className:"header-cell-content",children:[(0,u.jsx)("span",{children:"Nama Jalur"}),d("nama_jalur")]})}),(0,u.jsx)("th",{style:{width:"20%"},onClick:()=>r("nama_gunung"),children:(0,u.jsxs)("div",{className:"header-cell-content",children:[(0,u.jsx)("span",{children:"Gunung"}),d("nama_gunung")]})}),(0,u.jsx)("th",{style:{width:"15%"},onClick:()=>r("estimasi_waktu_jam"),children:(0,u.jsxs)("div",{className:"header-cell-content",children:[(0,u.jsx)("span",{children:"Estimasi Waktu"}),d("estimasi_waktu_jam")]})}),(0,u.jsx)("th",{style:{width:"15%"},onClick:()=>r("kesulitan_skala"),children:(0,u.jsxs)("div",{className:"header-cell-content",children:[(0,u.jsx)("span",{children:"Kesulitan"}),d("kesulitan_skala")]})}),(0,u.jsx)("th",{style:{width:"12%"},onClick:()=>r("status_jalur"),children:(0,u.jsxs)("div",{className:"header-cell-content",children:[(0,u.jsx)("span",{children:"Status"}),d("status_jalur")]})}),(0,u.jsx)("th",{style:{width:"13%"},children:"Pintu Masuk"}),(0,u.jsx)("th",{style:{width:"15%"},children:"Aksi"})]})}),(0,u.jsx)("tbody",{children:a.length>0?a.map((e,a)=>{var l;return(0,u.jsxs)("tr",{children:[(0,u.jsx)("td",{children:t+a+1}),(0,u.jsx)("td",{children:(0,u.jsx)("span",{title:e.nama_jalur,children:e.nama_jalur})}),(0,u.jsx)("td",{children:(0,u.jsx)(s.N_,{to:"/admin/gunung/edit/".concat(e.id_gunung),title:"Edit data ".concat(e.nama_gunung),children:e.nama_gunung})}),(0,u.jsx)("td",{children:(0,u.jsxs)("span",{title:"Estimasi waktu pendakian",children:[e.estimasi_waktu_jam||0," Jam"]})}),(0,u.jsx)("td",{children:(0,u.jsxs)("span",{title:"Tingkat kesulitan: ".concat(n(e.kesulitan_skala)," (").concat(e.kesulitan_skala||0,"/10)"),children:[n(e.kesulitan_skala)," (",e.kesulitan_skala||0,"/10)"]})}),(0,u.jsx)("td",{children:(0,u.jsx)("span",{className:"status-badge status-".concat((null===(l=e.status_jalur)||void 0===l?void 0:l.toLowerCase().replace(/\s+/g,"-"))||"belum-diketahui"),children:e.status_jalur||"N/A"})}),(0,u.jsx)("td",{children:e.lokasi_pintu_masuk||"N/A"}),(0,u.jsx)("td",{children:(0,u.jsxs)("div",{className:"action-buttons",children:[(0,u.jsx)("button",{className:"action-btn btn-view-poi",title:"Lihat Titik Penting (POI)",onClick:()=>c("/admin/poi?jalurId=".concat(e.id_jalur)),children:(0,u.jsx)("i",{className:"bi bi-geo-alt-fill"})}),(0,u.jsx)("button",{className:"action-btn btn-edit",title:"Edit Jalur",onClick:()=>c("/admin/jalur/edit/".concat(e.id_jalur)),children:(0,u.jsx)("i",{className:"bi bi-pencil-fill"})}),(0,u.jsx)("button",{className:"action-btn btn-delete",title:"Hapus Jalur",onClick:()=>i(e.id_jalur),children:(0,u.jsx)("i",{className:"bi bi-trash-fill"})})]})})]},e.id_jalur)}):(0,u.jsx)("tr",{children:(0,u.jsx)("td",{colSpan:"8",style:{textAlign:"center",padding:"20px"},children:"Tidak ada data jalur yang cocok dengan filter."})})})]})})},o=["Belum Diketahui","Buka","Tutup Sementara","Tutup"],h=e=>{let{searchTerm:a,setSearchTerm:t,gunungFilter:n,setGunungFilter:s,statusFilter:i,setStatusFilter:l,difficultyFilter:r,setDifficultyFilter:c,allGunungList:d,filterGunungId:h,onShowAllJalur:m}=e;return(0,u.jsxs)("div",{className:"toolbar",children:[(0,u.jsx)("div",{className:"search-container",children:(0,u.jsxs)("div",{className:"input-wrapper-icon",children:[(0,u.jsx)("i",{className:"bi bi-search"}),(0,u.jsx)("input",{type:"text",placeholder:"Cari berdasarkan nama jalur...",value:a,onChange:e=>t(e.target.value)})]})}),(0,u.jsxs)("div",{className:"filter-container",children:[(0,u.jsxs)("div",{className:"filter-group",children:[(0,u.jsx)("label",{children:"Gunung:"}),(0,u.jsxs)("select",{value:n,onChange:e=>s(e.target.value),disabled:!!h,children:[(0,u.jsx)("option",{value:"Semua",children:"Semua Gunung"}),d.map(e=>(0,u.jsx)("option",{value:e.id_gunung,children:e.nama_gunung},e.id_gunung))]})]}),(0,u.jsxs)("div",{className:"filter-group",children:[(0,u.jsx)("label",{children:"Status:"}),(0,u.jsxs)("select",{value:i,onChange:e=>l(e.target.value),children:[(0,u.jsx)("option",{value:"Semua",children:"Semua Status"}),o.map(e=>(0,u.jsx)("option",{value:e,children:e},e))]})]}),(0,u.jsxs)("div",{className:"filter-group",children:[(0,u.jsx)("label",{children:"Kesulitan:"}),(0,u.jsxs)("select",{value:r,onChange:e=>c(e.target.value),children:[(0,u.jsx)("option",{value:"Semua",children:"Semua Tingkat"}),(0,u.jsx)("option",{value:"Mudah",children:"Mudah"}),(0,u.jsx)("option",{value:"Menengah",children:"Menengah"}),(0,u.jsx)("option",{value:"Sulit",children:"Sulit"})]})]})]}),h&&(0,u.jsx)("button",{className:"btn-secondary",onClick:m,children:"Tampilkan Semua Jalur"})]})};var m=t(2062);t(9645);const g="http://localhost:5000";const j=function(){const e=(0,s.Zp)(),[a]=(0,s.ok)(),t=a.get("gunungId"),[l,o]=(0,n.useState)([]),[j,x]=(0,n.useState)([]),[p,k]=(0,n.useState)(!0),[v,f]=(0,n.useState)(null),[b,N]=(0,n.useState)(""),[S,_]=(0,n.useState)("Semua"),[w,y]=(0,n.useState)("Semua"),[C,I]=(0,n.useState)("Semua"),[A,P]=(0,n.useState)({key:null,direction:"ascending"}),[T,F]=(0,n.useState)(1),[E,D]=(0,n.useState)(10);(0,n.useEffect)(()=>{(async()=>{k(!0),f(null);try{const e=localStorage.getItem("token"),a={Authorization:"Bearer ".concat(e)},[t,n]=await Promise.all([fetch("".concat(g,"/api/admin/jalur"),{headers:a}),fetch("".concat(g,"/api/admin/gunung"),{headers:a})]);if(!t.ok){const e=await t.json().catch(()=>({}));throw new Error("Gagal mengambil data jalur. ".concat(e.message?"Detail: "+e.message:""))}if(!n.ok){const e=await n.json().catch(()=>({}));let a=e.message?"Detail: ".concat(e.message):"";throw e.error&&(a+=" | Error: ".concat(e.error)),new Error("Gagal mengambil daftar gunung. ".concat(a))}const s=await t.json(),i=await n.json();console.log("DATA JALUR DARI API:",s),o(s),x(i)}catch(e){f(e.message),i.oR.error(e.message)}finally{k(!1)}})()},[]),(0,n.useEffect)(()=>{F(1)},[E,b,S,w,C]);const L=e=>null===e||void 0===e?"N/A":e<=3?"Mudah":e<=7?"Menengah":e<=10?"Sulit":"N/A",B=(0,n.useMemo)(()=>{let e=[...l];if(t&&(e=e.filter(e=>e.id_gunung===parseInt(t,10))),"Semua"!==S&&(e=e.filter(e=>e.id_gunung===parseInt(S))),"Semua"!==w&&(e=e.filter(e=>e.status_jalur===w)),"Semua"!==C&&(e=e.filter(e=>L(e.kesulitan_skala)===C)),b){const a=b.toLowerCase();e=e.filter(e=>e.nama_jalur.toLowerCase().includes(a))}return A.key&&e.sort((e,a)=>e[A.key]<a[A.key]?"ascending"===A.direction?-1:1:e[A.key]>a[A.key]?"ascending"===A.direction?1:-1:0),e},[l,b,t,S,w,C,A]),J=T*E,M=J-E,G=B.slice(M,J),O=Math.ceil(B.length/E);return p?(0,u.jsx)("div",{className:"loading-container",children:"Memuat data..."}):v?(0,u.jsxs)("div",{className:"form-error-message",style:{margin:"20px"},children:["Error: ",v]}):(0,u.jsxs)("div",{className:"jalur-management-page",children:[(0,u.jsx)(i.N9,{position:"top-right",autoClose:3e3}),(0,u.jsx)(c.zY,{title:"Manajemen Data Jalur Pendakian",addLabel:"Tambah Jalur Baru",onAddClick:()=>e("/admin/jalur/new")}),(0,u.jsx)(h,{searchTerm:b,setSearchTerm:N,gunungFilter:S,setGunungFilter:_,statusFilter:w,setStatusFilter:y,difficultyFilter:C,setDifficultyFilter:I,allGunungList:j,filterGunungId:t,onShowAllJalur:()=>e("/admin/jalur")}),(0,u.jsx)(d,{currentItems:G,indexOfFirstItem:M,getKesulitanText:L,handleDeleteJalur:async e=>{r().fire({title:"Apakah Anda yakin?",text:"Data jalur yang dihapus tidak dapat dikembalikan!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Ya, hapus!",cancelButtonText:"Batal"}).then(async a=>{if(a.isConfirmed)try{const a=localStorage.getItem("token"),t=await fetch("".concat(g,"/api/admin/jalur/").concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(a)}}),n=await t.json();if(!t.ok)throw new Error(n.message);r().fire("Dihapus!",n.message,"success"),o(a=>a.filter(a=>a.id_jalur!==e))}catch(t){i.oR.error(t.message)}})},sortConfig:A,onSort:e=>{let a="ascending";A.key===e&&"ascending"===A.direction&&(a="descending"),P({key:e,direction:a})}}),(0,u.jsx)(m.A,{currentPage:T,totalPages:O,itemsPerPage:E,totalItems:B.length,onPageChange:e=>{e>0&&e<=O&&F(e)},onItemsPerPageChange:e=>{D(e),F(1)},indexOfFirstItem:M,currentItemsLength:G.length})]})}}}]);
//# sourceMappingURL=928.455da523.chunk.js.map