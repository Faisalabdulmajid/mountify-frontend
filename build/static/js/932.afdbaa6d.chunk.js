"use strict";(self.webpackChunkspk_gunung=self.webpackChunkspk_gunung||[]).push([[932],{944:(a,e,n)=>{n.d(e,{A:()=>r});n(5043);var i=n(1283),s=n(579);const r=a=>{let{title:e,backText:n,backLink:r}=a;return(0,s.jsxs)("header",{className:"page-header",children:[(0,s.jsx)("h1",{children:e}),(0,s.jsxs)(i.N_,{to:r,className:"btn-back",children:[(0,s.jsx)("i",{className:"bi bi-arrow-left"})," ",n]})]})}},3074:()=>{},6932:(a,e,n)=>{n.r(e),n.d(e,{default:()=>o});var i=n(2555),s=n(5043),r=n(1283),l=n(7488),t=(n(2342),n(3074),n(944)),u=n(579);const m="http://localhost:5000",k=["Belum Diketahui","Buka","Tutup Sementara","Tutup"],d={medan:{"Belum Diketahui":null,"Sangat Mudah (0-2): Jalur landai, setapak jelas":1,"Mudah (3-4): Tanjakan sedang, bebatuan kecil":3,"Sedang (5-6): Tanjakan panjang, butuh bantuan tangan":5,"Sulit (7-8): Sangat curam >45\xb0, scrambling":7,"Sangat Sulit (9-10): Mendekati vertikal, butuh keahlian panjat":9},navigasi:{"Belum Diketahui":null,"Aman (7-10): Jalur jelas, terawat, jauh dari risiko":9,"Cukup Aman (4-6): Beberapa titik waspada, jalur aman":6,"Berbahaya (0-3): Riwayat longsor, kawah aktif, jurang tanpa pengaman":2},risiko_tambahan:{"Belum Diketahui":null,"Rendah/Jarang (8-10): <5 insiden SAR per tahun":9,"Sedang (4-7): 5-10 insiden per tahun":6,"Tinggi/Sering (0-3): >10 insiden SAR per tahun":2},basecamp:{"Belum Diketahui":null,"Sangat Lengkap (9-10): Fasilitas modern, penginapan, persewaan alat":9,"Lengkap (6-8): Basecamp terorganisir, pusat info, mushola, warung":7,"Cukup (3-5): Basecamp sederhana, toilet umum, warung kecil":5,"Sangat Minim (0-2): Tidak ada basecamp resmi, pendaftaran di rumah warga":1},sumber_air:{"Belum Diketahui":null,"Melimpah (7-10): >3 sumber air atau 1 sumber sangat melimpah setiap pos":9,"Terbatas (3-6): 1-3 titik sumber air, mungkin musiman":5,"Langka/Tidak Ada (0-2): Harus bawa seluruh pasokan air dari basecamp":1},lahan_kemah:{"Belum Diketahui":null,"Baik (7-10): Lahan luas, datar, bersih, sumber air dekat <5 menit":9,"Cukup (4-6): Lahan untuk 5-10 tenda, sumber air <30 menit":6,"Buruk (0-3): Lahan miring, berbatu, sempit, sumber air >1 jam":2},perlindungan_kemah:{"Belum Diketahui":null,"Terlindungi (7-10): Dalam hutan lebat atau lembah dalam":9,"Cukup Terlindungi (4-6): Lembah kecil atau di antara pepohonan":6,"Sangat Terekspos (0-3): Punggungan terbuka, puncak, sabana tanpa penghalang":2},lanskap:{"Belum Diketahui":null,"Sangat Bervariasi (7-10): >3 ekosistem berbeda":9,"Cukup Bervariasi (4-6): 2-3 transisi ekosistem":6,"Monoton (0-3): Satu jenis ekosistem dari awal hingga akhir":2},viewpoint:{"Belum Diketahui":null,"Istimewa/Ikonik (9-10): Panoramik 360\xb0, fitur ikonik terkenal":9,"Sangat Indah/Panoramik (7-8): Sebagian besar jalur terbuka":7,"Indah/Terbuka Sebagian (4-6): Beberapa titik dengan pemandangan bagus":5,"Biasa/Terbatas (0-3): Hutan rapat, pemandangan hanya di puncak":2},jaringan_komunikasi:{"Belum Diketahui":null,"Baik (7-10): Sinyal tersedia di sebagian besar jalur":9,"Terbatas (3-6): Sinyal hanya di titik tertentu":5,"Tidak Ada (0-2): Tidak ada sinyal setelah meninggalkan basecamp":1}},h=(a,e)=>0===e||null===e||void 0===e?"Belum Diketahui":Object.keys(a).reduce((n,i)=>null===a[i]?n:null===a[n]||Math.abs(a[i]-e)<Math.abs(a[n]-e)?i:n);const o=function(){const a=(0,r.Zp)(),{id_jalur:e}=(0,r.g)(),[n,o]=(0,s.useState)([]),[_,g]=(0,s.useState)(!0),[c,p]=(0,s.useState)({id_gunung:"",nama_jalur:"",lokasi_pintu_masuk:"",estimasi_waktu_jam:"",deskripsi_jalur:"",status_jalur:"Belum Diketahui",ketersediaan_sumber_air_skala:"",variasi_lanskap_skala:"",perlindungan_angin_kemah_skala:"",jaringan_komunikasi_skala:"",tingkat_insiden_skala:""}),[j,b]=(0,s.useState)({medan:"Belum Diketahui",navigasi:"Belum Diketahui",risiko_tambahan:"Belum Diketahui",basecamp:"Belum Diketahui",sumber_air:"Belum Diketahui",lahan_kemah:"Belum Diketahui",perlindungan_kemah:"Belum Diketahui",lanskap:"Belum Diketahui",viewpoint:"Belum Diketahui",jaringan_komunikasi:"Belum Diketahui"});(0,s.useEffect)(()=>{(async()=>{g(!0);try{const a=localStorage.getItem("token"),[n,i]=await Promise.all([fetch("".concat(m,"/api/gunung"),{headers:{Authorization:"Bearer ".concat(a)}}),fetch("".concat(m,"/api/admin/jalur/").concat(e),{headers:{Authorization:"Bearer ".concat(a)}})]);if(!n.ok)throw new Error("Gagal memuat daftar gunung.");if(!i.ok)throw new Error("Gagal memuat data jalur.");const s=await n.json(),r=await i.json();o(s),p({id_gunung:r.id_gunung,nama_jalur:r.nama_jalur,lokasi_pintu_masuk:r.lokasi_pintu_masuk||"",estimasi_waktu_jam:r.estimasi_waktu_jam,deskripsi_jalur:r.deskripsi_jalur||"",status_jalur:r.status_jalur||"Belum Diketahui",ketersediaan_sumber_air_skala:r.ketersediaan_sumber_air_skala||"",variasi_lanskap_skala:r.variasi_lanskap_skala||"",perlindungan_angin_kemah_skala:r.perlindungan_angin_kemah_skala||"",jaringan_komunikasi_skala:r.jaringan_komunikasi_skala||"",tingkat_insiden_skala:r.tingkat_insiden_skala||""}),b({medan:h(d.medan,r.kesulitan_skala),navigasi:h(d.navigasi,r.keamanan_skala),risiko_tambahan:h(d.risiko_tambahan,r.keamanan_skala),basecamp:h(d.basecamp,r.kualitas_fasilitas_skala),sumber_air:h(d.sumber_air,r.kualitas_fasilitas_skala),lahan_kemah:h(d.lahan_kemah,r.kualitas_kemah_skala),perlindungan_kemah:h(d.perlindungan_kemah,r.kualitas_kemah_skala),lanskap:h(d.lanskap,r.keindahan_pemandangan_skala),viewpoint:h(d.viewpoint,r.keindahan_pemandangan_skala),jaringan_komunikasi:h(d.jaringan_komunikasi,r.keamanan_skala)})}catch(n){l.oR.error(n.message),setTimeout(()=>a("/admin/jalur"),2e3)}finally{g(!1)}})()},[e,a]);const x=a=>{p(e=>(0,i.A)((0,i.A)({},e),{},{[a.target.name]:a.target.value}))},v=a=>{b(e=>(0,i.A)((0,i.A)({},e),{},{[a.target.name]:a.target.value}))},f=(a,e,n)=>(0,u.jsxs)("div",{className:"form-group",children:[(0,u.jsx)("label",{htmlFor:e,children:a}),(0,u.jsx)("select",{id:e,name:e,value:j[e]||"Belum Diketahui",onChange:v,disabled:_,children:Object.keys(n).map(a=>(0,u.jsx)("option",{value:a,children:a},a))})]});return _?(0,u.jsx)("div",{className:"loading-container",children:"Memuat data jalur..."}):(0,u.jsxs)("div",{className:"add-jalur-page",children:[(0,u.jsx)(l.N9,{position:"top-right",autoClose:3e3}),(0,u.jsx)(t.A,{title:"Edit Data Jalur: ".concat(c.nama_jalur),backText:"Kembali",backLink:"/admin/jalur"}),(0,u.jsxs)("form",{onSubmit:async n=>{n.preventDefault(),g(!0);const s=(()=>{const a=a=>{const e=a.map(a=>d[a][j[a]]).filter(a=>null!==a);if(0===e.length)return 0;const n=e.reduce((a,e)=>a+e,0);return Math.round(n/e.length)};return{kesulitan_skala:a(["medan"]),keamanan_skala:a(["navigasi","risiko_tambahan","jaringan_komunikasi"]),kualitas_fasilitas_skala:a(["basecamp","sumber_air"]),kualitas_kemah_skala:a(["lahan_kemah","perlindungan_kemah"]),keindahan_pemandangan_skala:a(["lanskap","viewpoint"])}})(),r=(0,i.A)((0,i.A)({},c),s);try{const n=localStorage.getItem("token"),i=await fetch("".concat(m,"/api/admin/jalur/").concat(e),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify(r)}),s=await i.json();if(!i.ok)throw new Error(s.message);l.oR.success("Data jalur berhasil diperbarui!"),setTimeout(()=>{a("/admin/jalur",{replace:!0}),window.location.reload()},1500)}catch(t){l.oR.error(t.message||"Terjadi kesalahan saat memperbarui data.")}finally{g(!1)}},className:"form-widget-jalur",children:[(0,u.jsxs)("fieldset",{className:"form-fieldset",disabled:_,children:[(0,u.jsx)("legend",{children:"Informasi Dasar"}),(0,u.jsxs)("div",{className:"form-row",children:[(0,u.jsxs)("div",{className:"form-group",children:[(0,u.jsx)("label",{htmlFor:"id_gunung",children:"Pilih Gunung"}),(0,u.jsx)("select",{id:"id_gunung",name:"id_gunung",value:c.id_gunung,onChange:x,required:!0,children:n.map(a=>(0,u.jsx)("option",{value:a.id_gunung,children:a.nama_gunung},a.id_gunung))})]}),(0,u.jsxs)("div",{className:"form-group",children:[(0,u.jsx)("label",{htmlFor:"nama_jalur",children:"Nama Jalur"}),(0,u.jsx)("input",{type:"text",id:"nama_jalur",name:"nama_jalur",value:c.nama_jalur,onChange:x,required:!0})]})]}),(0,u.jsx)("div",{className:"form-row",children:(0,u.jsxs)("div",{className:"form-group full-width",children:[(0,u.jsx)("label",{htmlFor:"lokasi_pintu_masuk",children:"Lokasi Pintu Masuk/Gerbang"}),(0,u.jsx)("input",{type:"text",id:"lokasi_pintu_masuk",name:"lokasi_pintu_masuk",value:c.lokasi_pintu_masuk,onChange:x,placeholder:"Contoh: Desa Kertawangi, Pos Jaga Cibodas"})]})}),(0,u.jsxs)("div",{className:"form-row",children:[(0,u.jsxs)("div",{className:"form-group",children:[(0,u.jsx)("label",{htmlFor:"estimasi_waktu_jam",children:"Estimasi Waktu (Jam)"}),(0,u.jsx)("input",{type:"number",id:"estimasi_waktu_jam",name:"estimasi_waktu_jam",value:c.estimasi_waktu_jam,onChange:x,required:!0})]}),(0,u.jsxs)("div",{className:"form-group",children:[(0,u.jsx)("label",{htmlFor:"status_jalur",children:"Status Jalur"}),(0,u.jsx)("select",{id:"status_jalur",name:"status_jalur",value:c.status_jalur,onChange:x,children:k.map(a=>(0,u.jsx)("option",{value:a,children:a},a))})]})]})]}),(0,u.jsxs)("div",{className:"form-row",children:[(0,u.jsxs)("div",{className:"form-group",children:[(0,u.jsx)("label",{htmlFor:"ketersediaan_sumber_air_skala",children:"Ketersediaan Sumber Air (0-10)"}),(0,u.jsx)("input",{type:"number",id:"ketersediaan_sumber_air_skala",name:"ketersediaan_sumber_air_skala",min:0,max:10,value:c.ketersediaan_sumber_air_skala,onChange:x,required:!0})]}),(0,u.jsxs)("div",{className:"form-group",children:[(0,u.jsx)("label",{htmlFor:"variasi_lanskap_skala",children:"Variasi Lanskap (0-10)"}),(0,u.jsx)("input",{type:"number",id:"variasi_lanskap_skala",name:"variasi_lanskap_skala",min:0,max:10,value:c.variasi_lanskap_skala,onChange:x,required:!0})]})]}),(0,u.jsxs)("div",{className:"form-row",children:[(0,u.jsxs)("div",{className:"form-group",children:[(0,u.jsx)("label",{htmlFor:"perlindungan_angin_kemah_skala",children:"Perlindungan Angin Kemah (0-10)"}),(0,u.jsx)("input",{type:"number",id:"perlindungan_angin_kemah_skala",name:"perlindungan_angin_kemah_skala",min:0,max:10,value:c.perlindungan_angin_kemah_skala,onChange:x,required:!0})]}),(0,u.jsxs)("div",{className:"form-group",children:[(0,u.jsx)("label",{htmlFor:"jaringan_komunikasi_skala",children:"Jaringan Komunikasi (0-10)"}),(0,u.jsx)("input",{type:"number",id:"jaringan_komunikasi_skala",name:"jaringan_komunikasi_skala",min:0,max:10,value:c.jaringan_komunikasi_skala,onChange:x,required:!0})]}),(0,u.jsxs)("div",{className:"form-group",children:[(0,u.jsx)("label",{htmlFor:"tingkat_insiden_skala",children:"Tingkat Insiden (0-10)"}),(0,u.jsx)("input",{type:"number",id:"tingkat_insiden_skala",name:"tingkat_insiden_skala",min:0,max:10,value:c.tingkat_insiden_skala,onChange:x,required:!0})]})]}),(0,u.jsxs)("fieldset",{className:"form-fieldset",disabled:_,children:[(0,u.jsx)("legend",{children:"Parameter Penilaian"}),(0,u.jsxs)("div",{className:"descriptive-grid",children:[(0,u.jsxs)("div",{className:"parameter-group",children:[(0,u.jsx)("h4",{children:"Tingkat Kesulitan"}),f("Medan & Tanjakan","medan",d.medan)]}),(0,u.jsxs)("div",{className:"parameter-group",children:[(0,u.jsx)("h4",{children:"Tingkat Keamanan"}),f("Navigasi & Petunjuk Arah","navigasi",d.navigasi),f("Tingkat Insiden & Risiko","risiko_tambahan",d.risiko_tambahan),f("Jaringan Komunikasi","jaringan_komunikasi",d.jaringan_komunikasi)]}),(0,u.jsxs)("div",{className:"parameter-group",children:[(0,u.jsx)("h4",{children:"Kualitas Fasilitas"}),f("Fasilitas Basecamp","basecamp",d.basecamp),f("Sumber Air di Jalur","sumber_air",d.sumber_air)]}),(0,u.jsxs)("div",{className:"parameter-group",children:[(0,u.jsx)("h4",{children:"Kualitas Area Kemah"}),f("Lahan & Kapasitas Kemah","lahan_kemah",d.lahan_kemah),f("Perlindungan dari Angin","perlindungan_kemah",d.perlindungan_kemah)]}),(0,u.jsxs)("div",{className:"parameter-group",children:[(0,u.jsx)("h4",{children:"Keindahan Pemandangan"}),f("Variasi Lanskap","lanskap",d.lanskap),f("Spot Pemandangan (Viewpoint)","viewpoint",d.viewpoint)]})]})]}),(0,u.jsxs)("fieldset",{className:"form-fieldset",disabled:_,children:[(0,u.jsx)("legend",{children:"Deskripsi Tambahan"}),(0,u.jsxs)("div",{className:"form-group full-width",children:[(0,u.jsx)("label",{htmlFor:"deskripsi_jalur",children:"Deskripsi Singkat Jalur"}),(0,u.jsx)("textarea",{id:"deskripsi_jalur",name:"deskripsi_jalur",rows:"5",value:c.deskripsi_jalur,onChange:x})]})]}),(0,u.jsxs)("div",{className:"form-actions",children:[(0,u.jsx)("button",{type:"button",className:"btn-cancel",onClick:()=>a("/admin/jalur"),disabled:_,children:"Batal"}),(0,u.jsx)("button",{type:"submit",className:"btn-save",disabled:_,children:_?"Menyimpan...":"Simpan Perubahan"})]})]})]})}}}]);
//# sourceMappingURL=932.afdbaa6d.chunk.js.map